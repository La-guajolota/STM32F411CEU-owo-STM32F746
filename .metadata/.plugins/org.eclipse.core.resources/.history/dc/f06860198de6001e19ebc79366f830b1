/* USER CODE BEGIN Header */
/**
  ******************************************************************************
  * @file           : main.c
  * @brief          : Main program body
  ******************************************************************************
  * @attention
  *
  * Copyright (c) 2024 STMicroelectronics.
  * All rights reserved.
  *
  * This software is licensed under terms that can be found in the LICENSE file
  * in the root directory of this software component.
  * If no LICENSE file comes with this software, it is provided AS-IS.
  *
  ******************************************************************************
  */
/* USER CODE END Header */
/* Includes ------------------------------------------------------------------*/
#include "main.h"

/* Private includes ----------------------------------------------------------*/
/* USER CODE BEGIN Includes */
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>
#include <math.h>
#include <time.h>

#include "edge-impulse-sdk/classifier/ei_run_classifier.h"

using namespace ei;

// paste the raw features here
static float features[] = {
		0, 4226, 2404, 2074, 2686, 6996, 6725, 10013, 9478, 7429, 12300, 12051, 16235, 12341, 17600, 18024, 18819, 20205, 22752, 20706, 20925, 26055, 27399, 29008, 27685, 28535, 31524, 34594, 32046, 34334, 35736, 37925, 34295, 40814, 36455, 43797, 42089, 40380, 47345, 45431, 48147, 45291, 46017, 52655, 49953, 54078, 53054, 55085, 57357, 58097, 57469, 59857, 58689, 62048, 65293, 64239, 65535, 65535, 61898, 61885, 58359, 60703, 61475, 55373, 55396, 58326, 56746, 55329, 53219, 51655, 46958, 48134, 45836, 46156, 46932, 43203, 40441, 41329, 41821, 38584, 37014, 35744, 37841, 37358, 35790, 33636, 32857, 31578, 27924, 26619, 23366, 25299, 26463, 21117, 18880, 21922, 20036, 18189, 18078, 18694, 11755, 13736, 9324, 10654, 8219, 8055, 5886, 4722, 2956, 1491, 5381, 3958, 0, 0, 0, 941, 6800, 4085, 5521, 10585, 7832, 13439, 12506, 15803, 11960, 14379, 19182, 16104, 17336, 19139, 17842, 21920, 23756, 23638, 22727, 24653, 28254, 30340, 32642, 28795, 34140, 34749, 35593, 39031, 38065, 39825, 39001, 40032, 44716, 44774, 46003, 46840, 46546, 49920, 48248, 51181, 54001, 52136, 56509, 56068, 53770, 56926, 61359, 58500, 63218, 61394, 62260, 64172, 64320, 63066, 64499, 64527, 60994, 62280, 61184, 55466, 55940, 53242, 53551, 51521, 51564, 53160, 46756, 47717, 49781, 48218, 44564, 43552, 45563, 43017, 41761, 42197, 40361, 38445, 38173, 37477, 30848, 29370, 28375, 29437, 27768, 25694, 23078, 26896, 25270, 22551, 21749, 21046, 21079, 21006, 18336, 18167, 14142, 15391, 13789, 10530, 8865, 7957, 8869, 4551, 3668, 5589, 1079, 2173, 619, 2964, 442, 0, 3252, 6052, 7737, 8348, 9410, 12957, 12476, 10166, 12868, 14001, 14997, 19971, 19285, 20796, 17628, 20909, 24696, 22090, 27962, 29005, 25017, 30667, 31600, 32376, 32245, 34970, 33747, 33905, 39583, 36948, 41287, 37764, 39520, 39877, 44796, 46561, 43201, 49838, 49331, 47141, 50873, 48871, 54431, 54136, 57731, 59674, 55436, 57937, 60182, 62442, 64942, 61256, 65535, 61899, 65326, 63102, 58250, 59869, 57523, 56766, 56192, 56889, 56199, 55359, 49481, 50699, 51080, 46190, 45818, 46989, 45149, 43128, 45652, 39362, 41901, 38166, 37933, 35135, 36425, 37508, 34885, 33225, 28877, 27860, 29309, 25181, 25758, 24968, 24555, 23451, 23227, 19200, 16998, 15980, 16957, 16608, 11760, 13905, 12554, 9045, 11431, 9792, 10616, 5767, 3669, 2032, 1813, 3637, 3049, 0, 3094, 3414, 4918, 3356, 9222, 8012, 7753, 8839, 12915, 8985, 10856, 12336, 18586, 16970, 14858, 21710, 22590, 20372, 20902, 24747, 24384, 23564, 30337, 31656, 31386, 29872, 32921, 34488, 32743, 37732, 38381, 39405, 40132, 43366, 40050, 41249, 46419, 45633, 47805, 46250, 47525, 50544, 49229, 52247, 52613, 55966, 55214, 55915, 57953, 57927, 61515, 61953, 59385, 64807, 63267, 62251, 64069, 61721, 59466, 58540, 56521, 54991, 58322, 54114, 57252, 54300, 52790, 52698, 47711, 49301, 50997, 43328, 46483, 45585, 46163, 39196, 43794, 40252, 39957, 40244, 35736, 37209, 36546, 31608, 34099, 27604, 29973, 30562, 24401, 28303, 24162, 20135, 23518, 18690, 20232, 17317, 18864, 16458, 12288, 13528, 11556, 11815, 12191, 9158, 8870, 4660, 5920, 4145, 2038, 3772, 2005, 0, 2482, 3928, 5070, 3232, 4366, 5465, 6893, 10615, 8527, 11468, 13695, 12873, 12178, 19560, 20398, 21897, 21468, 23095, 20007, 21409, 24648, 26193, 24686, 29381, 27401, 31834, 33990, 29846, 33389, 36340, 37733, 34404, 37933, 37989, 42231, 39803, 43028, 46176, 48258, 43756, 45937, 47941, 51766, 50910, 53337, 51267, 57348, 53644, 56249, 57162, 58544, 61154, 61299, 64990, 65535, 65535, 62054, 65535, 62173, 62009, 59566, 59148, 55394, 53456, 53203, 51365, 55886, 49093, 53230, 52408, 45170, 47549, 48401, 41522, 41844, 39789, 39771, 38643, 36082, 39674, 37950, 34023, 32245, 33812, 28802, 30764, 26886, 24986, 29213, 23186, 24467, 23030, 21309, 18457, 23178, 19817, 19364, 14201, 12769, 17189, 13661, 14884, 10517, 9477, 11052, 5673, 4964, 2315, 2937, 3127, 2932, 2172, 1060, 0, 4127, 6628, 6621, 6972, 7045, 10361, 7172, 11709, 15922, 14165, 17948, 18364, 14603, 16406, 21617, 18249, 22206, 22827, 21242, 23725, 24471, 30651, 32091, 28537, 32885, 34914, 30919, 34711, 36912, 36445, 37472, 42092, 42142, 39642, 39940, 45015, 45149, 46978, 50336, 48078, 52236, 50378, 49997, 51227, 57825, 57160, 54561, 57718, 62569, 63818, 61339, 61907, 64111, 65535, 65483, 63738, 62686, 61581, 61851, 61375, 59746, 57307, 55008, 52157, 53653, 54854, 49302, 51283, 46718, 45170, 43007, 41919, 44128, 43831, 38823, 37984, 35760, 37286, 36365, 32133, 32112, 32722, 34577, 28513, 30127, 29135, 28734, 26725, 23651, 23189, 24439, 23345, 17155, 22275, 19060, 19793, 12445, 13966, 14716, 11956, 10976, 6514, 8571, 7647, 6575, 5906, 2456, 4328, 2176, 1638, 0, 1995, 3330, 6694, 8028, 6778, 9730, 6614, 10351, 12650, 15522, 11881, 11676, 13238, 15713, 16945, 18092, 17860, 19195, 23500, 24082, 25463, 29608, 27438, 27386, 32097, 30745, 34051, 34867, 35094, 34734, 36876, 39140, 38185, 37299, 44913, 44443, 43084, 47594, 46268, 44881, 46907, 46657, 53061, 49635, 52079, 53794, 57628, 54638, 60505, 61261, 59804, 59849, 63293, 62034, 65136, 65527, 63834, 65535, 63587, 62324, 56204, 58177, 57902, 58418, 54104, 56317, 50322, 49180, 47781, 50177, 48414, 47105, 47005, 45944, 40814, 42570, 43178, 40438, 39271, 35178, 33036, 32723, 33114, 30098, 30274, 31523, 25579, 30067, 26249, 27937, 27034, 19769, 18893, 21765, 19194, 15856, 19392, 12890, 15622, 11049, 10628, 12506, 9304, 11196, 8481, 9241, 3789, 6047, 2989, 3318, 72, 3140, 3266, 5624, 2694, 3897, 7017, 6881, 6672, 11875, 7860, 9587, 10942, 16232, 18347, 17345, 19639, 18131, 18758, 18506, 20338, 21828, 22839, 23342, 26371, 30717, 28711, 32612, 35285, 30421, 35200, 34958, 36093, 35655, 38314, 39836, 44506, 42113, 43297, 45210, 46560, 45752, 48617, 50355, 51980, 54786, 55236, 54356, 55825, 56503, 55555, 60388, 59292, 64551, 60341, 62056, 65535, 63508, 65535, 60858, 63294, 58318, 58809, 59148, 56994, 52954, 55439, 53517, 50781, 53760, 50258, 46933, 45301, 45498, 43007, 45359, 40343, 43159, 43024, 37718, 38013, 39384, 36928, 35649, 35501, 33344, 30933, 32691, 32040, 24968, 23637, 23469, 25084, 26245, 21321, 22430, 18238, 16598, 18983, 13986, 17022, 15762, 10964, 10558, 12167, 9148, 5105, 5377, 3892, 7263, 4136, 3193, 0, 3389, 1867, 1342, 4461, 6230, 9394, 8866, 9486, 8838, 8760, 10968, 13583, 11506, 13137, 13979, 20267, 18262, 18205, 22216, 20808, 21434, 24764, 24986, 24421, 25296, 31211, 33884, 30947, 30713, 35776, 36310, 39341, 38891, 38376, 39477, 42225, 43980, 46485, 46448, 44002, 47782, 49062, 52151, 52235, 54269, 50089, 52481, 52744, 54317, 54763, 60223, 57500, 59205, 65083, 64990, 64457, 65535, 65535, 64171, 61904, 57610, 59513, 57385, 54189, 58454, 55392, 52445, 55553, 49263, 50095, 46182, 46518, 45669, 46950, 45273, 44988, 41773, 39089, 37798, 40988, 40042, 34436, 38283, 31188, 34497, 33994, 31799, 27654, 26504, 28914, 28924, 25761, 20352, 23431, 19753, 18657, 19854, 15661, 18205, 15856, 16157, 11941, 13535, 9328, 6634, 8307, 8435, 4543, 4198, 1709, 3946, 0, 0, 0, 1019, 2349, 4646, 7026, 9477, 7054, 9009, 7852, 12089, 15597, 16402, 18167, 14565, 20420, 15772, 20773, 22424, 25439, 23242, 27022, 27655, 27751, 27164, 28184, 27502, 28961, 33555, 31484, 35721, 35617, 38037, 38998, 39621, 42578, 40366, 42888, 44035, 43433, 48442, 47776, 51183, 47644, 51396, 51641, 54314, 56757, 53648, 56426, 61229, 62114, 59041, 65141, 61193, 62483, 65535, 64933, 62383, 60891, 58997, 58626, 57334, 57760, 54726, 55954, 56459, 52511, 50538, 51873, 50818, 50402, 46552, 46884, 46344, 44389, 44119, 38210, 41147, 38743, 35638, 38808, 35215, 36944, 31917, 34584, 27707, 28214, 26641, 28589, 23994, 23055, 20649, 25691, 20378, 20305, 17929, 19672, 17189, 14277, 11307, 13325, 11559, 9150, 6611, 5503, 6503, 7349, 6585, 6032, 1076, 3455, 0, 2602, 0, 3834, 3858, 2407, 4142, 7955, 7797, 8500, 9439, 14566, 10808, 12047, 18727, 17387, 17609, 21721, 23801, 22301, 24437, 23021, 25098, 29603, 28928, 29948, 32947, 31839, 31930, 34233, 31877, 37396, 34590, 40535, 39711, 37856, 42735, 41052, 43079, 42465, 43324, 49967, 50297, 49657, 48894, 51717, 53150, 56662, 57664, 56369, 58714, 59005, 62372, 61681, 64307, 65535, 65535, 65318, 62538, 65447, 64040, 57533, 56187, 60313, 54285, 57956, 52728, 56083, 50220, 53164, 48160, 47709, 45295, 48371, 46204, 44723, 45168, 38984, 37481, 39559, 34805, 35598, 38170, 31521, 36280, 30732, 30799, 31028, 30234, 29930, 27945, 24826, 21996, 24243, 18572, 22095, 17820, 19864, 16318, 13777, 14463, 15048, 10069, 11482, 11807, 9531, 8466, 8846, 8232, 2739, 616, 0, 0, 0, 4267, 1697, 5767, 7935, 5872, 7067, 10494, 6777, 14268, 10705, 16328, 14532, 18682, 19080, 21000, 19704, 19066, 24439, 23341, 26032, 26484, 25454, 30492, 27489, 29855, 34308, 29054, 32128, 34934, 35731, 34936, 34819, 40501, 43356, 42083, 45604, 40986, 43350, 45529, 47541, 50863, 52873, 53220, 54079, 54113, 56420, 52582, 54828, 57192, 61820, 57195, 61848, 60801, 63937, 61825, 65260, 62191, 62481, 62163, 62761, 56765, 57924, 59567, 58719, 54874, 52944, 52131, 49916, 51200, 48590, 50575, 45253, 48049, 42764, 41900, 39366, 41149, 41367, 40194, 36804, 33251, 36448, 33778, 29366, 31303, 29622, 30826, 29095, 26315, 27478, 21456, 22056, 23340, 17478, 16962, 16170, 14881, 12919, 17137, 15765, 9163, 14404, 9534, 10974, 9117, 6074, 4290, 3731, 1946, 2013, 3667, 1411, 1139, 1869, 4969, 5106, 8140, 6860, 6055, 10043, 7704, 9293, 16167, 13769, 15775, 16804, 16785, 17388, 17762, 20793, 22370, 22257, 23214, 27309, 30454, 25193, 30065, 30289, 30217, 36257, 34842, 35988, 38508, 39547, 35954, 38765, 39008, 43382, 42197, 41921, 47413, 44831, 50312, 49359, 50471, 51651, 51374, 54401, 53566, 57113, 59258, 59137, 62147, 58621, 62516, 62542, 65535, 64527, 61095, 59746, 64951, 57310, 56905, 60211, 57939, 55530, 53537, 56337, 55112, 48809, 49670, 47000, 50068, 48545, 42157, 41382, 40993, 40439, 38537, 38022, 37487, 35378, 37673, 36225, 31998, 32315, 33437, 32264, 25877, 26940, 27162, 28133, 26904, 22435, 20234, 19233, 16566, 17085, 19111, 13586, 12418, 12651, 9571, 9953, 8882, 6341, 9246, 4237, 5000, 4299, 6472, 4002, 4216, 0, 0, 750, 4939, 7240, 5769, 8675, 7702, 8479, 11486, 8953, 15463, 11469, 12534, 15575, 20601, 19120, 21141, 17976, 19897, 20954, 22571, 27156, 25667, 29306, 28013, 28387, 33419, 34431, 32563, 37749, 39197, 37957, 38118, 41300, 40582, 44119, 43790, 41766, 43138, 49461, 47685, 49125, 47173, 51206, 51533, 55132, 54223, 58723, 54473, 60132, 59309, 60093, 62812, 63546, 65535, 64800, 65535, 63588, 61051, 61945, 56607, 61138, 56047, 54518, 52952, 56741, 55301, 49346, 50874, 47419, 44959, 49767, 45170, 46927, 43719, 40052, 40625, 39211, 35588, 39572, 36874, 37519, 31404, 33095, 31928, 29392, 28035, 28636, 24153, 24483, 22042, 24783, 22455, 21291, 18704, 18983, 18631, 13764, 16704, 12276, 11638, 14332, 11098, 9559, 7856, 9487, 4933, 7619, 4175, 2503, 0, 2775, 2579, 973, 2912, 7389, 3174, 6971, 5358, 11353, 12789, 12486, 9574, 14759, 14222, 18109, 19669, 16858, 16739, 20334, 21026, 24173, 23103, 23010, 26792, 29635, 28991, 30499, 33212, 31402, 34607, 32335, 35021, 35851, 39014, 38061, 41114, 42926, 41849, 43154, 46340, 43687, 49633, 51090, 49172, 49817, 53136, 55312, 55620, 53508, 59411, 60592, 57609, 61934, 64793, 62278, 61963, 65535, 61669, 62813, 63695, 58773, 59087, 59564, 60611, 57083, 56660, 52997, 50432, 52774, 47476, 46493, 49723, 45868, 47715, 46206, 44479, 40325, 39782, 39532, 38289, 35649, 37075, 35979, 32236, 30256, 34171, 28882, 26744, 27788, 25896, 23588, 24571, 20671, 19486, 18625, 23187, 19055, 20713, 13947, 15256, 11541, 13612, 12525, 11645, 6818, 9279, 6396, 6033, 5331, 3197, 3904, 866, 812, 2997, 4362, 3586, 5436, 4789, 7653, 7618, 7090, 8928, 11745, 14447, 11299, 12978, 13127, 14545, 18211, 20319, 22623, 22976, 21790, 22407, 24332, 26113, 27049, 29661, 29219, 31508, 30569, 34244, 37377, 35864, 34490, 39041, 38973, 37713, 44656, 44379, 40807, 48353, 44107, 50014, 47063, 49804, 52426, 53842, 55970, 56759, 52725, 56186, 60631, 57819, 57914, 62354, 63911, 61082, 62509, 64362, 63373, 63104, 62540, 57591, 57282, 55914, 55402, 52679, 51069, 56303, 48755, 51342, 47654, 47943, 46391, 47229, 43760, 42805, 43745, 38595, 39013, 37852, 35864, 37107, 34226, 36403, 36440, 35340, 27880, 26918, 29672, 26059, 27724, 28401, 23490, 24986, 23004, 22617, 19890, 21156, 15740, 16354, 12750, 12814, 14099, 9353, 11334, 8088, 8239, 9433, 3057, 4830, 4106, 642, 1046, 0, 4141, 1058, 5130, 6533, 8147, 8948, 8390, 11132, 12298, 10214, 11611, 17731, 16026, 13907, 18602, 18162, 18573, 22074, 21255, 24857, 22273, 28578, 29425, 26914, 30681, 33292, 33613, 31538, 33530, 32864, 34366, 35511, 40715, 38851, 39595, 42209, 46397, 46873, 46253, 48285, 51169, 52308, 50721, 51878, 53570, 54072, 55236, 54345, 59441, 58165, 62499, 61563, 60938, 61784, 61867, 65535, 62647, 63702, 64537, 59166, 57491, 57404, 53685, 55113, 55096, 55372, 52871, 54028, 51416, 51419, 44355, 47406, 42237, 44308, 43366, 40916, 39072, 41054, 37506, 39970, 36473, 36621, 32161, 30370, 28524, 27839, 29808, 28799, 23545, 27044, 25037, 25850, 18966, 19163, 22799, 16824, 14186, 16526, 14072, 10598, 11513, 11778, 10205, 8065, 7730, 9142, 3834, 2408, 6174, 190, 1259, 1978, 2360, 3982, 1572, 2848, 6960, 9773, 11235, 8527, 7597, 10499, 10013, 15266, 13064, 15950, 20712, 21918, 21663, 21290, 20361, 26761, 27651, 29080, 26209, 28605, 30285, 28561, 29275, 35655, 37325, 38228, 38412, 37405, 37667, 42911, 41193, 44405, 45026, 42343, 45384, 44925, 49678, 46504, 50300, 54499, 51025, 56327, 56595, 59540, 55874, 57112, 57898, 63531, 62744, 62730, 65535, 65535, 64729, 64828, 63058, 58238, 59616, 61261, 56060, 56132, 55884, 53977, 53477, 50035, 52844, 52147, 50538, 49767, 43490, 42532, 43045, 41041, 43679, 37988, 36113, 36378, 37053, 36335, 31377, 34972, 31314, 29511, 28128, 25055, 29114, 23617, 25504, 25519, 22105, 19476, 22318, 16222, 16322, 15438, 12459, 12363, 12098, 9421, 12797, 8107, 6881, 8661, 4891, 2404, 4802, 3476, 0, 0, 3853, 0, 2219, 6222, 5007, 5739, 5703, 8663, 8109, 11009, 14552, 13397, 16898, 16415, 17748, 21772, 22086, 19141, 22287, 23345, 24419, 25349, 28214, 29793, 29408, 28688, 34082, 34511, 34412, 32814, 35139, 36891, 41164, 40281, 38461, 44708, 45947, 41553, 48841, 48678, 45803, 47561, 51429, 49424, 49370, 53793, 53773, 55744, 59141, 60789, 61841, 59715, 59555, 61456, 63007, 63269, 64375, 62556, 63448, 59081, 61149, 59232, 55279, 53091, 51938, 55170, 55764, 50622, 50649, 50890, 48200, 44893, 43080, 42495, 43554, 44691, 38149, 36870, 41512, 39718, 37424, 36118, 31902, 32219, 28619, 31779, 28981, 26266, 28810, 27821, 26000, 23271, 23578, 23337, 19569, 20503, 18379, 18273, 12541, 11741, 11005, 14936, 7580, 11983, 7785, 6239, 5642, 2554, 3429, 2874, 501, 3082, 1917, 1635, 909, 5982, 5063, 8206, 6790, 6189, 8455, 9232, 13731, 12646, 17666, 18837, 17334, 21707, 19413, 17579, 20506, 22624, 26261, 25928, 25347, 29702, 28662, 27713, 32804, 30576, 34851, 31735, 37468, 35345, 39261, 38636, 43134, 44068, 43075, 44022, 45129, 47291, 44812, 48742, 46815, 53766, 54375, 51999, 55934, 54427, 54263, 55951, 57058, 61620, 63045, 60873, 62517, 65535, 62159, 62650, 59811, 60505, 62129, 58056, 58486, 57911, 57916, 50933, 53610, 53695, 50355, 46978, 45067, 45266, 43637, 46528, 45726, 44389, 40986, 38573, 39008, 40398, 33987, 34409, 34258, 30547, 31843, 31415, 26420, 27769, 28551, 28851, 24280, 23082, 20982, 18970, 17334, 20419, 20839, 19251, 14606, 12217, 10245, 15325, 11840, 7936, 5677, 4943, 7980, 2106, 6875, 0, 4409, 1896, 1740, 1528, 3911, 5375, 7359, 3342, 10605, 9007, 12785, 14245, 13779, 12813, 16096, 12702, 14509, 15896, 16654, 19640, 19011, 22768, 27136, 28376, 23905, 27611, 29206, 27180, 33539, 30744, 32420, 37194, 33162, 39535, 36381, 37519, 39473, 42912, 45993, 46531, 47846, 46117, 50285, 49749, 51978, 49658, 49277, 55208, 55148, 54479, 57143, 61113, 61996, 59786, 60615, 61822, 61836, 62267, 62253, 65535, 65050, 64184, 57919, 59224, 54893, 58562, 57623, 52677, 53495, 52937, 50926, 49233, 45378, 48557, 43027, 48033, 42661, 45167, 39836, 37849, 40520, 36817, 35467, 33509, 32588, 31106, 33156, 32847, 26972, 27304, 24625, 23165, 23933, 21336, 21320, 20556, 22858, 22363, 15230, 16777, 16041, 11909, 11849, 11858, 13472, 6806, 8964, 9173, 6552, 3303, 1633, 4791, 2999, 0, 30, 3057, 4142, 6519, 6882, 5352, 10411, 10673, 7030, 10449, 10073, 12770, 16638, 15684, 13600, 18485, 17216, 19361, 20025, 23526, 20563, 25220, 23465, 29731, 31651, 30017, 27628, 34834, 32299, 32961, 37289, 38662, 36407, 42060, 38552, 44158, 43605, 42005, 47611, 44992, 44235, 51421, 48910, 50142, 51142, 50993, 51575, 58337, 59775, 59429, 61455, 61007, 63531, 64512, 61706, 61792, 64363, 62610, 62762, 60284, 60432, 59894, 60691, 55517, 52862, 52008, 55637, 50052, 49122, 52153, 48526, 49833, 48353, 46462, 46811, 41888, 39289, 43230, 40721, 36295, 39592, 35849, 36424, 34102, 29811, 31907, 33283, 29909, 27365, 23869, 25098, 22145, 20438, 23619, 20424, 17224, 21415, 16002, 19424, 14223, 14872, 9813, 12767, 7100, 10469, 6153, 9382, 3220, 2006, 3662, 3999, 0, 0, 0, 981, 3772, 3616, 7609, 10377, 8896, 8031, 12421, 8702, 11078, 13287, 12985, 16960, 19648, 19441, 17225, 19946, 20741, 25690, 24482, 22686, 29014, 30566, 31051, 32327, 34287, 30338, 33849, 35921, 34750, 34500, 38704, 42201, 40789, 40978, 43191, 46761, 48407, 48363, 50556, 48186, 51155, 54690, 53924, 57016, 54342, 55125, 55107, 61734, 56688, 63326, 65285, 63859, 62464, 65535, 61214, 65389, 64345, 57639, 60610, 57445, 55577, 59244, 56857, 51096, 55782, 53899, 50776, 51220, 48019, 45267, 44422, 43616, 42611, 43571, 41205, 38675, 36612, 37338, 35217, 37051, 35438, 32264, 34592, 31785, 31617, 26824, 28685, 24923, 25752, 22319, 19910, 18552, 22558, 17117, 19753, 19534, 16233, 17260, 11895, 13867, 13135, 12072, 9833, 7531, 6171, 2736, 6414, 1001, 2733, 0, 0, 2023, 1613, 1644, 6091, 4000, 6078, 10482, 10341, 13878, 12544, 16005, 12189, 15113, 20450, 16905, 22616, 21558, 20208, 22495, 21828, 28606, 27730, 26876, 29093, 29503, 32557, 29689, 33951, 34626, 35910, 38696, 37888, 37434, 41036, 45038, 41716, 47017, 43095, 46410, 48626, 49435, 51442, 54512, 55113, 56822, 52803, 54540, 59527, 58723, 60124, 61446, 60014, 63863, 64362, 65535, 65535, 60167, 60395, 62705, 60668, 59293, 60753, 55196, 56372, 55979, 54007, 49779, 50782, 46423, 50652, 47546, 44672, 43509, 41273, 41842, 42983, 42335, 37622, 37181, 36073, 33999, 32323, 35878, 33779, 28713, 30564, 28072, 25805, 23170, 24870, 22740, 20018, 19531, 20588, 15862, 20263, 13936, 12807, 15495, 11504, 14434, 9288, 9685, 11490, 5603, 3416, 3480, 3227, 0, 527, 0, 1442, 1493, 2693, 6623, 6650, 9117, 4831, 9105, 12604, 13459, 10842, 14451, 14936, 13574, 14755, 21508, 19462, 19179, 23536, 21094, 24461, 26117, 23811, 29797, 26997, 28092, 32953, 32653, 35294, 34601, 34232, 38323, 35166, 37711, 42901, 41546, 42272, 45832, 46463, 43354, 49922, 47774, 48112, 51636, 54510, 53134, 54660, 52813, 53914, 61211, 58511, 62855, 58639, 62977, 62056, 62704, 65535, 63373, 59608, 60281, 61961, 56799, 56594, 58422, 53547, 52532, 51954, 51533, 53682, 47557, 51644, 47560, 45316, 48184, 41674, 43228, 43401, 41398, 40545, 40188, 39728, 34689, 36915, 31243, 31922, 33548, 28269, 31180, 26254, 26129, 24725, 24205, 22495, 23324, 20370, 16639, 20622, 15660, 17821, 12569, 13037, 11971, 10384, 8855, 6723, 5370, 4038, 5418, 2846, 3046, 511, 737, 882, 0, 124, 4357, 8411, 7489, 6557, 8503, 11559, 13896, 12850, 11230, 13723, 18371, 15061, 20044, 21640, 21819, 18421, 24590, 26027, 26014, 25457, 29850, 30849, 27341, 29691, 31256, 30633, 36635, 34284, 33849, 37038, 37025, 41328, 44224, 42347, 45571, 47285, 43266, 47942, 46501, 47151, 49772, 48952, 51569, 55368, 57454, 56386, 58021, 58489, 61582, 63246, 63927, 62410, 64654, 63594, 60775, 64294, 63399, 61832, 61885, 55943, 55652, 53717, 53475, 55092, 49180, 51348, 48220, 45994, 49132, 43599, 43183, 43237, 42336, 40692, 40061, 38752, 38731, 37439, 38826, 35867, 32779, 29916, 32011, 28677, 25799, 24847, 24479, 27873, 26111, 23514, 20987, 21755, 21880, 20715, 15627, 18890, 12220, 13695, 11917, 8430, 9893, 11822, 10880, 7562, 7170, 5332, 330, 1192, 0, 2198, 3069, 1284, 5987, 4052, 4902, 6270, 6880, 8326, 9137, 10403, 16412, 14627, 13911, 16900, 16753, 20914, 18238, 22629, 23166, 23585, 25828, 29045, 23941, 27443, 30761, 27731, 34733, 33348, 34985, 36914, 34180, 36270, 41356, 41900, 39527, 43725, 44479, 42114, 47291, 45588, 46184, 49676, 51206, 50104, 52136, 55641, 57046, 57205, 57881, 57381, 62368, 60947, 61920, 62285, 62528, 63654, 62232, 63937, 62247, 62854, 57650, 60233, 60096, 58092, 57371, 54384, 53546, 48870, 50901, 46015, 48105, 46560, 42479, 45006, 43553, 44656, 41145, 41497, 37323, 35519, 37069, 38150, 35425, 32980, 31697, 30952, 25906, 24701, 24835, 27104, 24092, 21105, 19175, 18068, 16579, 18709, 15212, 14872, 12391, 12971, 9715, 12346, 11233, 10949, 9439, 9830, 5671, 6213, 3490, 2325, 429, 0, 0, 5597, 1730, 5454, 5214, 10306, 7660, 8457, 9177, 11685, 13632, 16694, 12290, 19697, 14610, 21211, 18454, 19963, 19497, 21071, 21775, 24986, 24318, 25838, 28606, 29489, 32250, 35944, 36879, 37360, 33704, 34801, 38908, 41711, 40236, 43546, 46131, 45016, 48626, 46106, 46025, 48451, 52515, 52372, 53229, 52978, 54251, 59347, 60401, 60531, 60878, 62540, 61912, 61749, 63860, 63262, 62386, 62927, 59928, 62545, 61319, 57390, 59256, 55416, 52998, 56923, 55875, 49628, 50559, 49773, 50887, 47945, 47372, 45531, 41851, 39644, 38262, 38417, 41448, 36654, 35265, 36858, 37013, 33903, 30689, 28032, 31938, 30722, 24915, 26922, 26404, 23751, 22844, 17923, 16913, 18872, 15873, 15606, 15129, 11146, 10691, 14815, 11316, 11970, 8008, 4835, 4037, 6201, 2899, 2453, 1436, 0, 3327, 1178, 4410, 6181, 3765, 4320, 5740, 11918, 10827, 12351, 13156, 16997, 17465, 18010, 15105, 16542, 20951, 21536, 19991, 21479, 26770, 27713, 26412, 30213, 28846, 28123, 32192, 34101, 32633, 35901, 37369, 35594, 40707, 37887, 40214, 44484, 44490, 43874, 45504, 45112, 47077, 46629, 52828, 53726, 50329, 52627, 55334, 57868, 54675, 55761, 60565, 61586, 58689, 63459, 62034, 65535, 65535, 65535, 63967, 64152, 60538, 61340, 58469, 53902, 58192, 50944, 53473, 53554, 49935, 46594, 51110, 48070, 46032, 47353, 44641, 40455, 43972, 39726, 39266, 40039, 34181, 35197, 33304, 31644, 32263, 31606, 28550, 27105, 27436, 28397, 22617, 25874, 21334, 20796, 21468, 16810, 17418, 14966, 15753, 14782, 10240, 12352, 11224, 10281, 11388, 5029, 6556, 6347, 6993, 5369, 792, 1064, 356, 0, 276, 4965, 7510, 4783, 9732, 7552, 12042, 10888, 10237, 12374, 13067, 14285, 20116, 19249, 20782, 20925, 23152, 25410, 21912, 27018, 25959, 24790, 27807, 30707, 32740, 31081, 34506, 33491, 38166, 34003, 34916, 36282, 43726, 42756, 42971, 46495, 43863, 49472, 45765, 49062, 51521, 50076, 55336, 52747, 55311, 55620, 57614, 59635, 57394, 59839, 59231, 63530, 62851, 65535, 63902, 63980, 60383, 62047, 61516, 58474, 55474, 54867, 54532, 55304, 52650, 53848, 48092, 47634, 51539, 50410, 49359, 45187, 42701, 45626, 41037, 42356, 38898, 38877, 39066, 32719, 33183, 31391, 33821, 33992, 28382, 27959, 24707, 23143, 24178, 21607, 19850, 23574, 18403, 18163, 16529, 19127, 13958, 14520, 10482, 11629, 13145, 8329, 8682, 5737, 6012, 7067, 2660, 5221, 2471, 3010, 0, 1495, 381, 4964, 4252, 4836, 4883, 7167, 8424, 8081, 14460, 11883, 17400, 17902, 17316, 16769, 18659, 21223, 20371, 22437, 26384, 26409, 29069, 30393, 30464, 30871, 33411, 31579, 32998, 37159, 37602, 37189, 34631, 36586, 41075, 42271, 43551, 45403, 47337, 46228, 47174, 46069, 46452, 48926, 52162, 49818, 56190, 52578, 59505, 57242, 58721, 58050, 60706, 65535, 65535, 65426, 64573, 65535, 59896, 62436, 60591, 58448, 55701, 54657, 56328, 54240, 51450, 51211, 49448, 49012, 50461, 48005, 47790, 46731, 42098, 43267, 41427, 40310, 36418, 36848, 37432, 33212, 35884, 36493, 29566, 33557, 30672, 32039, 27199, 26203, 28367, 25849, 25857, 22333, 17802, 21872, 19796, 17968, 17613, 14980, 14299, 10729, 9945, 7520, 7699, 9444, 9234, 4060, 1347, 163, 2901, 1315, 0, 0, 2205, 2156, 6550, 5991, 8635, 10572, 6579, 10759, 11640, 12007, 16299, 12820, 18780, 18229, 17209, 17758, 23971, 22031, 24857, 27845, 24143, 24421, 29482, 31034, 33011, 31370, 35148, 34475, 33807, 37318, 40469, 37904, 39031, 37855, 41142, 45513, 45338, 47257, 49067, 50381, 48788, 53654, 48409, 50172, 56965, 57407, 57531, 56446, 61676, 57565, 58950, 64755, 62473, 62607, 65535, 65285, 64957, 61532, 57639, 57081, 61165, 54263, 55559, 54609, 50958, 53747, 53466, 49839, 50586, 49045, 44900, 46562, 42050, 40885, 41746, 37886, 40198, 41395, 37017, 38022, 36877, 31858, 32185, 31281, 27196, 26509, 24926, 28896, 22791, 22914, 25424, 24799, 21530, 22475, 20132, 15101, 13458, 12749, 12902, 13612, 10566, 8060, 7964, 10834, 7239, 5056, 3836, 5869, 4459, 860, 3200, 2065, 5100, 3480, 5926, 4398, 7489, 5908, 9452, 8658, 11030, 10397, 13096, 17900, 14652, 17500, 21034, 19837, 24228, 19127, 22641, 24394, 24931, 25466, 25301, 29987, 31419, 30399, 33809, 33996, 36906, 35305, 40361, 35270, 38561, 38808, 44364, 42518, 42440, 47028, 44946, 49219, 48190, 50229, 53034, 55481, 55889, 57585, 58745, 54979, 59947, 58462, 63783, 59492, 65535, 61541, 64707, 62555, 65535, 64667, 59759, 58804, 58905, 59959, 56449, 55821, 52053, 52350, 49919, 51125, 52439, 48928, 46487, 45984, 43553, 42022, 40397, 43264, 40344, 39007, 39098, 35605, 36001, 31353, 35636, 34896, 30055, 28425, 31227, 24461, 23476, 27937, 26306, 20266, 20657, 20281, 18576, 17341, 13621, 17977, 13498, 13082, 9761, 8806, 11002, 9411, 9962, 4550, 2023, 1421, 2223, 4239, 0, 0, 3641, 1645, 4098, 4004, 7798, 10658, 7376, 8351, 13769, 13659, 16795, 15488, 17326, 20259, 18373, 20987, 19964, 23493, 25915, 23052, 27652, 27542, 24775, 30229, 30423, 34208, 35062, 33454, 32734, 33297, 37223, 40238, 41953, 38526, 40352, 43716, 43357, 43310, 45007, 46239, 50655, 47886, 49638, 49453, 54506, 54235, 57443, 53783, 60786, 58900, 62995, 60930, 63128, 62914, 62206, 65535, 64507, 64823, 62828, 57206, 59205, 57466, 55529, 55488, 51756, 52831, 54805, 47997, 51632, 50563, 45546, 45919, 43613, 46189, 44688, 43795, 42078, 40176, 40641, 34718, 33323, 31820, 34357, 30246, 33447, 28830, 26078, 27881, 26241, 24092, 23559, 23198, 24161, 22501, 16808, 18862, 14181, 14113, 12271, 12369, 14694, 9571, 10598, 11970, 10579, 7686, 7638, 6146, 3040, 1893, 1433, 0, 0, 3914, 2813, 2944, 9469, 4776, 6123, 6988, 14154, 9655, 13000, 15603, 17424, 14320, 19461, 19203, 20032, 20381, 24132, 27086, 26531, 24745, 28470, 28808, 27861, 31873, 32927, 35848, 34338, 36835, 39273, 40079, 37187, 40112, 44763, 43392, 46160, 47646, 45209, 49914, 48020, 51056, 48622, 51571, 53277, 52846, 55051, 55291, 56089, 56497, 60376, 64004, 61278, 60537, 65535, 62297, 62993, 62623, 60782, 58514, 61861, 55077, 54513, 57010, 51786, 53944, 53432, 48044, 52510, 48926, 46062, 44035, 48001, 46456, 41927, 43483, 42190, 42018, 39716, 38268, 36615, 32931, 36246, 31574, 31046, 27185, 31127, 27661, 25092, 28343, 25629, 21304, 19637, 21577, 22214, 15591, 19275, 13433, 12355, 11929, 13489, 12352, 12815, 7841, 7239, 6731, 2234, 2154, 4338, 588, 0, 0, 4003, 2894, 5815, 2825, 4144, 6904, 6937, 11984, 12077, 14742, 16159, 16431, 15142, 15560, 21141, 21761, 18225, 20501, 24376, 24966, 25125, 23185, 29069, 25444, 29567, 33720, 31311, 36099, 33803, 35725, 36357, 35544, 39993, 42772, 39423, 42011, 40565, 45482, 45091, 46421, 50739, 47095, 52365, 51882, 50726, 51942, 57434, 58601, 55516, 59518, 60037, 63639, 64993, 60187, 65535, 65535, 65535, 60333, 62998, 61020, 57666, 60350, 59126, 57759, 51957, 54571, 49435, 48820, 50754, 50578, 47166, 49576, 43685, 43952, 40954, 43284, 41282, 38040, 40469, 38712, 36762, 37450, 34268, 29494, 31017, 29395, 28517, 27349, 25607, 27961, 24309, 23159, 22785, 20039, 19319, 17420, 14478, 16387, 12633, 15244, 10621, 14670, 13359, 7798, 6061, 6825, 2692, 5386, 3636, 2151, 0, 2954, 1249, 2916, 5094, 6158, 8005, 8982, 7639, 11555, 9252, 12982, 13650, 11899, 14536, 15986, 19319, 17888, 18654, 19411, 21068, 21984, 25375, 24532, 29702, 31328, 31396, 33495, 32125, 31692, 33714, 38182, 36854, 35878, 39726, 40189, 39205, 42626, 43660, 42769, 47648, 44822, 46977, 46099, 52482, 48600, 49787, 51972, 57822, 58872, 57177, 61557, 61462, 58902, 60597, 60073, 61961, 65535, 64825, 62513, 59398, 58746, 59963, 61047, 54743, 53092, 54037, 53687, 55942, 54652, 50368, 48104, 50995, 47413, 46771, 43671, 45277, 39239, 39883, 39672, 35432, 35111, 34945, 37294, 36281, 35098, 30198, 28221, 26633, 26808, 28014, 28148, 22141, 26691, 23470, 19162, 20774, 18558, 19866, 19411, 14991, 14743, 12356, 10592, 10401, 10060, 10242, 8635, 4561, 3975, 1584, 0, 4480, 1954, 1671, 4917, 6314, 4003, 8486, 4186, 5923, 7597, 12158, 14356, 12699, 16355, 14801, 15605, 16776, 15326, 17836, 18168, 20886, 19957, 22653, 27576, 27132, 27179, 27548, 30841, 33199, 30920, 36867, 37813, 36957, 34135, 38945, 41642, 37865, 42842, 40798, 45478, 45135, 48675, 46600, 46020, 47609, 48534, 55183, 52635, 55959, 56340, 57656, 59071, 56299, 60408, 62149, 62545, 65535, 64509, 65535, 61776, 60977, 62716, 62524, 57448, 59258, 56076, 53334, 55145, 50757, 53858, 48960, 48377, 47731, 49362, 47206, 43194, 41548, 43701, 40146, 38883, 37625, 36476, 37287, 37943, 32486, 35319, 34391, 32456, 26604, 29467, 29681, 25923, 26160, 26056, 21909, 23826, 22612, 20017, 17453, 13853, 17661, 12790, 15344, 9666, 8464, 11592, 7307, 7807, 6260, 7079, 1274, 324, 2199, 0, 0, 3086, 4332, 3559, 4807, 3719, 9253, 9082, 13376, 9267, 13915, 16741, 17498, 14646, 15352, 20530, 17338, 18285, 22213, 20643, 23032, 25230, 27957, 25384, 31725, 31137, 32519, 34694, 32524, 35482, 34126, 40219, 40427, 38131, 39702, 42498, 42767, 41622, 45890, 47773, 48337, 49159, 52588, 53555, 52823, 54555, 55299, 56668, 55460, 57710, 61967, 60683, 62492, 59975, 65535, 65535, 64630, 62980, 63859, 60519, 57701, 61995, 58165, 56798, 55751, 54738, 50361, 51992, 51331, 52654, 51411, 46599, 49048, 44980, 43294, 41007, 41811, 41703, 37111, 39283, 38766, 34470, 33153, 35674, 32875, 32521, 27047, 25829, 27223, 23081, 25587, 24981, 25115, 18635, 17963, 17100, 18775, 15362, 14947, 14202, 12102, 14893, 13448, 10883, 11969, 5790, 4759, 5023, 1542, 1132, 4302, 793, 2853, 4178, 248, 5758, 7506, 6066, 10529, 10867, 8210, 11408, 13186, 13153, 17518, 14223, 18331, 15898, 21370, 22371, 21126, 24732, 27053, 25880, 24688, 25941, 30730, 29697, 29922, 29685, 35369, 37639, 33012, 35837, 38531, 38084, 42122, 39840, 40174, 44078, 45866, 45773, 48844, 49438, 52522, 52889, 53387, 50383, 51797, 58568, 56558, 56181, 56178, 59686, 60667, 64450, 60386, 64692, 65535, 63264, 64605, 61979, 57395, 59411, 56092, 55414, 53111, 54127, 54312, 49539, 49124, 50030, 46426, 50346, 48895, 43440, 42638, 45505, 40745, 39598, 41695, 35722, 39615, 37464, 35157, 32122, 31972, 32851, 31847, 28635, 25384, 29127, 27890, 26504, 24615, 25188, 17517, 21896, 19035, 15290, 12836, 15350, 15171, 15264, 11387, 11675, 10585, 10319, 7912, 2917, 1900, 2776, 0, 491, 0, 0, 2, 5677, 4503, 8075, 4644, 8632, 12555, 11196, 10216, 16257, 13021, 15871, 15607, 18290, 20928, 21342, 23966, 19727, 22154, 24268, 28491, 23961, 28882, 31833, 30818, 31691, 36098, 34874, 38254, 38727, 37586, 35641, 40673, 38505, 44418, 43460, 47406, 44848, 44774, 45772, 49778, 50827, 52305, 53575, 55003, 56899, 59490, 55161, 59795, 58749, 63323, 64394, 63727, 65535, 64186, 61406, 63352, 64555, 59857, 59829, 60738, 59305, 58576, 52013, 56494, 54183, 49942, 53324, 47432, 46275, 47954, 43793, 46527, 45876, 39303, 38892, 40050, 40614, 35168, 38499, 36255, 34199, 34501, 29508, 30825, 31524, 24865, 24483, 28338, 27129, 20419, 20826, 20916, 20218, 18354, 16768, 15677, 17873, 14136, 12895, 10866, 8451, 9206, 11174, 6007, 8439, 5397, 6642, 3615, 1864, 513, 0, 1100, 5660, 6247, 3485, 5901, 5805, 11900, 8342, 14604, 14874, 12229, 13129, 16940, 19710, 19514, 18343, 23693, 20276, 20771, 24026, 24646, 26406, 28565, 27709, 27914, 33202, 31609, 33529, 32912, 35742, 38775, 39383, 41418, 38844, 38910, 42661, 44319, 42760, 45857, 50190, 46286, 53344, 49933, 51097, 53361, 56752, 59017, 54125, 61047, 59786, 63377, 60661, 64791, 61776, 65293, 64355, 62118, 61775, 59326, 62928, 61384, 54844, 53257, 52124, 55686, 54644, 48659, 52689, 51089, 49171, 50121, 46622, 44360, 43874, 40815, 42016, 40937, 36931, 35863, 33515, 32840, 34007, 35559, 29924, 31208, 32572, 28985, 25613, 27230, 27072, 21154, 24778, 21359, 18467, 18053, 15899, 19320, 16530, 12022, 13895, 13720, 7954, 8091, 10196, 7234, 4024, 5492, 6952, 163, 161, 0, 3195, 3802, 4186, 1265, 4562, 3568, 5848, 6196, 10817, 12373, 9622, 16873, 12678, 14935, 19468, 20952, 21510, 20755, 18824, 24467, 27200, 23714, 26932, 26742, 32039, 29017, 31677, 29684, 35108, 37868, 38449, 38083, 37364, 38064, 39709, 39144, 39799, 42958, 45853, 46348, 46926, 46605, 47217, 49031, 54327, 54357, 55388, 57790, 53719, 59174, 62455, 61719, 62890, 62859, 62169, 65535, 62043, 63416, 64889, 61871, 59928, 60786, 57361, 54153, 53294, 54049, 55777, 51219, 50518, 50153, 45404, 48463, 49078, 44052, 44454, 39844, 38140, 43172, 40476, 38768, 37437, 32812, 31753, 30326, 30658, 34110, 26649, 26633, 27253, 29320, 25751, 24372, 22939, 19020, 20159, 17909, 14882, 15257, 15876, 13768, 10447, 10423, 14284, 12304, 9160, 8562, 4327, 6007, 6977, 2829, 4111, 1445, 496, 0, 4376, 3765, 2372, 5295, 8028, 6952, 11812, 10740, 9346, 16518, 13786, 14934, 18828, 17474, 18865, 21923, 21029, 26005, 21986, 22307, 26386, 25590, 28807, 29735, 34139, 32974, 33854, 34522, 33349, 33612, 41144, 37218, 38444, 40202, 44674, 46748, 46806, 45039, 48466, 51152, 50907, 52750, 50804, 50708, 56928, 55112, 56389, 56330, 58003, 61229, 58848, 62530, 65535, 62146, 62777, 62230, 59850, 58899, 60866, 56281, 55335, 57547, 53013, 55685, 51697, 54793, 50931, 52299, 51366, 44373, 46567, 43938, 43212, 45081, 42199, 40109, 39718, 36838, 34709, 38944, 36767, 34811, 35031, 31860, 26859, 28981, 26235, 29491, 24486, 25102, 20408, 23290, 18103, 19500, 16871, 17199, 13430, 15634, 14186, 12441, 10057, 12606, 8372, 5746, 8213, 8387, 5958, 4448, 1977, 0, 1588, 0, 2948, 1559, 5493, 6153, 8290, 7362, 9008, 13028, 10953, 10331, 11341, 17255, 15748, 20942, 17739, 20773, 22649, 24352, 22369, 26921, 23292, 25739, 26200, 30856, 28557, 29843, 32153, 32063, 33570, 38481, 39992, 38788, 42166, 38553, 40972, 41735, 45422, 48329, 48025, 50166, 48447, 49515, 49962, 51435, 53159, 53364, 56289, 60032, 56049, 60144, 64033, 64436, 62875, 64986, 65535, 64909, 65535, 62769, 63776, 61882
};

int get_feature_data(size_t offset, size_t length, float *out_ptr) {
    memcpy(out_ptr, features + offset, length * sizeof(float));
    return 0;
}
/* USER CODE END Includes */

/* Private typedef -----------------------------------------------------------*/
/* USER CODE BEGIN PTD */

/* USER CODE END PTD */

/* Private define ------------------------------------------------------------*/
/* USER CODE BEGIN PD */

/* USER CODE END PD */

/* Private macro -------------------------------------------------------------*/
/* USER CODE BEGIN PM */

/* USER CODE END PM */

/* Private variables ---------------------------------------------------------*/

UART_HandleTypeDef huart1;

/* USER CODE BEGIN PV */
uint8_t atributos[18] = {0}; //datos recibidos
char *ptr; //puntero para manipular la cadena de caracteres
int cont = 0; //contador para iterar en el array de features

/* USER CODE END PV */

/* Private function prototypes -----------------------------------------------*/
void SystemClock_Config(void);
static void MX_GPIO_Init(void);
static void MX_USART1_UART_Init(void);
/* USER CODE BEGIN PFP */

void func(bool s, float f); //imprime la señal identificada

/* USER CODE END PFP */

/* Private user code ---------------------------------------------------------*/
/* USER CODE BEGIN 0 */
#include <stdarg.h>
#include "edge-impulse-sdk/classifier/ei_run_classifier.h"

void vprint(const char *fmt, va_list argp)
{
    char string[200];
    if(0 < vsprintf(string, fmt, argp)) // build string
    {
        HAL_UART_Transmit(&huart1, (uint8_t*)string, strlen(string), 180); // send message via UART
    }
}

void ei_printf(const char *format, ...) {
    va_list myargs;
    va_start(myargs, format);
    vprint(format, myargs);
    va_end(myargs);
}
/* USER CODE END 0 */

/**
  * @brief  The application entry point.
  * @retval int
  */
int main(void)
{
  /* USER CODE BEGIN 1 */

  /* USER CODE END 1 */

  /* MCU Configuration--------------------------------------------------------*/

  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */
  HAL_Init();

  /* USER CODE BEGIN Init */
  signal_t signal;
  signal.total_length = sizeof(features) / sizeof(features[0]);
  signal.get_data = &get_feature_data;
  /* USER CODE END Init */

  /* Configure the system clock */
  SystemClock_Config();

  /* USER CODE BEGIN SysInit */

  /* USER CODE END SysInit */

  /* Initialize all configured peripherals */
  MX_GPIO_Init();
  MX_USART1_UART_Init();
  /* USER CODE BEGIN 2 */

  /* USER CODE END 2 */

  /* Infinite loop */
  /* USER CODE BEGIN WHILE */
  int i = 0;
  float t = 0.0;
  while (1)
  {
    /* USER CODE END WHILE */

    /* USER CODE BEGIN 3 */
	  ei_impulse_result_t result = { 0 };
	  run_classifier(&signal, &result, false);

	  if (result.classification[0].value < result.classification[1].value) {
		 //ei_printf("triangulo\r\n");
		 func(false,100);
	  }else{
		//ei_printf("seno\r\n");
		func(true,100);
	}

	//generamos señal con ruido nueva ya dio flojera :( Ya no quiero pensar
	/*
	out = 327675.0*sin(2.0*3.1416*t*f) + 327675.0;
	out += rand();//agregamos ruido

	if(out>=65535){
		out = 65535.0;
	}
	if(out<=0) {
		out = 0.0;
	}

	features[i] = out;

	i++;
	t += 0.001;

	if(i>=999){ //se setea a 0
		t = 0.0;
		i = 0;
	}
	*/
  }
  /* USER CODE END 3 */
}

/**
  * @brief System Clock Configuration
  * @retval None
  */
void SystemClock_Config(void)
{
  RCC_OscInitTypeDef RCC_OscInitStruct = {0};
  RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};

  /** Configure the main internal regulator output voltage
  */
  __HAL_RCC_PWR_CLK_ENABLE();
  __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE2);

  /** Initializes the RCC Oscillators according to the specified parameters
  * in the RCC_OscInitTypeDef structure.
  */
  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSI;
  RCC_OscInitStruct.HSIState = RCC_HSI_ON;
  RCC_OscInitStruct.HSICalibrationValue = RCC_HSICALIBRATION_DEFAULT;
  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSI;
  RCC_OscInitStruct.PLL.PLLM = 10;
  RCC_OscInitStruct.PLL.PLLN = 210;
  RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;
  RCC_OscInitStruct.PLL.PLLQ = 2;
  if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
  {
    Error_Handler();
  }

  /** Initializes the CPU, AHB and APB buses clocks
  */
  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK
                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV4;
  RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV2;

  if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_5) != HAL_OK)
  {
    Error_Handler();
  }
}

/**
  * @brief USART1 Initialization Function
  * @param None
  * @retval None
  */
static void MX_USART1_UART_Init(void)
{

  /* USER CODE BEGIN USART1_Init 0 */

  /* USER CODE END USART1_Init 0 */

  /* USER CODE BEGIN USART1_Init 1 */

  /* USER CODE END USART1_Init 1 */
  huart1.Instance = USART1;
  huart1.Init.BaudRate = 115200;
  huart1.Init.WordLength = UART_WORDLENGTH_8B;
  huart1.Init.StopBits = UART_STOPBITS_1;
  huart1.Init.Parity = UART_PARITY_NONE;
  huart1.Init.Mode = UART_MODE_TX_RX;
  huart1.Init.HwFlowCtl = UART_HWCONTROL_NONE;
  huart1.Init.OverSampling = UART_OVERSAMPLING_16;
  huart1.Init.OneBitSampling = UART_ONE_BIT_SAMPLE_DISABLE;
  huart1.AdvancedInit.AdvFeatureInit = UART_ADVFEATURE_NO_INIT;
  if (HAL_UART_Init(&huart1) != HAL_OK)
  {
    Error_Handler();
  }
  /* USER CODE BEGIN USART1_Init 2 */

  /* USER CODE END USART1_Init 2 */

}

/**
  * @brief GPIO Initialization Function
  * @param None
  * @retval None
  */
static void MX_GPIO_Init(void)
{
  GPIO_InitTypeDef GPIO_InitStruct = {0};
/* USER CODE BEGIN MX_GPIO_Init_1 */
/* USER CODE END MX_GPIO_Init_1 */

  /* GPIO Ports Clock Enable */
  __HAL_RCC_GPIOE_CLK_ENABLE();
  __HAL_RCC_GPIOG_CLK_ENABLE();
  __HAL_RCC_GPIOB_CLK_ENABLE();
  __HAL_RCC_GPIOD_CLK_ENABLE();
  __HAL_RCC_GPIOC_CLK_ENABLE();
  __HAL_RCC_GPIOA_CLK_ENABLE();
  __HAL_RCC_GPIOJ_CLK_ENABLE();
  __HAL_RCC_GPIOI_CLK_ENABLE();
  __HAL_RCC_GPIOK_CLK_ENABLE();
  __HAL_RCC_GPIOF_CLK_ENABLE();
  __HAL_RCC_GPIOH_CLK_ENABLE();

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(OTG_FS_PowerSwitchOn_GPIO_Port, OTG_FS_PowerSwitchOn_Pin, GPIO_PIN_SET);

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(GPIOI, ARDUINO_D7_Pin|ARDUINO_D8_Pin|LCD_DISP_Pin, GPIO_PIN_RESET);

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(LCD_BL_CTRL_GPIO_Port, LCD_BL_CTRL_Pin, GPIO_PIN_RESET);

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(DCMI_PWR_EN_GPIO_Port, DCMI_PWR_EN_Pin, GPIO_PIN_RESET);

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(GPIOG, ARDUINO_D4_Pin|ARDUINO_D2_Pin|EXT_RST_Pin, GPIO_PIN_RESET);

  /*Configure GPIO pin : LCD_B0_Pin */
  GPIO_InitStruct.Pin = LCD_B0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF14_LTDC;
  HAL_GPIO_Init(LCD_B0_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : OTG_HS_OverCurrent_Pin */
  GPIO_InitStruct.Pin = OTG_HS_OverCurrent_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(OTG_HS_OverCurrent_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : QSPI_D2_Pin */
  GPIO_InitStruct.Pin = QSPI_D2_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF9_QUADSPI;
  HAL_GPIO_Init(QSPI_D2_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : RMII_TXD1_Pin RMII_TXD0_Pin RMII_TX_EN_Pin */
  GPIO_InitStruct.Pin = RMII_TXD1_Pin|RMII_TXD0_Pin|RMII_TX_EN_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF11_ETH;
  HAL_GPIO_Init(GPIOG, &GPIO_InitStruct);

  /*Configure GPIO pins : FMC_NBL1_Pin FMC_NBL0_Pin FMC_D5_Pin FMC_D6_Pin
                           FMC_D8_Pin FMC_D11_Pin FMC_D4_Pin FMC_D7_Pin
                           FMC_D9_Pin FMC_D12_Pin FMC_D10_Pin */
  GPIO_InitStruct.Pin = FMC_NBL1_Pin|FMC_NBL0_Pin|FMC_D5_Pin|FMC_D6_Pin
                          |FMC_D8_Pin|FMC_D11_Pin|FMC_D4_Pin|FMC_D7_Pin
                          |FMC_D9_Pin|FMC_D12_Pin|FMC_D10_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_FMC;
  HAL_GPIO_Init(GPIOE, &GPIO_InitStruct);

  /*Configure GPIO pins : ARDUINO_SCL_D15_Pin ARDUINO_SDA_D14_Pin */
  GPIO_InitStruct.Pin = ARDUINO_SCL_D15_Pin|ARDUINO_SDA_D14_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_OD;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF4_I2C1;
  HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);

  /*Configure GPIO pins : ULPI_D7_Pin ULPI_D6_Pin ULPI_D5_Pin ULPI_D3_Pin
                           ULPI_D2_Pin ULPI_D1_Pin ULPI_D4_Pin */
  GPIO_InitStruct.Pin = ULPI_D7_Pin|ULPI_D6_Pin|ULPI_D5_Pin|ULPI_D3_Pin
                          |ULPI_D2_Pin|ULPI_D1_Pin|ULPI_D4_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF10_OTG_HS;
  HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_PWM_D3_Pin */
  GPIO_InitStruct.Pin = ARDUINO_PWM_D3_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF2_TIM3;
  HAL_GPIO_Init(ARDUINO_PWM_D3_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : SPDIF_RX0_Pin */
  GPIO_InitStruct.Pin = SPDIF_RX0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF8_SPDIFRX;
  HAL_GPIO_Init(SPDIF_RX0_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : SDMMC_CK_Pin SDMMC_D3_Pin SDMMC_D2_Pin PC9
                           PC8 */
  GPIO_InitStruct.Pin = SDMMC_CK_Pin|SDMMC_D3_Pin|SDMMC_D2_Pin|GPIO_PIN_9
                          |GPIO_PIN_8;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_SDMMC1;
  HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_PWM_D9_Pin */
  GPIO_InitStruct.Pin = ARDUINO_PWM_D9_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF1_TIM2;
  HAL_GPIO_Init(ARDUINO_PWM_D9_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : DCMI_D6_Pin DCMI_D7_Pin */
  GPIO_InitStruct.Pin = DCMI_D6_Pin|DCMI_D7_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF13_DCMI;
  HAL_GPIO_Init(GPIOE, &GPIO_InitStruct);

  /*Configure GPIO pin : QSPI_NCS_Pin */
  GPIO_InitStruct.Pin = QSPI_NCS_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF10_QUADSPI;
  HAL_GPIO_Init(QSPI_NCS_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : FMC_SDNCAS_Pin FMC_SDCLK_Pin FMC_A11_Pin FMC_A10_Pin
                           FMC_BA1_Pin FMC_BA0_Pin */
  GPIO_InitStruct.Pin = FMC_SDNCAS_Pin|FMC_SDCLK_Pin|FMC_A11_Pin|FMC_A10_Pin
                          |FMC_BA1_Pin|FMC_BA0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_FMC;
  HAL_GPIO_Init(GPIOG, &GPIO_InitStruct);

  /*Configure GPIO pins : LCD_B1_Pin LCD_B2_Pin LCD_B3_Pin LCD_G4_Pin
                           LCD_G1_Pin LCD_G3_Pin LCD_G0_Pin LCD_G2_Pin
                           LCD_R7_Pin LCD_R5_Pin LCD_R6_Pin LCD_R4_Pin
                           LCD_R3_Pin LCD_R1_Pin LCD_R2_Pin */
  GPIO_InitStruct.Pin = LCD_B1_Pin|LCD_B2_Pin|LCD_B3_Pin|LCD_G4_Pin
                          |LCD_G1_Pin|LCD_G3_Pin|LCD_G0_Pin|LCD_G2_Pin
                          |LCD_R7_Pin|LCD_R5_Pin|LCD_R6_Pin|LCD_R4_Pin
                          |LCD_R3_Pin|LCD_R1_Pin|LCD_R2_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF14_LTDC;
  HAL_GPIO_Init(GPIOJ, &GPIO_InitStruct);

  /*Configure GPIO pin : OTG_FS_VBUS_Pin */
  GPIO_InitStruct.Pin = OTG_FS_VBUS_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(OTG_FS_VBUS_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : Audio_INT_Pin */
  GPIO_InitStruct.Pin = Audio_INT_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_EVT_RISING;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(Audio_INT_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : FMC_D2_Pin FMC_D3_Pin FMC_D1_Pin FMC_D15_Pin
                           FMC_D0_Pin FMC_D14_Pin FMC_D13_Pin */
  GPIO_InitStruct.Pin = FMC_D2_Pin|FMC_D3_Pin|FMC_D1_Pin|FMC_D15_Pin
                          |FMC_D0_Pin|FMC_D14_Pin|FMC_D13_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_FMC;
  HAL_GPIO_Init(GPIOD, &GPIO_InitStruct);

  /*Configure GPIO pins : OTG_FS_P_Pin OTG_FS_N_Pin OTG_FS_ID_Pin */
  GPIO_InitStruct.Pin = OTG_FS_P_Pin|OTG_FS_N_Pin|OTG_FS_ID_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF10_OTG_FS;
  HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);

  /*Configure GPIO pins : SAI2_MCLKA_Pin SAI2_SCKA_Pin SAI2_FSA_Pin SAI2_SDA_Pin */
  GPIO_InitStruct.Pin = SAI2_MCLKA_Pin|SAI2_SCKA_Pin|SAI2_FSA_Pin|SAI2_SDA_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF10_SAI2;
  HAL_GPIO_Init(GPIOI, &GPIO_InitStruct);

  /*Configure GPIO pins : LCD_DE_Pin LCD_B7_Pin LCD_B6_Pin LCD_B5_Pin
                           LCD_G6_Pin LCD_G7_Pin LCD_G5_Pin */
  GPIO_InitStruct.Pin = LCD_DE_Pin|LCD_B7_Pin|LCD_B6_Pin|LCD_B5_Pin
                          |LCD_G6_Pin|LCD_G7_Pin|LCD_G5_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF14_LTDC;
  HAL_GPIO_Init(GPIOK, &GPIO_InitStruct);

  /*Configure GPIO pin : LCD_B4_Pin */
  GPIO_InitStruct.Pin = LCD_B4_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF9_LTDC;
  HAL_GPIO_Init(LCD_B4_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : SAI2_SDB_Pin */
  GPIO_InitStruct.Pin = SAI2_SDB_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF10_SAI2;
  HAL_GPIO_Init(SAI2_SDB_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : OTG_FS_PowerSwitchOn_Pin */
  GPIO_InitStruct.Pin = OTG_FS_PowerSwitchOn_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(OTG_FS_PowerSwitchOn_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : DCMI_D5_Pin */
  GPIO_InitStruct.Pin = DCMI_D5_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF13_DCMI;
  HAL_GPIO_Init(DCMI_D5_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : ARDUINO_D7_Pin ARDUINO_D8_Pin LCD_DISP_Pin */
  GPIO_InitStruct.Pin = ARDUINO_D7_Pin|ARDUINO_D8_Pin|LCD_DISP_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(GPIOI, &GPIO_InitStruct);

  /*Configure GPIO pin : uSD_Detect_Pin */
  GPIO_InitStruct.Pin = uSD_Detect_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(uSD_Detect_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : FMC_A0_Pin FMC_A1_Pin FMC_A2_Pin FMC_A3_Pin
                           FMC_A4_Pin FMC_A5_Pin FMC_A6_Pin FMC_A9_Pin
                           FMC_A7_Pin FMC_A8_Pin FMC_SDNRAS_Pin */
  GPIO_InitStruct.Pin = FMC_A0_Pin|FMC_A1_Pin|FMC_A2_Pin|FMC_A3_Pin
                          |FMC_A4_Pin|FMC_A5_Pin|FMC_A6_Pin|FMC_A9_Pin
                          |FMC_A7_Pin|FMC_A8_Pin|FMC_SDNRAS_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_FMC;
  HAL_GPIO_Init(GPIOF, &GPIO_InitStruct);

  /*Configure GPIO pins : LCD_HSYNC_Pin LCD_VSYNC_Pin LCD_R0_Pin LCD_CLK_Pin */
  GPIO_InitStruct.Pin = LCD_HSYNC_Pin|LCD_VSYNC_Pin|LCD_R0_Pin|LCD_CLK_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF14_LTDC;
  HAL_GPIO_Init(GPIOI, &GPIO_InitStruct);

  /*Configure GPIO pin : LCD_BL_CTRL_Pin */
  GPIO_InitStruct.Pin = LCD_BL_CTRL_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(LCD_BL_CTRL_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : DCMI_VSYNC_Pin */
  GPIO_InitStruct.Pin = DCMI_VSYNC_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF13_DCMI;
  HAL_GPIO_Init(DCMI_VSYNC_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : OTG_FS_OverCurrent_Pin */
  GPIO_InitStruct.Pin = OTG_FS_OverCurrent_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(OTG_FS_OverCurrent_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : SDMMC_D0_Pin */
  GPIO_InitStruct.Pin = SDMMC_D0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_SDMMC1;
  HAL_GPIO_Init(SDMMC_D0_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : TP3_Pin NC2_Pin */
  GPIO_InitStruct.Pin = TP3_Pin|NC2_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(GPIOH, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_SCK_D13_Pin */
  GPIO_InitStruct.Pin = ARDUINO_SCK_D13_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF5_SPI2;
  HAL_GPIO_Init(ARDUINO_SCK_D13_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : DCMI_PWR_EN_Pin */
  GPIO_InitStruct.Pin = DCMI_PWR_EN_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(DCMI_PWR_EN_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : DCMI_D4_Pin DCMI_D3_Pin DCMI_D0_Pin DCMI_D2_Pin
                           DCMI_D1_Pin */
  GPIO_InitStruct.Pin = DCMI_D4_Pin|DCMI_D3_Pin|DCMI_D0_Pin|DCMI_D2_Pin
                          |DCMI_D1_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF13_DCMI;
  HAL_GPIO_Init(GPIOH, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_PWM_CS_D5_Pin */
  GPIO_InitStruct.Pin = ARDUINO_PWM_CS_D5_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF2_TIM5;
  HAL_GPIO_Init(ARDUINO_PWM_CS_D5_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_PWM_D10_Pin */
  GPIO_InitStruct.Pin = ARDUINO_PWM_D10_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF1_TIM1;
  HAL_GPIO_Init(ARDUINO_PWM_D10_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : LCD_INT_Pin */
  GPIO_InitStruct.Pin = LCD_INT_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_EVT_RISING;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(LCD_INT_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : ARDUINO_RX_D0_Pin ARDUINO_TX_D1_Pin */
  GPIO_InitStruct.Pin = ARDUINO_RX_D0_Pin|ARDUINO_TX_D1_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF8_USART6;
  HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);

  /*Configure GPIO pin : ULPI_NXT_Pin */
  GPIO_InitStruct.Pin = ULPI_NXT_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF10_OTG_HS;
  HAL_GPIO_Init(ULPI_NXT_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : FMC_SDNME_Pin FMC_SDNE0_Pin */
  GPIO_InitStruct.Pin = FMC_SDNME_Pin|FMC_SDNE0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_FMC;
  HAL_GPIO_Init(GPIOH, &GPIO_InitStruct);

  /*Configure GPIO pins : ARDUINO_D4_Pin ARDUINO_D2_Pin EXT_RST_Pin */
  GPIO_InitStruct.Pin = ARDUINO_D4_Pin|ARDUINO_D2_Pin|EXT_RST_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(GPIOG, &GPIO_InitStruct);

  /*Configure GPIO pins : ARDUINO_A4_Pin ARDUINO_A5_Pin ARDUINO_A1_Pin ARDUINO_A2_Pin
                           ARDUINO_A3_Pin */
  GPIO_InitStruct.Pin = ARDUINO_A4_Pin|ARDUINO_A5_Pin|ARDUINO_A1_Pin|ARDUINO_A2_Pin
                          |ARDUINO_A3_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_ANALOG;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(GPIOF, &GPIO_InitStruct);

  /*Configure GPIO pin : FMC_SDCKE0_Pin */
  GPIO_InitStruct.Pin = FMC_SDCKE0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_FMC;
  HAL_GPIO_Init(FMC_SDCKE0_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : ULPI_STP_Pin ULPI_DIR_Pin */
  GPIO_InitStruct.Pin = ULPI_STP_Pin|ULPI_DIR_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF10_OTG_HS;
  HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);

  /*Configure GPIO pins : RMII_MDC_Pin RMII_RXD0_Pin RMII_RXD1_Pin */
  GPIO_InitStruct.Pin = RMII_MDC_Pin|RMII_RXD0_Pin|RMII_RXD1_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF11_ETH;
  HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);

  /*Configure GPIO pin : PB2 */
  GPIO_InitStruct.Pin = GPIO_PIN_2;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF9_QUADSPI;
  HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);

  /*Configure GPIO pins : QSPI_D1_Pin QSPI_D3_Pin QSPI_D0_Pin */
  GPIO_InitStruct.Pin = QSPI_D1_Pin|QSPI_D3_Pin|QSPI_D0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF9_QUADSPI;
  HAL_GPIO_Init(GPIOD, &GPIO_InitStruct);

  /*Configure GPIO pin : RMII_RXER_Pin */
  GPIO_InitStruct.Pin = RMII_RXER_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(RMII_RXER_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : RMII_REF_CLK_Pin RMII_MDIO_Pin RMII_CRS_DV_Pin */
  GPIO_InitStruct.Pin = RMII_REF_CLK_Pin|RMII_MDIO_Pin|RMII_CRS_DV_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF11_ETH;
  HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_A0_Pin */
  GPIO_InitStruct.Pin = ARDUINO_A0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_ANALOG;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(ARDUINO_A0_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : DCMI_HSYNC_Pin PA6 */
  GPIO_InitStruct.Pin = DCMI_HSYNC_Pin|GPIO_PIN_6;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF13_DCMI;
  HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);

  /*Configure GPIO pins : LCD_SCL_Pin LCD_SDA_Pin */
  GPIO_InitStruct.Pin = LCD_SCL_Pin|LCD_SDA_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_OD;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF4_I2C3;
  HAL_GPIO_Init(GPIOH, &GPIO_InitStruct);

  /*Configure GPIO pins : ULPI_CLK_Pin ULPI_D0_Pin */
  GPIO_InitStruct.Pin = ULPI_CLK_Pin|ULPI_D0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF10_OTG_HS;
  HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_PWM_D6_Pin */
  GPIO_InitStruct.Pin = ARDUINO_PWM_D6_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF9_TIM12;
  HAL_GPIO_Init(ARDUINO_PWM_D6_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : ARDUINO_MISO_D12_Pin ARDUINO_MOSI_PWM_D11_Pin */
  GPIO_InitStruct.Pin = ARDUINO_MISO_D12_Pin|ARDUINO_MOSI_PWM_D11_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF5_SPI2;
  HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);

/* USER CODE BEGIN MX_GPIO_Init_2 */
/* USER CODE END MX_GPIO_Init_2 */
}

/* USER CODE BEGIN 4 */
void func(bool s,float f){

	char msg[5];//buffer de salida

	//Señal triangular
	if (s == false) {

		int sample;
		float t = 0;
		float y; // resultado

		for (sample = 0; sample < f/2; ++sample){ //f/2 muestras

			y = 255.0*t;

			sprintf(msg,"%d\n\r",(uint16_t)y);
			HAL_UART_Transmit(&huart1,(uint8_t *)msg,strlen(msg),100);
			HAL_Delay(5);

			t += 0.001;//avanzamos en el tiempo
		}

		for (sample = 0; sample < f/2; ++sample){ //f/2 muestras
			y = 255.0*t;

			sprintf(msg,"%d\n\r",(uint16_t)y);
			HAL_UART_Transmit(&huart1,(uint8_t *)msg,strlen(msg),100);
			HAL_Delay(5);

			t -= 0.001;//avanzamos en el tiempo
		}

	}

	if (s == true){
		//senoidal
		float w = 2*3.1416; //velocidad angular
		float y; // resultado
		float a = 127.5; //amplitud

		int sample;
		float t = 0;
		for (sample = 0; sample < 1000; ++sample){ //1000 muestras

			y = a*sin(w*t*f) + 127.5;

			sprintf(msg,"%d\n\r",(uint16_t)y);
			HAL_UART_Transmit(&huart1,(uint8_t *)msg,strlen(msg),100);
			HAL_Delay(5);

			t += 0.001;//avanzamos en el tiempo
		}
	}

}

/* USER CODE END 4 */

/**
  * @brief  This function is executed in case of error occurrence.
  * @retval None
  */
void Error_Handler(void)
{
  /* USER CODE BEGIN Error_Handler_Debug */
  /* User can add his own implementation to report the HAL error return state */
  __disable_irq();
  while (1)
  {
  }
  /* USER CODE END Error_Handler_Debug */
}

#ifdef  USE_FULL_ASSERT
/**
  * @brief  Reports the name of the source file and the source line number
  *         where the assert_param error has occurred.
  * @param  file: pointer to the source file name
  * @param  line: assert_param error line source number
  * @retval None
  */
void assert_failed(uint8_t *file, uint32_t line)
{
  /* USER CODE BEGIN 6 */
  /* User can add his own implementation to report the file name and line number,
     ex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */
  /* USER CODE END 6 */
}
#endif /* USE_FULL_ASSERT */
