/* USER CODE BEGIN Header */
/**
  ******************************************************************************
  * @file           : main.c
  * @brief          : Main program body
  ******************************************************************************
  * @attention
  *
  * Copyright (c) 2024 STMicroelectronics.
  * All rights reserved.
  *
  * This software is licensed under terms that can be found in the LICENSE file
  * in the root directory of this software component.
  * If no LICENSE file comes with this software, it is provided AS-IS.
  *
  ******************************************************************************
  */
/* USER CODE END Header */
/* Includes ------------------------------------------------------------------*/
#include "main.h"

/* Private includes ----------------------------------------------------------*/
/* USER CODE BEGIN Includes */
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>
#include <math.h>

#include "edge-impulse-sdk/classifier/ei_run_classifier.h"

using namespace ei;

// paste the raw features here
static float features[] = {
		35498, 35725, 35226, 31566, 32578, 35086, 34781, 34008, 32352, 31009, 30106, 36267, 30900, 33434, 31046, 33402, 36163, 35282, 34676, 31281, 36780, 34944, 31471, 36446, 35892, 35239, 31014, 35046, 35498, 31463, 36767, 30796, 35136, 31778, 33365, 32301, 36406, 33480, 35133, 37466, 36658, 32558, 31353, 36744, 34651, 33981, 35013, 35128, 33351, 37378, 32726, 34563, 37720, 35805, 32342, 31799, 37047, 34662, 36520, 37181, 36797, 33581, 32964, 32692, 32835, 33348, 33442, 32487, 37025, 33988, 35182, 32956, 33680, 37555, 33057, 36025, 37816, 33376, 38401, 38119, 38443, 33652, 33637, 38913, 34573, 33228, 33690, 34707, 33537, 35518, 33701, 35927, 39206, 36620, 39675, 38243, 39566, 35927, 38801, 36591, 40147, 35175, 39156, 37885, 36015, 36877, 35611, 35187, 40273, 40275, 39994, 37467, 35943, 38972, 39765, 37816, 36397, 36834, 35104, 40612, 37825, 35320, 36324, 39196, 35688, 37554, 41100, 38750, 35389, 37088, 36323, 38354, 35470, 37642, 40069, 40500, 41455, 38416, 36066, 37172, 40066, 37401, 38176, 37582, 41417, 40412, 38941, 39342, 39972, 39455, 40811, 37887, 41941, 41500, 42237, 38975, 38978, 39325, 39953, 40847, 39107, 39285, 40269, 41583, 41150, 40066, 36831, 40046, 42840, 37802, 39636, 41016, 39124, 42933, 40027, 36662, 38423, 38265, 42572, 38617, 42902, 38420, 38067, 40494, 38841, 43020, 41024, 40749, 38169, 42901, 37310, 42855, 42742, 40673, 42105, 37833, 39618, 42762, 39683, 44069, 41812, 39434, 42343, 41779, 41517, 42201, 40428, 39180, 43926, 40428, 39973, 42651, 44046, 40304, 42961, 41119, 38780, 39914, 44068, 44564, 38481, 41245, 43410, 42088, 41980, 39691, 39911, 43829, 42614, 40585, 40002, 40077, 44635, 42279, 41759, 40390, 40855, 45266, 40384, 44928, 42063, 39816, 45820, 45279, 39460, 45707, 42917, 40846, 39591, 39764, 43130, 42927, 44523, 39775, 45912, 41836, 46398, 44480, 40266, 43750, 44285, 41619, 42887, 44530, 41003, 41807, 45126, 44262, 46385, 42518, 42741, 40724, 43726, 45285, 46233, 42559, 43208, 46894, 44880, 46120, 45056, 41599, 45841, 47127, 46211, 43760, 41129, 44600, 46949, 44935, 43126, 47045, 46792, 45832, 47312, 47656, 43782, 43375, 44440, 46078, 45216, 45776, 43262, 45118, 44790, 47980, 42888, 44422, 47506, 47820, 46792, 44137, 43923, 42831, 45912, 43787, 48616, 47545, 48751, 48543, 47487, 48573, 48238, 45214, 43661, 44241, 46776, 48496, 44095, 45187, 44398, 47539, 47377, 46133, 48990, 46520, 48475, 49007, 43084, 44426, 44298, 46522, 49095, 47505, 48035, 43289, 48704, 46422, 48701, 44126, 49429, 45286, 49620, 46548, 47623, 45808, 45524, 47025, 46183, 47644, 49683, 49081, 49502, 49909, 45760, 44537, 46075, 45874, 48046, 45242, 47865, 49593, 47257, 48163, 48264, 46383, 47627, 45181, 47223, 49493, 47779, 49689, 46155, 47328, 48292, 46026, 50526, 48083, 51064, 50817, 50381, 51081, 49624, 45596, 50771, 49978, 46771, 49582, 49855, 46281, 46071, 50215, 49955, 50393, 49499, 51610, 47394, 46270, 46838, 45732, 49640, 51765, 48601, 50560, 46584, 51204, 50897, 46781, 47829, 51639, 48203, 50033, 51313, 51888, 49344, 48851, 50360, 52666, 47879, 52164, 52212, 51093, 47730, 48400, 52989, 52009, 48888, 48798, 48912, 49963, 51827, 47705, 52865, 48434, 50638, 51932, 51403, 51935, 48738, 47898, 53218, 47759, 49939, 50152, 47203, 48099, 50645, 53124, 48956, 48294, 51693, 52012, 51495, 47849, 50971, 52746, 52357, 50203, 52312, 48693, 52510, 53804, 53283, 53493, 52034, 52193, 51547, 48963, 51127, 48955, 50567, 51442, 51006, 48923, 49923, 51057, 53264, 51816, 51931, 48513, 53126, 50051, 54992, 48564, 49605, 54521, 52756, 50693, 48820, 50218, 54369, 49017, 53135, 53729, 55089, 52128, 49622, 49429, 54501, 52796, 55182, 51865, 54978, 51240, 49860, 54470, 51190, 54659, 55473, 52729, 55662, 55241, 49766, 52187, 54469, 52664, 50113, 52030, 52152, 50889, 52341, 52437, 50044, 52258, 52898, 52707, 56241, 50719, 56385, 52562, 51377, 52001, 55955, 51597, 52221, 54393, 51887, 54681, 54302, 53598, 52294, 53945, 54489, 52228, 52158, 50670, 55133, 51303, 52125, 51173, 50902, 54570, 55414, 56447, 53124, 52731, 53024, 53094, 53982, 51139, 53930, 52080, 51332, 51776, 53721, 52264, 57548, 56797, 52078, 54099, 51554, 52038, 54507, 54581, 55209, 57739, 57202, 57029, 57042, 53214, 56846, 57204, 58233, 52906, 57260, 51852, 56583, 55126, 54139, 57728, 56604, 53471, 56278, 54083, 54451, 56000, 53538, 55492, 53676, 58517, 56091, 55360, 52415, 56834, 53841, 57118, 57292, 54487, 54754, 55535, 57356, 54089, 57423, 54317, 54545, 55063, 58316, 53487, 53372, 56301, 54403, 56168, 58806, 56655, 56570, 57344, 58119, 53538, 57852, 59545, 54028, 55491, 53479, 53348, 54958, 56341, 54393, 56938, 53833, 56260, 57526, 59190, 57371, 59068, 55313, 59249, 55830, 57215, 57054, 59362, 53884, 56623, 56709, 53798, 56708, 57691, 55067, 57715, 57170, 54824, 57611, 55531, 60523, 60383, 56213, 58957, 54177, 59540, 58119, 56761, 59706, 58406, 54696, 55386, 59700, 56296, 59349, 56527, 60677, 54847, 60937, 58549, 58675, 56126, 55743, 54732, 59885, 55190, 58431, 58861, 60046, 60545, 56367, 58025, 59829, 55810, 56537, 56610, 61295, 58199, 60105, 60660, 61210, 55959, 55916, 60571, 56545, 55743, 58457, 56746, 61765, 56145, 59349, 58878, 57058, 57674, 59823, 60290, 55670, 57193, 61372, 58102, 57410, 61076, 58844, 60209, 55816, 59219, 56891, 61480, 61621, 61916, 57351, 59117, 57015, 59939, 56433, 58562, 59509, 61985, 56422, 58508, 61736, 58957, 58661, 59507, 60007, 58883, 61600, 58690, 59870, 58771, 59808, 57875, 56932, 62682, 62935, 57941, 56539, 57282, 58161, 60388, 60496, 56663, 61508, 61215, 58299, 57773, 62586, 56951, 57384, 60589, 60150, 62286, 59577, 57512, 60801, 60126, 58427, 58811, 57305, 61033, 63488, 57783, 63362, 60812, 59688, 62181, 61724, 58875, 59015, 57718, 58603, 62655, 61334, 58415, 60899, 59855, 58934, 57538, 62159, 58895, 61733, 63694, 59090, 58547, 59304, 58891, 61451, 62997, 62755, 61651, 63738, 62916, 63713, 64046, 59786, 58445, 58072, 59136, 59584, 62926, 59074, 60768, 59200, 62470, 59702, 61628, 59866, 61269, 64554, 59439, 60133, 59899, 62570, 62962, 59080, 63673, 62221, 60651, 63804, 60530, 58708, 60850, 58777, 60256, 60050, 60458, 61720, 60126, 63702, 63494, 63336, 61833, 62678, 62812, 63289, 59172, 64619, 62350, 62355, 60859, 64757, 60666, 64693, 60686, 63577, 58944, 60724, 63272, 59991, 61424, 63868, 61298, 62664, 60633, 62123, 60849, 63879, 61397, 63558, 62654, 59019, 62012, 63239, 61303, 60599, 64986, 62415, 65535, 63655, 61784, 64741, 60213, 60362, 61411, 60329, 65378, 61787, 62688, 61477, 63268, 61001, 63567, 63991, 65174, 63161, 62292, 61126, 63079, 61674, 64931, 59602, 63661, 62339, 62006, 65535, 63213, 60941, 64482, 65438, 65535, 62251, 61196, 59812, 63245, 61957, 60252, 64773, 61872, 61768, 62066, 61494, 61455, 64818, 65535, 63136, 61181, 65112, 63159, 64776, 63975, 60617, 65535, 64323, 63932, 65535, 65535, 64471, 62398, 65535, 62824, 62138, 60232, 62246, 62673, 61730, 62595, 60419, 65535, 62375, 60813, 60442, 64416, 63612, 63594, 60485, 65522, 63149, 65535, 63403, 63461, 65497, 64447, 65535, 65535, 61165, 63938, 64127, 63338, 63468, 62377, 64857, 65535, 65167, 64405, 60731, 62692, 63061, 63479, 65535, 62707, 63121, 62094, 64808, 65456, 64068, 63342, 65535, 62260, 63203, 63908, 63487, 62886, 65535, 63183, 63378, 62416, 65535, 65535, 65535, 62886, 65265, 63637, 64448, 62253, 61321, 61407, 65535, 65500, 65473, 65276, 62171, 63162, 65535, 64979, 65535, 63987, 65535, 63757, 61746, 65535, 63565, 64273, 61380, 63369, 61656, 65535, 64664, 64688, 63648, 65535, 63294, 64757, 63059, 63067, 62035, 63108, 62201, 62062, 65535, 62241, 62430, 63552, 62470, 65535, 65535, 65535, 65535, 63404, 65535, 64488, 64907, 65250, 64162, 65535, 64502, 65535, 62881, 62715, 65535, 65535, 65535, 62068, 63772, 65535, 64788, 65535, 62242, 62064, 64714, 65044, 65535, 62839, 65535, 64773, 64787, 63651, 64536, 65535, 63643, 65535, 64393, 63003, 61928, 65535, 65535, 65535, 65535, 65102, 63812, 65507, 65535, 65535, 65535, 65345, 63842, 65535, 65535, 65535, 62285, 64275, 62960, 64696, 62664, 62259, 64383, 62611, 64040, 65535, 65535, 64038, 64523, 63728, 65195, 65535, 65535, 65535, 62934, 65535, 65535, 65535, 63293, 65535, 65535, 65535, 65535, 64166, 63192, 62642, 65530, 65221, 65535, 65535, 65535, 65535, 65535, 65535, 63618, 65535, 65535, 65142, 65535, 65535, 65535, 64863, 62371, 65535, 65286, 65475, 64599, 63795, 63251, 65535, 62443, 63757, 64097, 65535, 64114, 64050, 63017, 64352, 65535, 62332, 62530, 62882, 65535, 65535, 64885, 62962, 65535, 63889, 62893, 64996, 64394, 65042, 64877, 63952, 65535, 65535, 65535, 65535, 65535, 65535, 64982, 63454, 65535, 62797, 62237, 65535, 62945, 65535, 64743, 65535, 65535, 65208, 62470, 65535, 65162, 64316, 65535, 64769, 65535, 64138, 64592, 64066, 62276, 65535, 65535, 65535, 64869, 62973, 64193, 64906, 63369, 65181, 63747, 65535, 64582, 63162, 65535, 65535, 65535, 65535, 64783, 65535, 62331, 64952, 64319, 62942, 65012, 65535, 63818, 65535, 65535, 65535, 65535, 62532, 62780, 64551, 63086, 65120, 63517, 65535, 62271, 65111, 65535, 63821, 65348, 65158, 62813, 65039, 65362, 65535, 65535, 65535, 65535, 63725, 65535, 65535, 65535, 65535, 65535, 63747, 65535, 65535, 65535, 65535, 65535, 63723, 65535, 65535, 63311, 63157, 65535, 65535, 63181, 65535, 65205, 65535, 65113, 62792, 62381, 65535, 65535, 65535, 65535, 65535, 64759, 65535, 65535, 65535, 65535, 64191, 65535, 65535, 65535, 63635, 65535, 65535, 65535, 65535, 65535, 65535, 63924, 63543, 64092, 64649, 64548, 63415, 64339, 65535, 65535, 63244, 65535, 62849, 64944, 65535, 65154, 63579, 65535, 65535, 64878, 63924, 62444, 63156, 65535, 65535, 64734, 65535, 63230, 65535, 62446, 63634, 65535, 65535, 65535, 65535, 62262, 65535, 65011, 65535, 65212, 65535, 65535, 63983, 63575, 62446, 62471, 65535, 64307, 63489, 65388, 62819, 65369, 65535, 63810, 62210, 65535, 61966, 64414, 64834, 65535, 63087, 62775, 63284, 62272, 65535, 62197, 64872, 63783, 65535, 63766, 65535, 64667, 62860, 65535, 64903, 61921, 64424, 62233, 65535, 65235, 64537, 62542, 65535, 65535, 63322, 65535, 62015, 64515, 65535, 65535, 62709, 63526, 65535, 65535, 65535, 65535, 62086, 62289, 65535, 64951, 64353, 65535, 61496, 63066, 65535, 62270, 65535, 65535, 64391, 61613, 65054, 64382, 64165, 65476, 63253, 64969, 63252, 65091, 61818, 65535, 62650, 62271, 65414, 65535, 62268, 65535, 64864, 65350, 61970, 65535, 63324, 63175, 64014, 65535, 63618, 62650, 63605, 61988, 63694, 65535, 61161, 65535, 65332, 63367, 65535, 64449, 62845, 61664, 62749, 65535, 63913, 61925, 65535, 64624, 62695, 65008, 63693, 64868, 65535, 60978, 62946, 61281, 65535, 62957, 65535, 64626, 65535, 62281, 61457, 63920, 62777, 65212, 63141, 61039, 64648, 63749, 61889, 65535, 65535, 63468, 62829, 63993, 64630, 65535, 65316, 63665, 61668, 61448, 61854, 62321, 64877, 65344, 61752, 65535, 63356, 62817, 61731, 65535, 61739, 65535, 63552, 60672, 65535, 65238, 62911, 65535, 60645, 64319, 65535, 63984, 63368, 64674, 64419, 65535, 60713, 60589, 61247, 61289, 64721, 62455, 64019, 62720, 64242, 61698, 63712, 61032, 65535, 62171, 62500, 60108, 65362, 61722, 63702, 63615, 60514, 60480, 62645, 61979, 65535, 63319, 62084, 65535, 64227, 65535, 60461, 65535, 62418, 65535, 60985, 62855, 60244, 63374, 65311, 62910, 60505, 65535, 62877, 59609, 65535, 64402, 59828, 61934, 63127, 61954, 62128, 60053, 60586, 63003, 64449, 64398, 64943, 63560, 64563, 65535, 60745, 61491, 59773, 59798, 61719, 64299, 63769, 61804, 64998, 61558, 61032, 63025, 60901, 61953, 64829, 60887, 59152, 61657, 64157, 61538, 65293, 62742, 63848, 62573, 65296, 63519, 60326, 62619, 63459, 60958, 61080, 59791, 62153, 64333, 59915, 58714, 58579, 63006, 61408, 63098, 61511, 60616, 61648, 64302, 60811, 63358, 61835, 61300, 60762, 61385, 60120, 60475, 63685, 62294, 60537, 63599, 64305, 60614, 58460, 60107, 59613, 60495, 60609, 63753, 62342, 58647, 58476, 61271, 59678, 59063, 62883, 63302, 58425, 63109, 60759, 60782, 63105, 61932, 62632, 62312, 60323, 62168, 58743, 57828, 61558, 63983, 63801, 59104, 59935, 60362, 62743, 58147, 61792, 61766, 59523, 61329, 61920, 61394, 61531, 61205, 60289, 59664, 63375, 58680, 57707, 60974, 58141, 57836, 60822, 58229, 58376, 61468, 57621, 59701, 59905, 58254, 58958, 57195, 59269, 62039, 59894, 61495, 58188, 59121, 59934, 58667, 59861, 58406, 61572, 58695, 59401, 61403, 56545, 58756, 62781, 59771, 56536, 57629, 56729, 62298, 57559, 59004, 59221, 57343, 57839, 56945, 60903, 62021, 59723, 60376, 57245, 58287, 59465, 59022, 56209, 61847, 56384, 58208, 58911, 56829, 56419, 61046, 55938, 61840, 57372, 61263, 61117, 61439, 61174, 60746, 61065, 60291, 61947, 59507, 59733, 56849, 57114, 57339, 56498, 61264, 55409, 59340, 59833, 56022, 55969, 56495, 59739, 55561, 60745, 55388, 58481, 60539, 56672, 59264, 58485, 57564, 60024, 60675, 56345, 57131, 57901, 55495, 60739, 55485, 55700, 55798, 55793, 56904, 56079, 56259, 54889, 55792, 58305, 55363, 54736, 60048, 54921, 54584, 56400, 58948, 60529, 54624, 55522, 59755, 55509, 55701, 56615, 56397, 57016, 57683, 58662, 56984, 59485, 55656, 58064, 60309, 58608, 59511, 55320, 54869, 56247, 54960, 57326, 55136, 57866, 54201, 54444, 55581, 58522, 53815, 55158, 56354, 54584, 53727, 55193, 59773, 55921, 58735, 55064, 54890, 59140, 57023, 54332, 54016, 53532, 54306, 57028, 57458, 54198, 57700, 56896, 58908, 55811, 58706, 54039, 56417, 56995, 58054, 58788, 54300, 53547, 53764, 55818, 57767, 55111, 55087, 58754, 54033, 58461, 52771, 56029, 56420, 53828, 54309, 53088, 53424, 54776, 53367, 56825, 58441, 58266, 58225, 55675, 55779, 54516, 52027, 57310, 54304, 53418, 56700, 51791, 56895, 53746, 57233, 55498, 51802, 57386, 55705, 57833, 55026, 54794, 53353, 51682, 57470, 57663, 52625, 53755, 52105, 56179, 57215, 53801, 55147, 51314, 52631, 55552, 57417, 52076, 52949, 55832, 54248, 50850, 52456, 56689, 56649, 51452, 53031, 56226, 50601, 51916, 56852, 55603, 55528, 52809, 50578, 55010, 55290, 53657, 55216, 51445, 51914, 54861, 55673, 53368, 53757, 50719, 55053, 52973, 49940, 52183, 54521, 54871, 54643, 53194, 53914, 52164, 53886, 54472, 50283, 55904, 50501, 52505, 52651, 54513, 53672, 55396, 51933, 55297, 51377, 55577, 55059, 50690, 55042, 52148, 54416, 53832, 54389, 52187, 51615, 53677, 50592, 52811, 49868, 49641, 48826, 52991, 50837, 53323, 53190, 52073, 50139, 55024, 51680, 50200, 48596, 48650, 53270, 50155, 53492, 51339, 54670, 50974, 51889, 52790, 51627, 49458, 50670, 52954, 49479, 52102, 48474, 51919, 50208, 52472, 53816, 49776, 50981, 48404, 53151, 49376, 50018, 53302, 49343, 48227, 49936, 50853, 49592, 47763, 51166, 49376, 51417, 50744, 50281, 47689, 49836, 53102, 48875, 52348, 48866, 47066, 49755, 47698, 49128, 48698, 47406, 48173, 47937, 49296, 52715, 47024, 48422, 51793, 49316, 48056, 50673, 47570, 48087, 46519, 49113, 49189, 46618, 49728, 47992, 50577, 48661, 52127, 46640, 51366, 47452, 50700, 47234, 49262, 51339, 48476, 48267, 51492, 50234, 46645, 47816, 45511, 49266, 50609, 49657, 50114, 46008, 46455, 45460, 51159, 48672, 49076, 46624, 45818, 47495, 47361, 49293, 48087, 47404, 47224, 50560, 49865, 45251, 46398, 45838, 45111, 49904, 45764, 48370, 47392, 48294, 50878, 48561, 48118, 46246, 45726, 46555, 45703, 49075, 49751, 46098, 46852, 48461, 49622, 49021, 49769, 49701, 47544, 47927, 44958, 49655, 43886, 48328, 49195, 47726, 44386, 45981, 48044, 47210, 45230, 45043, 48713, 45601, 44495, 44810, 47329, 47383, 46962, 45333, 44774, 44808, 45607, 45971, 43281, 48471, 46289, 47774, 43001, 47058, 43367, 46036, 44517, 48282, 44215, 42860, 43376, 43370, 47809, 46381, 48507, 45830, 46289, 44967, 48377, 47294, 48429, 46940, 43532, 43418, 44776, 42723, 46523, 44417, 47192, 41959, 47639, 46450, 44550, 43030, 44775, 46582, 47810, 47484, 42994, 45001, 46205, 42239, 43619, 43976, 44757, 43882, 46931, 41472, 46552, 46354, 43413, 46551, 40879, 44901, 45300, 40786, 42643, 41492, 41538, 44396, 44557, 40648, 42770, 43551, 44219, 40405, 42637, 46183, 41648, 40340, 41184, 40046, 46122, 43522, 40870, 40475, 46233, 45425, 42388, 40958, 42236, 44501, 41849, 44598, 43412, 45445, 43807, 43378, 44451, 42212, 45508, 44572, 44345, 44082, 42305, 40064, 44511, 45058, 39838, 39544, 39843, 43795, 45235, 39887, 40724, 44984, 38832, 42254, 40845, 41973, 39461, 38722, 43343, 39786, 44428, 44601, 42472, 38911, 43146, 38492, 44358, 39277, 39541, 44309, 39447, 44311, 42708, 39494, 38669, 41922, 38988, 40445, 40687, 39905, 42478, 39325, 40208, 38496, 40423, 40023, 40346, 42328, 39701, 42283, 38648, 42960, 38869, 38679, 41531, 42414, 42795, 41651, 39081, 38518, 39497, 42678, 36984, 37903, 37906, 42345, 38813, 41121, 38653, 42903, 39422, 38080, 40712, 41742, 39371, 37547, 39344, 40152, 39795, 37025, 37417, 36855, 36378, 40905, 38017, 42211, 39597, 40468, 38724, 36549, 37282, 38889, 39457, 38539, 36246, 35844, 40892, 38442, 35938, 38733, 39907, 36932, 35597, 36124, 35642, 40380, 41209, 37991, 36003, 35247, 40812, 40995, 39686, 40859, 36302, 39376, 36197, 39057, 37431, 40882, 34794, 40681, 36981, 37504, 36816, 35325, 37587, 36410, 40069, 37903, 40338, 39377, 34387, 38831, 36690, 39102, 37917, 39809, 36699, 36652, 39721, 39803, 33843, 34704, 35925, 39765, 39630, 34079, 34204, 39118, 36089, 34663, 37329, 38719, 39434, 39134, 37084, 34384, 37164, 37453, 34504, 33314, 32617, 33621, 37259, 33834, 37491, 37608, 35183, 36967, 32844, 38747, 37362, 35422, 32590, 32861, 33275, 34895, 36027, 33636, 37680, 37582, 36640, 35432, 35711, 35887, 32490, 35008, 33503, 33621, 37567, 35326, 33209, 32511, 31310, 31844, 37024, 33260, 35941, 32200, 32281, 34122, 32853, 36381, 34170, 31110, 31104, 36779, 33957, 31495, 32177, 34205, 32472, 34568, 36218, 34440, 35473, 35581, 31655, 35779, 36601, 32282, 30984, 35571, 30609, 34070, 34345, 35765, 31047, 36056, 29967, 34921, 36090, 35893, 34600, 32358, 34056, 35863, 35456, 31589, 34005, 30969, 35215, 31803, 35572, 34861, 34017, 32528, 30047, 30342, 33498, 29953, 32647, 32236, 34920, 33365, 32287, 31614, 33373, 30595, 29278, 33698, 29627, 30593, 29897, 31081, 34317, 29902, 31537, 29777, 29844, 32393, 34492, 29779, 29283, 34361, 33320, 30263, 29276, 29898, 32226, 30953, 29515, 31205, 33354, 32678, 27702, 31484, 29063, 29049, 33455, 32802, 30436, 31643, 33262, 33337, 29871, 32131, 28554, 29695, 29271, 27136, 32688, 33247, 29017, 30458, 27115, 32279, 31032, 26683, 30847, 26704, 28136, 27940, 28108, 29904, 30049, 28327, 29195, 27202, 30277, 31319, 28688, 27067, 27022, 29501, 32256, 27186, 27373, 31201, 29464, 25749, 29249, 31939, 27423, 26695, 27760, 30875, 26880, 26622, 25464, 27947, 31138, 25491, 26267, 25935, 30387, 25902, 24993, 28690, 27258, 30367, 25319, 27506, 29587, 29683, 25922, 26399, 28323, 28464, 26590, 30871, 30892, 27387, 30034, 25144, 28926, 28268, 26978, 25039, 30406, 25494, 30255, 26156, 27547, 28990, 27246, 27495, 25237, 28850, 28564, 24518, 27124, 27423, 29850, 26565, 23752, 27158, 29151, 29063, 29574, 24176, 24553, 26221, 27960, 29351, 24172, 23250, 24528, 24493, 24790, 26591, 26207, 25203, 25742, 25865, 27324, 26461, 27613, 22571, 28415, 22578, 22555, 22313, 22903, 24926, 26737, 23133, 23349, 28575, 24415, 28169, 26419, 26297, 24371, 25903, 28083, 23385, 23016, 25872, 27129, 25874, 21711, 27709, 24362, 25472, 22854, 21958, 23417, 26625, 26606, 24807, 21369, 23645, 26953, 24008, 26814, 26656, 22010, 25678, 23779, 21820, 24773, 22737, 24347, 24951, 22981, 25869, 24898, 24033, 21858, 21519, 21541, 23799, 24009, 23133, 23373, 20770, 22210, 26087, 24912, 23746, 23620, 24029, 20776, 21081, 24765, 21446, 24643, 23177, 20400, 22444, 20168, 23180, 23548, 22400, 23701, 25652, 22859, 19698, 22253, 23254, 25397, 24035, 25263, 22452, 23156, 23483, 19628, 23992, 24584, 19782, 22296, 22557, 20271, 19328, 24528, 19347, 19560, 24572, 18568, 20129, 23801, 19298, 21884, 22560, 20035, 23066, 23061, 20455, 20627, 24566, 19071, 22919, 23354, 22587, 19831, 17937, 20503, 21850, 20565, 24203, 21066, 23753, 23713, 23175, 17591, 18958, 17906, 21426, 17542, 20798, 20978, 18850, 18535, 23011, 21973, 23206, 18946, 18060, 17662, 17578, 18135, 21066, 20371, 19538, 16840, 20439, 20570, 17581, 21774, 16778, 22993, 19488, 20814, 22382, 18277, 22464, 19126, 19819, 19824, 19230, 16706, 19793, 16410, 19371, 22296, 22337, 20222, 20282, 18632, 17553, 22214, 17414, 17040, 19848, 16029, 17151, 17926, 21388, 15662, 19292, 16280, 16336, 19255, 17144, 20798, 18674, 20004, 16201, 19682, 20745, 20339, 17386, 15764, 16395, 20168, 20767, 16004, 17829, 20146, 20102, 17390, 19981, 20980, 19581, 18752, 16720, 18828, 15236, 17402, 15454, 19292, 15892, 17621, 15717, 17563, 18552, 14868, 15982, 20289, 15553, 16768, 16085, 14410, 17863, 19476, 18030, 14078, 20150, 20033, 19517, 14166, 18394, 15277, 14285, 18484, 17978, 17146, 15211, 13512, 16549, 15183, 14138, 14642, 14820, 18164, 15381, 14992, 17349, 16056, 16315, 18959, 18262, 17866, 16283, 18655, 15332, 17295, 16953, 14109, 18476, 17989, 17910, 16564, 14470, 14572, 15906, 17142, 12980, 13591, 17693, 17087, 13876, 13057, 12685, 18387, 18258, 16477, 17152, 14363, 13560, 12317, 12580, 15875, 16183, 12756, 17518, 16440, 14553, 13564, 12664, 11482, 12315, 15483, 11391, 17024, 12878, 14736, 13258, 16466, 13495, 13067, 16646, 13647, 11813, 12277, 14184, 13976, 15796, 16137, 12820, 12760, 13266, 11013, 12484, 16780, 16244, 10594, 11898, 12428, 13261, 15827, 13429, 11284, 12603, 10533, 15228, 12568, 11703, 14759, 11254, 16599, 13792, 16025, 11900, 16016, 10198, 13871, 13511, 11919, 10613, 14419, 13906, 12242, 15830, 11135, 10566, 11614, 15226, 13047, 14247, 14089, 9578, 11934, 11151, 11030, 12609, 12949, 14860, 11882, 15542, 12521, 10498, 13809, 13191, 14628, 12121, 12721, 9235, 9313, 14896, 11005, 13577, 13712, 12533, 13761, 10498, 14776, 10183, 12760, 14553, 11564, 13123, 11943, 13128, 9225, 11963, 11352, 10616, 12690, 12370, 12421, 8991, 12848, 14486, 13240, 11178, 9520, 14449, 11592, 11861, 10587, 10452, 10586, 12921, 9651, 14213, 8482, 8390, 10204, 11912, 13544, 8660, 9864, 7542, 9733, 12175, 9704, 10780, 11941, 11508, 9483, 8979, 9026, 13025, 10665, 10537, 11508, 13233, 7842, 13013, 9151, 11515, 10171, 11951, 11592, 13024, 6756, 12749, 13048, 12784, 8172, 11030, 8298, 12873, 7815, 9069, 7665, 12522, 7448, 11160, 10935, 10684, 12346, 10814, 6764, 11234, 11986, 11105, 7627, 7491, 9016, 10774, 10101, 10242, 12058, 9564, 10308, 8040, 10301, 8201, 5932, 9885, 11621, 10609, 10843, 10935, 10410, 9047, 6811, 5538, 7029, 6415, 8910, 5838, 6681, 10474, 5368, 6279, 8744, 9401, 9260, 11691, 5277, 6073, 7071, 8016, 7511, 9488, 6578, 5862, 6066, 6463, 11114, 5579, 5101, 9218, 9174, 7343, 9180, 5725, 7343, 10817, 7656, 7650, 4568, 5279, 4874, 6927, 6957, 9284, 8127, 9411, 6050, 6545, 7950, 4751, 9715, 7433, 10324, 7605, 9019, 6164, 5136, 8524, 8107, 4069, 6676, 10061, 4358, 5744, 6128, 7656, 7581, 8897, 3981, 7243, 6671, 9159, 10120, 6457, 9020, 5217, 8678, 5679, 9780, 6542, 8180, 6462, 3433, 6773, 7729, 7806, 6292, 8334, 5949, 4589, 8395, 6321, 5830, 5600, 5940, 9540, 4226, 7734, 6983, 6537, 3344, 5986, 6357, 5291, 4184, 5945, 4049, 6656, 6979, 5589, 2852, 8769, 7389, 6429, 2654, 2632, 4668, 3243, 5588, 4718, 4707, 2951, 5352, 8026, 4770, 7878, 5380, 6248, 4999, 6632, 8714, 4507, 5495, 2814, 4373, 3317, 3069, 5592, 7154, 4472, 6181, 5329, 5343, 4728, 7153, 6936, 6920, 2440, 5637, 5139, 6130, 3121, 5993, 4256, 3244, 3005, 6761, 6309, 6517, 7368, 2911, 4484, 4646, 3341, 4094, 7515, 7858, 2743, 7630, 6982, 4219, 6028, 6273, 6780, 5036, 2699, 7524, 6110, 5134, 6037, 6542, 6897, 3974, 4443, 4778, 1687, 4336, 5628, 3304, 7144, 3410, 2194, 2753, 4829, 6996, 5157, 1520, 5811, 3957, 4527, 3383, 6845, 1975, 2721, 3071, 4602, 2092, 6005, 2137, 820, 5822, 4855, 1480, 2540, 6681, 4644, 2041, 801, 2957, 5177, 6558, 5524, 2285, 4845, 4835, 3975, 3047, 4797, 1913, 3891, 1707, 3171, 6087, 2340, 3477, 2102, 1210, 371, 3635, 2852, 6186, 5972, 1980, 5590, 1510, 166, 908, 2308, 2525, 5358, 897, 3597, 2620, 3740, 3562, 5730, 632, 5215, 1310, 1677, 1274, 3992, 1514, 3615, 3065, 729, 300, 5932, 1334, 2243, 2357, 2900, 2940, 5678, 5411, 1055, 539, 883, 4000, 5791, 390, 4060, 2994, 2317, 5633, 3996, 5571, 2384, 2450, 4573, 328, 3515, 2865, 21, 5608, 4089, 2834, 0, 1248, 0, 0, 4317, 1513, 3046, 523, 607, 0, 3903, 5075, 938, 3016, 5042, 2800, 1837, 734, 1427, 2153, 5007, 5053, 2872, 0, 340, 3817, 657, 4313, 2468, 1817, 2712, 351, 2598, 0, 4555, 4724, 3660, 0, 708, 4301, 3522, 1318, 0, 2955, 2762, 157, 0, 3774, 4906, 817, 2689, 3499, 2799, 3001, 0, 2010, 1307, 3074, 0, 4498, 3590, 3813, 2705, 4448, 0, 1123, 581, 1514, 904, 3799, 1006, 1672, 906, 2320, 0, 0, 647, 249, 1395, 612, 0, 2096, 589, 0, 563, 1011, 3252, 1239, 1820, 1061, 0, 854, 1353, 1165, 0, 0, 0, 2191, 303, 0, 3833, 0, 997, 0, 693, 0, 323, 878, 2537, 254, 913, 2541, 2076, 1537, 281, 160, 2282, 0, 0, 0, 451, 0, 0, 3446, 0, 1140, 2194, 3356, 1832, 1764, 238, 0, 0, 2880, 0, 0, 0, 0, 1061, 3517, 0, 1414, 0, 2306, 0, 2033, 3877, 383, 110, 0, 1179, 0, 924, 1917, 1178, 0, 987, 0, 0, 2897, 3074, 1769, 217, 0, 3665, 0, 2216, 776, 0, 0, 2124, 0, 0, 2258, 1512, 1591, 0, 42, 2388, 504, 377, 0, 163, 2343, 1127, 0, 3432, 3070, 0, 0, 3122, 0, 58, 2473, 471, 198, 3096, 364, 3380, 949, 0, 2806, 2559, 2549, 562, 0, 0, 3046, 3147, 932, 2340, 0, 1208, 0, 559, 853, 0, 0, 0, 2156, 0, 0, 2472, 1041, 0, 0, 322, 0, 0, 3225, 1352, 2850, 2548, 0, 0, 0, 2283, 0, 0, 1910, 0, 2940, 3255, 0, 0, 1588, 0, 1034, 0, 0, 1666, 0, 1904, 0, 0, 218, 1207, 3073, 0, 0, 0, 0, 1585, 2976, 627, 2373, 1596, 0, 2182, 0, 0, 0, 2315, 1880, 923, 519, 2818, 0, 1617, 0, 2011, 0, 0, 3236, 1959, 0, 1673, 3074, 0, 0, 0, 0, 0, 2556, 3153, 0, 807, 0, 0, 1611, 0, 0, 0, 0, 330, 1973, 0, 3080, 485, 0, 2256, 0, 0, 597, 1051, 0, 1703, 0, 0, 3210, 483, 0, 0, 0, 2916, 815, 662, 2589, 107, 0, 2509, 0, 2560, 0, 125, 0, 93, 0, 1032, 6, 0, 0, 1223, 524, 2518, 2853, 0, 0, 1467, 0, 2124, 2202, 1601, 878, 0, 0, 2431, 468, 0, 0, 0, 3322, 0, 1749, 0, 0, 2256, 448, 74, 0, 2313, 416, 2847, 2237, 0, 2786, 3226, 0, 0, 0, 3207, 1832, 1570, 0, 0, 1902, 2709, 0, 2174, 0, 0, 1607, 0, 0, 0, 0, 0, 0, 370, 3032, 341, 1501, 0, 1677, 530, 0, 2345, 0, 0, 0, 0, 2898, 0, 0, 1949, 0, 0, 1120, 2438, 0, 3350, 0, 1179, 0, 0, 0, 810, 0, 0, 0, 2225, 2493, 0, 0, 0, 2954, 1215, 737, 1978, 0, 1985, 607, 361, 1538, 1458, 1342, 39, 416, 0, 0, 3732, 0, 2411, 1199, 0, 0, 762, 928, 1923, 0, 519, 2043, 3248, 946, 1555, 163, 0, 2513, 1256, 3942, 0, 2952, 744, 1796, 3129, 1504, 0, 3186, 1436, 1503, 0, 3861, 0, 928, 819, 0, 966, 2817, 0, 0, 3705, 0, 0, 0, 1454, 3009, 0, 0, 0, 1158, 4124, 3201, 0, 0, 170, 1638, 0, 0, 2222, 3412, 2853, 0, 1838, 2183, 0, 4383, 2977, 3902, 0, 3223, 2155, 2264, 0, 2648, 4334, 3472, 2431, 3022, 3341, 3029, 269, 3883, 0, 0, 1482, 4164, 1292, 2261, 3116, 1287, 281, 4624, 3484, 574, 1979, 2838, 5, 4406, 4234, 1166, 3554, 2379, 4227, 0, 390, 1984, 2604, 1370, 0, 0, 579, 0, 0, 0, 139, 4607, 4637, 2653, 421, 1778, 0, 3517, 0, 0, 2839, 2502, 0, 4621, 3364, 0, 3345, 1727, 4292, 1884, 833, 3346, 3447, 3977, 1031, 1519, 3110, 1643, 1860, 5034, 513, 4191, 5307, 2792, 305, 429, 1715, 1015, 3231, 495, 1096, 5035, 3341, 0, 2235, 3153, 4762, 4416, 2562, 2495, 0, 4352, 2787, 2026, 3690, 2415, 1241, 3212, 5358, 506, 2174, 1767, 5849, 3658, 5835, 1730, 15, 1954, 1884, 1825, 2391, 4605, 2971, 6137, 1708, 1229, 0, 2830, 389, 3174, 2072, 3413, 412, 5350, 5021, 3893, 4279, 965, 26, 4422, 1805, 2920, 3041, 1377, 4367, 2375, 4095, 2265, 5239, 356, 805, 1044, 234, 5410, 2016, 1647, 2003, 2212, 3090, 773, 4843, 5285, 5117, 5390, 6122, 5147, 2052, 2957, 2860, 1186, 6019, 1402, 2787, 1153, 6507, 5683, 4813, 1220, 2183, 5161, 4105, 6796, 2957, 1802, 4498, 4686, 3181, 5992, 6432, 2680, 1308, 6132, 6466, 3862, 2904, 1748, 1631, 4615, 2343, 4294, 4868, 5604, 2432, 3857, 2019, 3719, 4970, 7702, 1402, 4386, 4772, 5942, 6517, 7254, 3975, 7025, 2404, 2365, 1895, 5189, 7834, 7623, 2221, 1747, 3673, 6634, 6027, 6090, 7643, 2099, 6566, 7894, 4474, 8211, 4898, 1859, 5032, 7522, 3949, 4233, 2071, 6404, 3450, 7859, 4199, 2192, 4442, 7591, 2583, 2491, 2781, 3827, 7945, 4001, 4968, 5312, 8707, 4028, 7414, 3999, 8536, 2970, 2817, 7437, 2856, 4401, 7190, 4397, 5461, 4405, 6651, 6192, 8048, 2731, 2917, 9163, 5059, 4899, 3073, 4297, 8528, 7456, 8701, 3172, 8759, 7359, 6084, 3728, 7899, 5221, 5703, 5464, 7542, 4563, 8140, 4519, 5249, 3412, 8136, 4710, 9084, 9662, 6991, 7262, 9122, 8422, 5518, 9982, 8184, 9306, 6920, 6709, 3611, 8181, 8497, 9842, 4360, 7066, 8003, 3827, 9890, 6074, 9355, 8464, 4552, 4878, 6557, 10367, 5226, 6342, 7968, 6079, 5887, 10508, 5302, 9277, 9818, 8603, 8094, 7744, 10615, 7658, 10558, 5123, 5324, 5370, 8358, 8624, 7114, 7107, 6223, 6938, 6435, 5519, 10323, 11043, 7285, 10664, 9525, 10043, 7234, 6900, 5527, 8980, 9688, 8052, 8637, 5704, 8973, 7455, 11054, 8513, 7756, 7058, 11437, 6291, 5982, 5552, 10181, 5371, 6453, 6100, 7739, 11483, 11424, 8987, 6845, 7774, 7786, 6380, 7791, 10048, 11104, 11505, 9865, 11786, 10252, 6505, 8084, 8858, 7223, 11921, 10143, 8060, 6435, 9646, 9978, 9664, 12123, 11073, 11051, 9502, 9081, 11862, 8379, 8215, 12598, 9208, 11663, 9630, 12640, 7466, 6593, 10920, 11866, 11869, 9757, 9767, 13303, 12264, 7393, 12020, 10564, 12661, 8571, 7653, 12221, 13397, 10949, 8253, 8619, 13404, 9635, 10332, 8487, 11801, 8965, 12353, 7568, 10043, 9433, 11141, 9661, 13724, 10637, 10963, 12547, 10635, 9318, 8732, 11398, 9550, 13937, 13441, 9023, 12172, 10464, 10840, 8548, 8865, 14076, 13040, 13643, 8434, 11025, 9012, 14762, 9329, 11489, 8849, 13563, 11713, 11964, 11521, 10793, 10728, 9675, 10037, 8969, 15063, 8976, 10476, 9253, 13209, 10713, 15187, 11117, 9787, 10592, 14759, 10338, 9754, 13604, 13409, 10384, 12674, 14033, 9265, 13567, 11723, 14373, 12027, 11821, 11065, 13022, 14771, 15252, 10278, 10692, 12163, 11367, 12930, 13429, 11475, 15273, 13860, 12761, 10996, 13935, 10801, 10640, 11505, 12472, 11746, 13051, 10659, 13478, 15636, 12578, 14955, 14813, 15775, 11611, 12876, 16335, 16555, 15944, 10826, 15627, 11405, 12634, 13624, 13454, 11023, 11256, 13467, 11623, 13130, 11718, 12987, 16448, 13150, 15632, 13582, 16209, 16344, 15397, 12434, 11277, 14475, 12479, 16010, 17116, 14077, 11884, 14383, 14179, 14959, 16599, 16288, 12018, 11723, 13596, 18154, 13315, 15139, 15918, 14488, 14142, 12153, 17871, 17918, 13314, 14317, 17275, 13326, 13994, 17956, 15566, 14740, 13341, 14299, 16842, 16889, 16720, 15001, 16797, 17697, 18147, 13567, 15799, 17861, 17960, 15086, 15975, 16200, 16736, 18314, 13515, 18778, 18765, 17857, 14756, 14769, 18445, 13255, 16118, 17429, 19883, 15172, 19045, 17128, 17272, 17474, 17532, 16098, 15966, 18160, 18793, 14294, 15069, 18618, 20350, 16017, 15391, 18571, 16395, 17048, 18191, 15288, 14601, 19782, 20112, 19685, 20523, 14356, 19530, 18280, 16285, 15203, 19657, 17936, 17678, 18009, 20363, 16106, 16885, 20009, 17178, 19581, 19311, 21009, 16114, 20778, 18335, 15217, 15235, 20153, 15946, 20632, 17221, 18509, 19484, 17975, 21673, 17585, 20083, 22025, 18279, 19609, 19619, 21666, 21518, 17190, 16457, 20061, 16387, 22041, 18856, 19639, 17504, 22076, 18669, 18042, 17712, 22584, 17666, 22549, 17577, 21203, 22354, 17884, 18766, 17081, 22751, 18186, 18710, 19437, 19451, 21597, 21189, 18618, 19646, 17217, 18847, 17170, 18481, 21205, 22303, 22507, 19577, 19030, 20084, 19743, 18069, 18962, 21405, 23519, 23060, 19296, 22975, 18989, 22677, 18276, 18141, 21335, 22377, 24293, 19324, 20096, 23472, 18432, 23985, 18550, 20188, 20954, 23882, 23439, 19648, 23671, 20609, 23076, 21486, 20660, 18588, 24849, 21868, 23932, 19428, 21039, 22831, 21318, 25174, 19701, 22515, 21679, 22225, 22881, 22030, 19420, 22415, 20628, 22909, 24628, 23202, 25391, 23102, 20187, 19743, 23674, 20901, 25505, 22870, 26029, 21886, 22712, 24327, 23188, 21870, 20216, 24026, 22014, 24356, 26132, 21591, 20997, 25994, 20794, 23538, 20573, 24802, 24636, 26204, 21554, 23712, 25501, 24089, 26063, 26278, 26294, 24000, 25583, 22687, 25507, 21903, 25611, 21127, 22550, 24350, 23779, 24489, 22838, 26368, 23879, 25751, 27150, 21956, 24899, 25500, 24482, 23557, 24235, 24386, 22721, 21831, 25181, 21876, 24551, 27790, 22247, 26550, 22623, 22600, 25383, 24000, 23551, 27625, 27068, 26960, 27396, 26975, 24548, 24751, 24974, 23220, 25330, 27832, 22622, 23174, 26156, 26009, 28641, 29229, 26485, 28660, 23994, 27487, 25449, 26675, 23860, 27961, 25346, 27842, 25381, 25043, 26387, 23772, 24006, 26688, 28049, 27887, 27934, 26795, 27153, 23637, 23726, 26080, 25968, 25686, 30263, 26581, 28374, 26963, 26602, 24929, 27361, 24985, 29007, 26881, 29135, 27246, 25491, 27421, 26117, 25128, 30574, 29897, 28592, 30614, 29817, 30855, 30236, 29485, 25852, 30027, 26602, 28076, 31391, 28433, 26912, 29045, 25830, 29974, 27328, 26669, 30092, 30683, 27333, 28902, 26843, 28718, 31657, 26190, 30176, 31491, 31682, 29622, 27550, 31819, 28697, 27488, 25953, 26232, 27631, 27359, 31116, 31106, 28167, 31246, 30307, 26311, 27771, 28782, 27043, 26737, 27506, 31272, 32367, 30594, 28761, 31814, 27415, 27651, 31868, 29574, 33175, 33043, 28391, 32301, 31204, 27239, 32045, 33443, 30416, 28012, 32630, 27510, 31527, 28685, 31266, 31642, 29272, 29602, 28862, 33234, 32798, 33319, 32463, 28928, 28405, 32725, 28152, 29289, 28211, 33718, 32634, 34570, 34734, 31405, 30111, 31008, 32525, 32213, 29268, 32577, 32249, 28817, 29130, 33723, 31666, 28782, 33852, 35242, 33189, 31222, 33923, 33031, 33547, 32015, 29784, 33963, 31929, 31724, 34193, 33341, 32477, 30887, 29973
};

int get_feature_data(size_t offset, size_t length, float *out_ptr) {
    memcpy(out_ptr, features + offset, length * sizeof(float));
    return 0;
}
/* USER CODE END Includes */

/* Private typedef -----------------------------------------------------------*/
/* USER CODE BEGIN PTD */

/* USER CODE END PTD */

/* Private define ------------------------------------------------------------*/
/* USER CODE BEGIN PD */

/* USER CODE END PD */

/* Private macro -------------------------------------------------------------*/
/* USER CODE BEGIN PM */

/* USER CODE END PM */

/* Private variables ---------------------------------------------------------*/

UART_HandleTypeDef huart1;

/* USER CODE BEGIN PV */
uint8_t atributos[18] = {0}; //datos recibidos
char *ptr; //puntero para manipular la cadena de caracteres
int cont = 0; //contador para iterar en el array de features

/* USER CODE END PV */

/* Private function prototypes -----------------------------------------------*/
void SystemClock_Config(void);
static void MX_GPIO_Init(void);
static void MX_USART1_UART_Init(void);
/* USER CODE BEGIN PFP */

void func(bool s); //imprime la se√±al identificada

/* USER CODE END PFP */

/* Private user code ---------------------------------------------------------*/
/* USER CODE BEGIN 0 */
#include <stdarg.h>
#include "edge-impulse-sdk/classifier/ei_run_classifier.h"

void vprint(const char *fmt, va_list argp)
{
    char string[200];
    if(0 < vsprintf(string, fmt, argp)) // build string
    {
        HAL_UART_Transmit(&huart1, (uint8_t*)string, strlen(string), 180); // send message via UART
    }
}

void ei_printf(const char *format, ...) {
    va_list myargs;
    va_start(myargs, format);
    vprint(format, myargs);
    va_end(myargs);
}
/* USER CODE END 0 */

/**
  * @brief  The application entry point.
  * @retval int
  */
int main(void)
{
  /* USER CODE BEGIN 1 */

  /* USER CODE END 1 */

  /* MCU Configuration--------------------------------------------------------*/

  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */
  HAL_Init();

  /* USER CODE BEGIN Init */
  signal_t signal;
  signal.total_length = sizeof(features) / sizeof(features[0]);
  signal.get_data = &get_feature_data;
  /* USER CODE END Init */

  /* Configure the system clock */
  SystemClock_Config();

  /* USER CODE BEGIN SysInit */

  /* USER CODE END SysInit */

  /* Initialize all configured peripherals */
  MX_GPIO_Init();
  MX_USART1_UART_Init();
  /* USER CODE BEGIN 2 */

  /* USER CODE END 2 */

  /* Infinite loop */
  /* USER CODE BEGIN WHILE */
  while (1)
  {
    /* USER CODE END WHILE */

    /* USER CODE BEGIN 3 */
	  ei_impulse_result_t result = { 0 };
	  run_classifier(&signal, &result, false);

	  // print the predictions
	  /*	EI_CLASSIFIER_LABEL_COUNT
	   *  result.classification[ix].value
	   * */
	  if (result.classification[0].value < result.classification[1].value) {
		 //ei_printf("triangulo\r\n");
		 //imprimimos la funcion:
		 func(false);
	  }else{
		//ei_printf("seno\r\n");
		//imprimimos la funcion:
		func(true);
	}

  }
  /* USER CODE END 3 */
}

/**
  * @brief System Clock Configuration
  * @retval None
  */
void SystemClock_Config(void)
{
  RCC_OscInitTypeDef RCC_OscInitStruct = {0};
  RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};

  /** Configure the main internal regulator output voltage
  */
  __HAL_RCC_PWR_CLK_ENABLE();
  __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE2);

  /** Initializes the RCC Oscillators according to the specified parameters
  * in the RCC_OscInitTypeDef structure.
  */
  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSI;
  RCC_OscInitStruct.HSIState = RCC_HSI_ON;
  RCC_OscInitStruct.HSICalibrationValue = RCC_HSICALIBRATION_DEFAULT;
  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSI;
  RCC_OscInitStruct.PLL.PLLM = 10;
  RCC_OscInitStruct.PLL.PLLN = 210;
  RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;
  RCC_OscInitStruct.PLL.PLLQ = 2;
  if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
  {
    Error_Handler();
  }

  /** Initializes the CPU, AHB and APB buses clocks
  */
  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK
                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV4;
  RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV2;

  if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_5) != HAL_OK)
  {
    Error_Handler();
  }
}

/**
  * @brief USART1 Initialization Function
  * @param None
  * @retval None
  */
static void MX_USART1_UART_Init(void)
{

  /* USER CODE BEGIN USART1_Init 0 */

  /* USER CODE END USART1_Init 0 */

  /* USER CODE BEGIN USART1_Init 1 */

  /* USER CODE END USART1_Init 1 */
  huart1.Instance = USART1;
  huart1.Init.BaudRate = 115200;
  huart1.Init.WordLength = UART_WORDLENGTH_8B;
  huart1.Init.StopBits = UART_STOPBITS_1;
  huart1.Init.Parity = UART_PARITY_NONE;
  huart1.Init.Mode = UART_MODE_TX_RX;
  huart1.Init.HwFlowCtl = UART_HWCONTROL_NONE;
  huart1.Init.OverSampling = UART_OVERSAMPLING_16;
  huart1.Init.OneBitSampling = UART_ONE_BIT_SAMPLE_DISABLE;
  huart1.AdvancedInit.AdvFeatureInit = UART_ADVFEATURE_NO_INIT;
  if (HAL_UART_Init(&huart1) != HAL_OK)
  {
    Error_Handler();
  }
  /* USER CODE BEGIN USART1_Init 2 */

  /* USER CODE END USART1_Init 2 */

}

/**
  * @brief GPIO Initialization Function
  * @param None
  * @retval None
  */
static void MX_GPIO_Init(void)
{
  GPIO_InitTypeDef GPIO_InitStruct = {0};
/* USER CODE BEGIN MX_GPIO_Init_1 */
/* USER CODE END MX_GPIO_Init_1 */

  /* GPIO Ports Clock Enable */
  __HAL_RCC_GPIOE_CLK_ENABLE();
  __HAL_RCC_GPIOG_CLK_ENABLE();
  __HAL_RCC_GPIOB_CLK_ENABLE();
  __HAL_RCC_GPIOD_CLK_ENABLE();
  __HAL_RCC_GPIOC_CLK_ENABLE();
  __HAL_RCC_GPIOA_CLK_ENABLE();
  __HAL_RCC_GPIOJ_CLK_ENABLE();
  __HAL_RCC_GPIOI_CLK_ENABLE();
  __HAL_RCC_GPIOK_CLK_ENABLE();
  __HAL_RCC_GPIOF_CLK_ENABLE();
  __HAL_RCC_GPIOH_CLK_ENABLE();

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(OTG_FS_PowerSwitchOn_GPIO_Port, OTG_FS_PowerSwitchOn_Pin, GPIO_PIN_SET);

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(GPIOI, ARDUINO_D7_Pin|ARDUINO_D8_Pin|LCD_DISP_Pin, GPIO_PIN_RESET);

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(LCD_BL_CTRL_GPIO_Port, LCD_BL_CTRL_Pin, GPIO_PIN_RESET);

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(DCMI_PWR_EN_GPIO_Port, DCMI_PWR_EN_Pin, GPIO_PIN_RESET);

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(GPIOG, ARDUINO_D4_Pin|ARDUINO_D2_Pin|EXT_RST_Pin, GPIO_PIN_RESET);

  /*Configure GPIO pin : LCD_B0_Pin */
  GPIO_InitStruct.Pin = LCD_B0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF14_LTDC;
  HAL_GPIO_Init(LCD_B0_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : OTG_HS_OverCurrent_Pin */
  GPIO_InitStruct.Pin = OTG_HS_OverCurrent_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(OTG_HS_OverCurrent_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : QSPI_D2_Pin */
  GPIO_InitStruct.Pin = QSPI_D2_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF9_QUADSPI;
  HAL_GPIO_Init(QSPI_D2_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : RMII_TXD1_Pin RMII_TXD0_Pin RMII_TX_EN_Pin */
  GPIO_InitStruct.Pin = RMII_TXD1_Pin|RMII_TXD0_Pin|RMII_TX_EN_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF11_ETH;
  HAL_GPIO_Init(GPIOG, &GPIO_InitStruct);

  /*Configure GPIO pins : FMC_NBL1_Pin FMC_NBL0_Pin FMC_D5_Pin FMC_D6_Pin
                           FMC_D8_Pin FMC_D11_Pin FMC_D4_Pin FMC_D7_Pin
                           FMC_D9_Pin FMC_D12_Pin FMC_D10_Pin */
  GPIO_InitStruct.Pin = FMC_NBL1_Pin|FMC_NBL0_Pin|FMC_D5_Pin|FMC_D6_Pin
                          |FMC_D8_Pin|FMC_D11_Pin|FMC_D4_Pin|FMC_D7_Pin
                          |FMC_D9_Pin|FMC_D12_Pin|FMC_D10_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_FMC;
  HAL_GPIO_Init(GPIOE, &GPIO_InitStruct);

  /*Configure GPIO pins : ARDUINO_SCL_D15_Pin ARDUINO_SDA_D14_Pin */
  GPIO_InitStruct.Pin = ARDUINO_SCL_D15_Pin|ARDUINO_SDA_D14_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_OD;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF4_I2C1;
  HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);

  /*Configure GPIO pins : ULPI_D7_Pin ULPI_D6_Pin ULPI_D5_Pin ULPI_D3_Pin
                           ULPI_D2_Pin ULPI_D1_Pin ULPI_D4_Pin */
  GPIO_InitStruct.Pin = ULPI_D7_Pin|ULPI_D6_Pin|ULPI_D5_Pin|ULPI_D3_Pin
                          |ULPI_D2_Pin|ULPI_D1_Pin|ULPI_D4_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF10_OTG_HS;
  HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_PWM_D3_Pin */
  GPIO_InitStruct.Pin = ARDUINO_PWM_D3_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF2_TIM3;
  HAL_GPIO_Init(ARDUINO_PWM_D3_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : SPDIF_RX0_Pin */
  GPIO_InitStruct.Pin = SPDIF_RX0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF8_SPDIFRX;
  HAL_GPIO_Init(SPDIF_RX0_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : SDMMC_CK_Pin SDMMC_D3_Pin SDMMC_D2_Pin PC9
                           PC8 */
  GPIO_InitStruct.Pin = SDMMC_CK_Pin|SDMMC_D3_Pin|SDMMC_D2_Pin|GPIO_PIN_9
                          |GPIO_PIN_8;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_SDMMC1;
  HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_PWM_D9_Pin */
  GPIO_InitStruct.Pin = ARDUINO_PWM_D9_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF1_TIM2;
  HAL_GPIO_Init(ARDUINO_PWM_D9_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : DCMI_D6_Pin DCMI_D7_Pin */
  GPIO_InitStruct.Pin = DCMI_D6_Pin|DCMI_D7_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF13_DCMI;
  HAL_GPIO_Init(GPIOE, &GPIO_InitStruct);

  /*Configure GPIO pin : QSPI_NCS_Pin */
  GPIO_InitStruct.Pin = QSPI_NCS_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF10_QUADSPI;
  HAL_GPIO_Init(QSPI_NCS_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : FMC_SDNCAS_Pin FMC_SDCLK_Pin FMC_A11_Pin FMC_A10_Pin
                           FMC_BA1_Pin FMC_BA0_Pin */
  GPIO_InitStruct.Pin = FMC_SDNCAS_Pin|FMC_SDCLK_Pin|FMC_A11_Pin|FMC_A10_Pin
                          |FMC_BA1_Pin|FMC_BA0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_FMC;
  HAL_GPIO_Init(GPIOG, &GPIO_InitStruct);

  /*Configure GPIO pins : LCD_B1_Pin LCD_B2_Pin LCD_B3_Pin LCD_G4_Pin
                           LCD_G1_Pin LCD_G3_Pin LCD_G0_Pin LCD_G2_Pin
                           LCD_R7_Pin LCD_R5_Pin LCD_R6_Pin LCD_R4_Pin
                           LCD_R3_Pin LCD_R1_Pin LCD_R2_Pin */
  GPIO_InitStruct.Pin = LCD_B1_Pin|LCD_B2_Pin|LCD_B3_Pin|LCD_G4_Pin
                          |LCD_G1_Pin|LCD_G3_Pin|LCD_G0_Pin|LCD_G2_Pin
                          |LCD_R7_Pin|LCD_R5_Pin|LCD_R6_Pin|LCD_R4_Pin
                          |LCD_R3_Pin|LCD_R1_Pin|LCD_R2_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF14_LTDC;
  HAL_GPIO_Init(GPIOJ, &GPIO_InitStruct);

  /*Configure GPIO pin : OTG_FS_VBUS_Pin */
  GPIO_InitStruct.Pin = OTG_FS_VBUS_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(OTG_FS_VBUS_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : Audio_INT_Pin */
  GPIO_InitStruct.Pin = Audio_INT_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_EVT_RISING;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(Audio_INT_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : FMC_D2_Pin FMC_D3_Pin FMC_D1_Pin FMC_D15_Pin
                           FMC_D0_Pin FMC_D14_Pin FMC_D13_Pin */
  GPIO_InitStruct.Pin = FMC_D2_Pin|FMC_D3_Pin|FMC_D1_Pin|FMC_D15_Pin
                          |FMC_D0_Pin|FMC_D14_Pin|FMC_D13_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_FMC;
  HAL_GPIO_Init(GPIOD, &GPIO_InitStruct);

  /*Configure GPIO pins : OTG_FS_P_Pin OTG_FS_N_Pin OTG_FS_ID_Pin */
  GPIO_InitStruct.Pin = OTG_FS_P_Pin|OTG_FS_N_Pin|OTG_FS_ID_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF10_OTG_FS;
  HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);

  /*Configure GPIO pins : SAI2_MCLKA_Pin SAI2_SCKA_Pin SAI2_FSA_Pin SAI2_SDA_Pin */
  GPIO_InitStruct.Pin = SAI2_MCLKA_Pin|SAI2_SCKA_Pin|SAI2_FSA_Pin|SAI2_SDA_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF10_SAI2;
  HAL_GPIO_Init(GPIOI, &GPIO_InitStruct);

  /*Configure GPIO pins : LCD_DE_Pin LCD_B7_Pin LCD_B6_Pin LCD_B5_Pin
                           LCD_G6_Pin LCD_G7_Pin LCD_G5_Pin */
  GPIO_InitStruct.Pin = LCD_DE_Pin|LCD_B7_Pin|LCD_B6_Pin|LCD_B5_Pin
                          |LCD_G6_Pin|LCD_G7_Pin|LCD_G5_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF14_LTDC;
  HAL_GPIO_Init(GPIOK, &GPIO_InitStruct);

  /*Configure GPIO pin : LCD_B4_Pin */
  GPIO_InitStruct.Pin = LCD_B4_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF9_LTDC;
  HAL_GPIO_Init(LCD_B4_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : SAI2_SDB_Pin */
  GPIO_InitStruct.Pin = SAI2_SDB_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF10_SAI2;
  HAL_GPIO_Init(SAI2_SDB_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : OTG_FS_PowerSwitchOn_Pin */
  GPIO_InitStruct.Pin = OTG_FS_PowerSwitchOn_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(OTG_FS_PowerSwitchOn_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : DCMI_D5_Pin */
  GPIO_InitStruct.Pin = DCMI_D5_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF13_DCMI;
  HAL_GPIO_Init(DCMI_D5_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : ARDUINO_D7_Pin ARDUINO_D8_Pin LCD_DISP_Pin */
  GPIO_InitStruct.Pin = ARDUINO_D7_Pin|ARDUINO_D8_Pin|LCD_DISP_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(GPIOI, &GPIO_InitStruct);

  /*Configure GPIO pin : uSD_Detect_Pin */
  GPIO_InitStruct.Pin = uSD_Detect_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(uSD_Detect_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : FMC_A0_Pin FMC_A1_Pin FMC_A2_Pin FMC_A3_Pin
                           FMC_A4_Pin FMC_A5_Pin FMC_A6_Pin FMC_A9_Pin
                           FMC_A7_Pin FMC_A8_Pin FMC_SDNRAS_Pin */
  GPIO_InitStruct.Pin = FMC_A0_Pin|FMC_A1_Pin|FMC_A2_Pin|FMC_A3_Pin
                          |FMC_A4_Pin|FMC_A5_Pin|FMC_A6_Pin|FMC_A9_Pin
                          |FMC_A7_Pin|FMC_A8_Pin|FMC_SDNRAS_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_FMC;
  HAL_GPIO_Init(GPIOF, &GPIO_InitStruct);

  /*Configure GPIO pins : LCD_HSYNC_Pin LCD_VSYNC_Pin LCD_R0_Pin LCD_CLK_Pin */
  GPIO_InitStruct.Pin = LCD_HSYNC_Pin|LCD_VSYNC_Pin|LCD_R0_Pin|LCD_CLK_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF14_LTDC;
  HAL_GPIO_Init(GPIOI, &GPIO_InitStruct);

  /*Configure GPIO pin : LCD_BL_CTRL_Pin */
  GPIO_InitStruct.Pin = LCD_BL_CTRL_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(LCD_BL_CTRL_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : DCMI_VSYNC_Pin */
  GPIO_InitStruct.Pin = DCMI_VSYNC_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF13_DCMI;
  HAL_GPIO_Init(DCMI_VSYNC_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : OTG_FS_OverCurrent_Pin */
  GPIO_InitStruct.Pin = OTG_FS_OverCurrent_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(OTG_FS_OverCurrent_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : SDMMC_D0_Pin */
  GPIO_InitStruct.Pin = SDMMC_D0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_SDMMC1;
  HAL_GPIO_Init(SDMMC_D0_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : TP3_Pin NC2_Pin */
  GPIO_InitStruct.Pin = TP3_Pin|NC2_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(GPIOH, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_SCK_D13_Pin */
  GPIO_InitStruct.Pin = ARDUINO_SCK_D13_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF5_SPI2;
  HAL_GPIO_Init(ARDUINO_SCK_D13_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : DCMI_PWR_EN_Pin */
  GPIO_InitStruct.Pin = DCMI_PWR_EN_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(DCMI_PWR_EN_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : DCMI_D4_Pin DCMI_D3_Pin DCMI_D0_Pin DCMI_D2_Pin
                           DCMI_D1_Pin */
  GPIO_InitStruct.Pin = DCMI_D4_Pin|DCMI_D3_Pin|DCMI_D0_Pin|DCMI_D2_Pin
                          |DCMI_D1_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF13_DCMI;
  HAL_GPIO_Init(GPIOH, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_PWM_CS_D5_Pin */
  GPIO_InitStruct.Pin = ARDUINO_PWM_CS_D5_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF2_TIM5;
  HAL_GPIO_Init(ARDUINO_PWM_CS_D5_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_PWM_D10_Pin */
  GPIO_InitStruct.Pin = ARDUINO_PWM_D10_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF1_TIM1;
  HAL_GPIO_Init(ARDUINO_PWM_D10_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : LCD_INT_Pin */
  GPIO_InitStruct.Pin = LCD_INT_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_EVT_RISING;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(LCD_INT_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : ARDUINO_RX_D0_Pin ARDUINO_TX_D1_Pin */
  GPIO_InitStruct.Pin = ARDUINO_RX_D0_Pin|ARDUINO_TX_D1_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF8_USART6;
  HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);

  /*Configure GPIO pin : ULPI_NXT_Pin */
  GPIO_InitStruct.Pin = ULPI_NXT_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF10_OTG_HS;
  HAL_GPIO_Init(ULPI_NXT_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : FMC_SDNME_Pin FMC_SDNE0_Pin */
  GPIO_InitStruct.Pin = FMC_SDNME_Pin|FMC_SDNE0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_FMC;
  HAL_GPIO_Init(GPIOH, &GPIO_InitStruct);

  /*Configure GPIO pins : ARDUINO_D4_Pin ARDUINO_D2_Pin EXT_RST_Pin */
  GPIO_InitStruct.Pin = ARDUINO_D4_Pin|ARDUINO_D2_Pin|EXT_RST_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(GPIOG, &GPIO_InitStruct);

  /*Configure GPIO pins : ARDUINO_A4_Pin ARDUINO_A5_Pin ARDUINO_A1_Pin ARDUINO_A2_Pin
                           ARDUINO_A3_Pin */
  GPIO_InitStruct.Pin = ARDUINO_A4_Pin|ARDUINO_A5_Pin|ARDUINO_A1_Pin|ARDUINO_A2_Pin
                          |ARDUINO_A3_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_ANALOG;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(GPIOF, &GPIO_InitStruct);

  /*Configure GPIO pin : FMC_SDCKE0_Pin */
  GPIO_InitStruct.Pin = FMC_SDCKE0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_FMC;
  HAL_GPIO_Init(FMC_SDCKE0_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : ULPI_STP_Pin ULPI_DIR_Pin */
  GPIO_InitStruct.Pin = ULPI_STP_Pin|ULPI_DIR_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF10_OTG_HS;
  HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);

  /*Configure GPIO pins : RMII_MDC_Pin RMII_RXD0_Pin RMII_RXD1_Pin */
  GPIO_InitStruct.Pin = RMII_MDC_Pin|RMII_RXD0_Pin|RMII_RXD1_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF11_ETH;
  HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);

  /*Configure GPIO pin : PB2 */
  GPIO_InitStruct.Pin = GPIO_PIN_2;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF9_QUADSPI;
  HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);

  /*Configure GPIO pins : QSPI_D1_Pin QSPI_D3_Pin QSPI_D0_Pin */
  GPIO_InitStruct.Pin = QSPI_D1_Pin|QSPI_D3_Pin|QSPI_D0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF9_QUADSPI;
  HAL_GPIO_Init(GPIOD, &GPIO_InitStruct);

  /*Configure GPIO pin : RMII_RXER_Pin */
  GPIO_InitStruct.Pin = RMII_RXER_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(RMII_RXER_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : RMII_REF_CLK_Pin RMII_MDIO_Pin RMII_CRS_DV_Pin */
  GPIO_InitStruct.Pin = RMII_REF_CLK_Pin|RMII_MDIO_Pin|RMII_CRS_DV_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF11_ETH;
  HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_A0_Pin */
  GPIO_InitStruct.Pin = ARDUINO_A0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_ANALOG;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(ARDUINO_A0_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : DCMI_HSYNC_Pin PA6 */
  GPIO_InitStruct.Pin = DCMI_HSYNC_Pin|GPIO_PIN_6;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF13_DCMI;
  HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);

  /*Configure GPIO pins : LCD_SCL_Pin LCD_SDA_Pin */
  GPIO_InitStruct.Pin = LCD_SCL_Pin|LCD_SDA_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_OD;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF4_I2C3;
  HAL_GPIO_Init(GPIOH, &GPIO_InitStruct);

  /*Configure GPIO pins : ULPI_CLK_Pin ULPI_D0_Pin */
  GPIO_InitStruct.Pin = ULPI_CLK_Pin|ULPI_D0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF10_OTG_HS;
  HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_PWM_D6_Pin */
  GPIO_InitStruct.Pin = ARDUINO_PWM_D6_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF9_TIM12;
  HAL_GPIO_Init(ARDUINO_PWM_D6_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : ARDUINO_MISO_D12_Pin ARDUINO_MOSI_PWM_D11_Pin */
  GPIO_InitStruct.Pin = ARDUINO_MISO_D12_Pin|ARDUINO_MOSI_PWM_D11_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF5_SPI2;
  HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);

/* USER CODE BEGIN MX_GPIO_Init_2 */
/* USER CODE END MX_GPIO_Init_2 */
}

/* USER CODE BEGIN 4 */
void func(bool s){

	char msg[5];//buffer de salida

	//Se√±al triangular
	if (s == true) {

		int sample;
		float t = 0;
		float y; // resultado

		for (sample = 0; sample < 50; ++sample){ //1000 muestras

			y = 255.0*t;

			sprintf(msg,"%d\n\r",(uint16_t)y);
			HAL_UART_Transmit(&huart1,(uint8_t *)msg,strlen(msg),100);
			HAL_Delay(10);

			t += 0.01;//avanzamos en el tiempo
		}

		for (sample = 0; sample < 50; ++sample){ //1000 muestras
			y = 255.0*t;

			sprintf(msg,"%d\n\r",(uint16_t)y);
			HAL_UART_Transmit(&huart1,(uint8_t *)msg,strlen(msg),100);
			HAL_Delay(10);

			t -= 0.01;//avanzamos en el tiempo
		}

	}else{
		//senoidal
		float w = 2*3.1416; //velocidad angular
		float f = 1; //fecuecnia hz
		float y; // resultado
		float a = 127.5; //amplitud

		int sample;
		float t = 0;
		for (sample = 0; sample < 100; ++sample){ //1000 muestras

			y = a*sin(w*t*f) + 127.5;

			sprintf(msg,"%d\n\r",(uint16_t)y);
			HAL_UART_Transmit(&huart1,(uint8_t *)msg,strlen(msg),100);
			HAL_Delay(10);

			t += 0.01;//avanzamos en el tiempo
		}
	}

}

/* USER CODE END 4 */

/**
  * @brief  This function is executed in case of error occurrence.
  * @retval None
  */
void Error_Handler(void)
{
  /* USER CODE BEGIN Error_Handler_Debug */
  /* User can add his own implementation to report the HAL error return state */
  __disable_irq();
  while (1)
  {
  }
  /* USER CODE END Error_Handler_Debug */
}

#ifdef  USE_FULL_ASSERT
/**
  * @brief  Reports the name of the source file and the source line number
  *         where the assert_param error has occurred.
  * @param  file: pointer to the source file name
  * @param  line: assert_param error line source number
  * @retval None
  */
void assert_failed(uint8_t *file, uint32_t line)
{
  /* USER CODE BEGIN 6 */
  /* User can add his own implementation to report the file name and line number,
     ex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */
  /* USER CODE END 6 */
}
#endif /* USE_FULL_ASSERT */
