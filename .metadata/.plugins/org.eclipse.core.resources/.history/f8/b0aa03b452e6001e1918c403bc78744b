/* USER CODE BEGIN Header */
/**
  ******************************************************************************
  * @file           : main.c
  * @brief          : Main program body
  ******************************************************************************
  * @attention
  *
  * Copyright (c) 2024 STMicroelectronics.
  * All rights reserved.
  *
  * This software is licensed under terms that can be found in the LICENSE file
  * in the root directory of this software component.
  * If no LICENSE file comes with this software, it is provided AS-IS.
  *
  ******************************************************************************
  */
/* USER CODE END Header */
/* Includes ------------------------------------------------------------------*/
#include "main.h"

/* Private includes ----------------------------------------------------------*/
/* USER CODE BEGIN Includes */
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>
#include <math.h>

#include "edge-impulse-sdk/classifier/ei_run_classifier.h"

using namespace ei;

// paste the raw features here
static float features[] = {
		32763, 32083, 32268, 33179, 32229, 32716, 32340, 33720, 36797, 35670, 33208, 35695, 33967, 38763, 35798, 35792, 35134, 40245, 36943, 38278, 39444, 35838, 40996, 40240, 35962, 42095, 41381, 39468, 40578, 43343, 41816, 38197, 39047, 42446, 39254, 40133, 42614, 42592, 40529, 41110, 45528, 40862, 46251, 44688, 42269, 46987, 43290, 43266, 42655, 45150, 42594, 48518, 45250, 45617, 49691, 47625, 47717, 47024, 47908, 49773, 50563, 49415, 45407, 49365, 46307, 50083, 48727, 49211, 48298, 47492, 49861, 50579, 54020, 49429, 50262, 50533, 52239, 52184, 54293, 55019, 53654, 51002, 53769, 50110, 54767, 53591, 52274, 52691, 52739, 53807, 57654, 56612, 55705, 53388, 52153, 58055, 53669, 54948, 56732, 54366, 55755, 55782, 57431, 57318, 55529, 55464, 56151, 56719, 60361, 60676, 59848, 59374, 58595, 60453, 57727, 57962, 57190, 58682, 61805, 60803, 57861, 60348, 56974, 61662, 62975, 59320, 60470, 62189, 62777, 63571, 64045, 58947, 60988, 59275, 63170, 60539, 64911, 64681, 58994, 64967, 63003, 60025, 64310, 65535, 63912, 65535, 64627, 65535, 64332, 62675, 63923, 61895, 62290, 62861, 64669, 62528, 65535, 65535, 62870, 62582, 65256, 64748, 63615, 65535, 65535, 63618, 64030, 64576, 61913, 65535, 65535, 65535, 63653, 65535, 65535, 62308, 65535, 62781, 65535, 64389, 63904, 63644, 65535, 65535, 65535, 65487, 63247, 63504, 65535, 64354, 65535, 65535, 65535, 64992, 62923, 65535, 65535, 64119, 65006, 63235, 62337, 65535, 65284, 62565, 64468, 65535, 65535, 65535, 65535, 63453, 63667, 65535, 65535, 64585, 65535, 65535, 65535, 65535, 64009, 65535, 65535, 62511, 65335, 65112, 65535, 63270, 65535, 65535, 65535, 63323, 65535, 64145, 64281, 64291, 65535, 64972, 60769, 62029, 60724, 65535, 63468, 64690, 64123, 64482, 60808, 65535, 64367, 62470, 63437, 63203, 62620, 60076, 61467, 64264, 58654, 59944, 62094, 58455, 64330, 61185, 58751, 64032, 63280, 59933, 57943, 58318, 57386, 57671, 62833, 57409, 56860, 56169, 60393, 57513, 59506, 58964, 59512, 58239, 57880, 59162, 60535, 56925, 59140, 55286, 60169, 59992, 58009, 54749, 57886, 57318, 55067, 56205, 53277, 58460, 53722, 56829, 58064, 52601, 55197, 56859, 52692, 53449, 56895, 54278, 55459, 50399, 55137, 52997, 54509, 51713, 54981, 53004, 51238, 53538, 52317, 47777, 52204, 51482, 47219, 47291, 51177, 46596, 50886, 49391, 51132, 48656, 48918, 47763, 44838, 50900, 47605, 50168, 46277, 45863, 46057, 48133, 46217, 48112, 43031, 45478, 43408, 46002, 41830, 44037, 43288, 43531, 41099, 42146, 44664, 41345, 44149, 42524, 40044, 44436, 41696, 43474, 43438, 38094, 41345, 41072, 37022, 39156, 40988, 38249, 39866, 38069, 40127, 35152, 40194, 35972, 35755, 34624, 36158, 36024, 38771, 39031, 37014, 34749, 32143, 33018, 36409, 33778, 36606, 31261, 32194, 32371, 31938, 33802, 33416, 32245, 29554, 33963, 34179, 29322, 33533, 32269, 31742, 30697, 30391, 27138, 32625, 27439, 26604, 27104, 28998, 25967, 26983, 26576, 26051, 25365, 25135, 25363, 28355, 24384, 23991, 22446, 24923, 28094, 24859, 25607, 25271, 23201, 21897, 23826, 22945, 25408, 24670, 25012, 23743, 20282, 22904, 18723, 18348, 23189, 19960, 18730, 18637, 21864, 19543, 22442, 20393, 17789, 16666, 20873, 15965, 20465, 16143, 16642, 18576, 19980, 16532, 15322, 19450, 18018, 15914, 15322, 17403, 13369, 13742, 12505, 15754, 13011, 15682, 16277, 14063, 15231, 16058, 14070, 11945, 13259, 13531, 14639, 10191, 13266, 11019, 11321, 11918, 8910, 11285, 11448, 12386, 7140, 9410, 11200, 12711, 6508, 8343, 10506, 11119, 9556, 11163, 9792, 10964, 10658, 6633, 4881, 9784, 10356, 8268, 8924, 10026, 7827, 7790, 5887, 5792, 5124, 2895, 6171, 2657, 4066, 2438, 7949, 2864, 5219, 1670, 5824, 4355, 6567, 3036, 1313, 4518, 4604, 6637, 2389, 5777, 1613, 433, 1621, 625, 3493, 4221, 5368, 2211, 3444, 3526, 4768, 0, 5376, 3609, 0, 3122, 1485, 285, 2919, 4706, 3484, 3035, 1596, 264, 1859, 0, 1334, 1535, 2379, 0, 0, 1229, 0, 3792, 0, 0, 62, 1703, 1977, 3481, 3131, 0, 1668, 0, 0, 0, 0, 2604, 862, 0, 3071, 2242, 1681, 836, 2235, 501, 0, 1782, 0, 2746, 0, 0, 0, 822, 0, 0, 0, 602, 0, 0, 2551, 0, 0, 436, 1428, 2940, 0, 2367, 0, 0, 0, 0, 1490, 383, 0, 3467, 4088, 3199, 3519, 4169, 0, 266, 0, 85, 4390, 0, 3096, 4968, 3214, 4302, 0, 4524, 1257, 3502, 4295, 1908, 2868, 3868, 1689, 5065, 1337, 5091, 5652, 2398, 5983, 5837, 4840, 3443, 3841, 2835, 3438, 1553, 1777, 7260, 2271, 5806, 3179, 2985, 7861, 2365, 7900, 2667, 5991, 6952, 6195, 3260, 6120, 7817, 6252, 6269, 7653, 6046, 9636, 6139, 8246, 8460, 6941, 7915, 11267, 5773, 7221, 9269, 9388, 10352, 11901, 7399, 8524, 9352, 7246, 8493, 11410, 7777, 14293, 11664, 9364, 13124, 11898, 13839, 9239, 13802, 14108, 13974, 12024, 14848, 14332, 15002, 14396, 15071, 15303, 17933, 15551, 18426, 16796, 17765, 12840, 15594, 16752, 18445, 15602, 18547, 16015, 15385, 20048, 16835, 19026, 19965, 21893, 18867, 20293, 19356, 17062, 19308, 21199, 19592, 22417, 20665, 21544, 23325, 23186, 24786, 19250, 19290, 22361, 22807, 24510, 26081, 24156, 22801, 22754, 25911, 26894, 25095, 23256, 26254, 23935, 27492, 26356, 25092, 24348, 26846, 26235, 29034, 27865, 29504, 25639, 28083, 30521, 28237, 30808, 27990, 31895, 32799, 28382, 33383, 30722, 34430, 33766, 34781, 32644, 32932, 31728, 36008, 30756, 35655, 33365, 33378, 34815, 33193, 32859, 32761, 37289, 33371, 34608, 35757, 36049, 38696, 38415, 38886, 38515, 38626, 40872, 38300, 35313, 35900, 40782, 40156, 39718, 41647, 43152, 38732, 41125, 40822, 38170, 40201, 44494, 44728, 44971, 42945, 42744, 39703, 43619, 41557, 46648, 43366, 41498, 47023, 41576, 46348, 44547, 46295, 48737, 45314, 43407, 47470, 47588, 45461, 48889, 47704, 48887, 47492, 48960, 46456, 50444, 45957, 49003, 50764, 52057, 51294, 46803, 51637, 48562, 52787, 53869, 52610, 48784, 52004, 51484, 49611, 54064, 54894, 50834, 53675, 52114, 55523, 54507, 54539, 51932, 55705, 55986, 56694, 53496, 54808, 57316, 55533, 55800, 55894, 56931, 58613, 56129, 56359, 55544, 59125, 59787, 54983, 56666, 54426, 58780, 58349, 54578, 57705, 59131, 59066, 60916, 60030, 59116, 57601, 60006, 59800, 61718, 61146, 58332, 57810, 62252, 56940, 62898, 62164, 60726, 63313, 62414, 60012, 59266, 61413, 60765, 58821, 62035, 58735, 63666, 62744, 63624, 63381, 59605, 61692, 63920, 59419, 61863, 61408, 60146, 61784, 65535, 63829, 64695, 63443, 65535, 63653, 63237, 61901, 63695, 61380, 62872, 61294, 62208, 64287, 65535, 64565, 62422, 65255, 65535, 63295, 65535, 62715, 65259, 65496, 65535, 62735, 63024, 65423, 63654, 63959, 62117, 65535, 65535, 65535, 62680, 63081, 65535, 64583, 65535, 64913, 65368, 65535, 63393, 65535, 65535, 64776, 63599, 62337, 63080, 65535, 65535, 63047, 64709, 65535, 62779, 63784, 65535, 64676, 65535, 64904, 65535, 65535, 63571, 65535, 64095, 65293, 65535, 65535, 65273, 61953, 62941, 62834, 64437, 65535, 65535, 63233, 65535, 65535, 61823, 63082, 65535, 65535, 63047, 62038, 62093, 63986, 62522, 64295, 60822, 65535, 61255, 62127, 65475, 64738, 65074, 64918, 62144, 61354, 64543, 64945, 60402, 62444, 61866, 62330, 59312, 61135, 61195, 62684, 60363, 58619, 61854, 57934, 57915, 57987, 59092, 58991, 62438, 58006, 61860, 57683, 57159, 58066, 57968, 62622, 57692, 55935, 58667, 59318, 60448, 58822, 55619, 56149, 57191, 57876, 56908, 56759, 57226, 59620, 54337, 58602, 59379, 58712, 59070, 54861, 53271, 56099, 55408, 54356, 54277, 53326, 58003, 52462, 51783, 56026, 56029, 51896, 54253, 50550, 54616, 51580, 54327, 50046, 50102, 53895, 52385, 52563, 53719, 50908, 50755, 51230, 51617, 48123, 52317, 47117, 49473, 52622, 47340, 50915, 46804, 50547, 48000, 51093, 46634, 48390, 46485, 44765, 49702, 44302, 47338, 44895, 46205, 42438, 45395, 44182, 46417, 42063, 43332, 41956, 45985, 43083, 43926, 41782, 43636, 41266, 45476, 42062, 39807, 40609, 41870, 40223, 43959, 38981, 37560, 37651, 37458, 40731, 41147, 40691, 39240, 39410, 35932, 39867, 36982, 35940, 38433, 39391, 35425, 36323, 34004, 32827, 37812, 35736, 33842, 35203, 31855, 33221, 37174, 35738, 33706, 34406, 34752, 35831, 33450, 31189, 34270, 28427, 33993, 28400, 28153, 28028, 31779, 30701, 28952, 29051, 31721, 28197, 25702, 27163, 27848, 24889, 28835, 30200, 29918, 27768, 27639, 29066, 28945, 28179, 25048, 22493, 25500, 27356, 21402, 26456, 24954, 22550, 23073, 23200, 20076, 21332, 22653, 19922, 22928, 23391, 24782, 18571, 20667, 22027, 23096, 21191, 21394, 17511, 21235, 20179, 19347, 16493, 15668, 20877, 18521, 17837, 17824, 17211, 15169, 16283, 15874, 16195, 14585, 17988, 15079, 18562, 14775, 17928, 15038, 14588, 11334, 14964, 14942, 14766, 11589, 15183, 11368, 15493, 10214, 12542, 11430, 15330, 12701, 14093, 10551, 12670, 9011, 10382, 12254, 9437, 9913, 12829, 11624, 8104, 7673, 10212, 6302, 11507, 10559, 5487, 5998, 10590, 6669, 5295, 10085, 7683, 7867, 7197, 9134, 6483, 6427, 5058, 4767, 4014, 7663, 6203, 8091, 6679, 3950, 2823, 2333, 2113, 7102, 2391, 2672, 6067, 3107, 4201, 5149, 5716, 3775, 2700, 6536, 3375, 6218, 3666, 2036, 2195, 1368, 5928, 5872, 3667, 1279, 969, 4952, 5126, 4818, 1227, 2682, 0, 1197, 1092, 0, 0, 3197, 607, 4510, 3449, 0, 3358, 0, 1080, 0, 488, 206, 0, 1857, 748, 1661, 0, 3513, 0, 2804, 487, 1692, 0, 0, 0, 2969, 0, 0, 0, 0, 2248, 240, 1909, 0, 3169, 0, 878, 1094, 1889, 0, 17, 0, 0, 3233, 0, 1519, 1663, 0, 1865, 379, 79, 666, 0, 0, 0, 1313, 2662, 3110, 3045, 1474, 1803, 1316, 2567, 0, 0, 2208, 0, 0, 984, 2350, 3501, 2679, 0, 3788, 718, 956, 1610, 0, 0, 2354, 4728, 0, 2917, 2942, 1262, 4126, 323, 2372, 3036, 5077, 1349, 2726, 5177, 5861, 3900, 752, 1786, 2875, 3614, 3215, 2181, 7424, 3764, 5563, 2179, 5190, 3061, 2130, 2252, 4441, 5951, 7573, 7508, 8426, 5363, 6250, 4618, 7594, 9796, 9906, 3851, 5566, 4690, 7693, 9878, 11022, 9495, 6652, 10382, 10911, 5973, 9450, 5901, 6619, 7135, 8352, 12918, 9663, 8065, 13317, 11757, 10685, 11120, 9728, 9628, 13169, 13450, 11058, 12288, 12115, 13383, 14129, 12387, 16227, 12114, 16072, 14133, 16257, 17037, 15764, 12861, 14793, 14059, 18148, 12604, 16384, 19011, 14385, 17122, 18852, 15917, 17224, 17925, 14792, 20706, 17133, 19056, 20073, 21721, 22000, 17951, 19628, 17347, 23440, 23258, 23791, 18967, 22572, 22397, 20637, 19469, 20632, 20626, 23176, 21693, 25434, 24318, 23809, 26368, 23388, 22758, 23244, 22819, 27105, 27251, 27689, 28450, 24923, 29213, 23556, 26025, 27988, 27807, 28213, 25000, 26084, 26804, 27966, 28746, 27523, 28305, 30256, 29203, 33469, 30461, 30011, 32458, 29174, 34499, 31928, 32918, 32979, 35948, 31383, 30972, 36362, 34068, 36686, 36569, 35540, 33279, 38486, 33418, 37908, 33547, 33556, 35289, 39435, 39017, 39226, 37795, 39475, 38332, 35464, 37318, 40588, 37523, 40428, 42406, 41738, 41116, 38462, 37520, 43370, 42335, 41418, 39363, 41673, 43401, 43850, 43563, 45481, 40932, 43960, 44408, 45026, 43106, 43156, 42343, 43956, 44958, 47909, 45190, 43189, 43555, 48768, 49645, 50072, 48139, 48046, 47769, 47607, 49968, 45494, 49760, 49042, 51796, 52513, 48987, 46745, 48485, 50519, 47723, 49841, 53135, 52180, 49935, 48389, 48940, 51325, 49532, 53903, 53057, 50141, 53694, 52150, 55452, 54522, 51452, 51392, 52275, 52903, 52584, 55631, 56264, 54669, 53000, 58298, 53850, 53450, 56589, 54065, 56259, 58175, 55521, 59937, 57352, 60099, 58588, 55745, 55249, 60368, 57956, 61541, 61832, 59528, 59827, 61677, 58120, 60101, 60976, 56763, 56631, 60691, 58861, 59056, 62485, 63305, 58654, 59626, 64058, 62151, 63200, 63593, 62720, 59625, 60072, 63646, 61559, 65054, 59970, 62597, 65374, 61305, 64744, 64842, 65535, 61544, 63643, 65490, 64792, 61393, 60421, 63831, 62088, 63636, 64458, 65535, 62472, 65535, 65535, 64354, 65535, 65535, 61912, 61712, 65535, 62222, 63439, 64946, 65535, 65535, 65535, 62271, 65535, 65535, 64108, 63671, 64588, 65535, 65352, 62929, 63628, 65391, 65086, 63621, 63621, 65163, 64963, 65535, 62382, 64311, 65078, 63468, 64875, 62585, 65535, 65535, 62493, 65136, 65535, 65440, 65117, 65535, 65535, 65535, 64607, 62375, 64800, 65535, 64383, 65535, 64878, 65218, 65535, 64341, 65215, 65535, 65535, 61713, 65368, 65535, 65535, 62582, 63419, 63050, 65535, 63069, 65535, 65535, 64251, 65535, 64375, 61703, 64990, 61664, 62081, 62284, 64466, 63251, 62008, 64786, 65476, 62540, 65535, 65416, 63890, 63534, 63537, 61169, 60006, 62711, 64659, 61097, 60239, 63293, 59417, 58638, 58952, 60703, 62911, 61112, 57736, 58113, 63722, 58508, 61435, 62608, 61267, 58610, 61133, 62013, 61210, 60919, 58142, 56822, 58424, 56516, 56777, 57095, 56038, 56301, 58438, 59430, 59021, 55301, 56842, 57687, 56206, 53922, 57220, 57648, 53502, 55493, 58282, 57085, 56181, 58370, 54372, 54858, 56248, 54311, 54452, 51356, 52130, 56600, 52816, 54178, 51567, 55790, 51093, 50250, 51665, 52148, 51887, 50828, 51752, 54212, 53828, 52465, 47082, 50271, 53068, 52174, 47143, 46558, 46985, 48962, 50635, 48557, 50508, 46427, 50525, 47296, 46821, 46524, 45603, 43646, 43667, 47838, 47557, 47978, 43575, 45845, 43554, 43425, 42652, 40628, 40888, 43120, 42084, 44059, 44728, 40886, 42258, 44204, 42438, 40860, 44229, 42358, 38174, 39595, 42033, 41792, 38082, 41809, 37352, 37670, 41632, 39792, 40032, 40794, 35631, 39019, 35730, 37907, 37392, 33289, 35725, 33645, 33872, 38291, 34190, 37723, 34979, 37268, 32248, 30759, 30374, 32498, 35855, 33946, 30377, 30704, 28702, 29439, 30997, 27641, 33487, 32596, 32766, 32143, 31473, 28481, 32127, 26409, 27869, 28482, 30270, 29040, 27368, 25050, 25609, 23652, 28158, 27216, 26967, 27735, 26992, 28276, 23735, 27097, 26189, 23779, 23169, 21125, 23611, 23703, 23735, 20668, 19699, 19132, 23695, 21068, 20297, 21464, 22736, 17741, 19362, 22267, 18300, 18889, 20105, 15990, 19581, 18158, 16852, 18088, 16451, 18740, 17935, 19674, 17302, 15998, 18656, 19083, 14097, 17976, 16718, 16242, 15703, 13456, 14868, 11224, 11113, 14842, 11862, 10370, 11536, 14855, 13444, 14656, 11086, 9704, 9553, 9698, 9459, 9441, 13231, 12640, 12877, 8425, 10937, 13385, 12711, 11018, 11574, 6790, 10635, 9254, 9102, 10292, 10537, 10829, 10521, 9924, 5482, 4904, 10108, 10049, 9483, 8141, 6923, 7505, 8375, 8767, 5129, 3556, 6544, 6602, 8283, 7130, 5193, 7968, 5324, 5114, 2163, 4168, 5972, 1949, 7123, 3461, 2496, 3867, 2998, 5579, 4005, 5762, 3296, 4517, 3554, 3540, 45, 0, 4260, 0, 2167, 1392, 1513, 3381, 0, 0, 1866, 4954, 0, 2190, 394, 3194, 0, 1229, 4406, 1752, 449, 227, 0, 858, 1034, 0, 2381, 1096, 0, 0, 1678, 1299, 15, 0, 498, 3453, 97, 0, 0, 0, 0, 0, 2825, 0, 1140, 0, 1883, 0, 2409, 0, 923, 1551, 601, 0, 1134, 163, 3246, 9, 0, 0, 1587, 0, 2855, 0, 242, 2530, 0, 0, 0, 0, 0, 2013, 1944, 2508, 0, 48, 2631, 1513, 648, 847, 1083, 416, 3855, 1006, 3328, 0, 3102, 3551, 1528, 0, 1492, 4345, 881, 2657, 0, 0, 0, 4753, 361, 2298, 0, 1709, 1181, 3977, 3549, 628, 1819, 659, 2701, 1162, 1410, 6856, 3787, 4270, 7144, 5195, 5505, 5028, 2693, 5674, 5632, 5715, 4334, 6228, 3666, 2826, 6045, 5277, 5598, 4915, 7449, 8969, 3759, 9797, 7755, 4140, 8696, 7427, 10759, 4708, 5464, 10391, 9200, 5975, 6440, 7108, 8274, 12316, 9670, 12183, 11420, 10976, 10942, 12015, 10276, 11101, 9716, 10601, 14527, 12019, 12211, 14801, 10200, 10197, 10787, 12208, 13310, 13782, 13838, 15569, 14070, 12290, 15751, 14325, 11898, 16050, 12077, 14931, 18564, 12883, 16031, 13448, 19667, 16606, 14851, 19873, 17075, 14629, 16846, 19185, 15283, 18105, 16007, 16735, 18431, 19763, 20001, 18824, 23438, 19832, 20879, 22943, 22100, 18915, 22670, 21372, 21615, 20536, 20935, 24009, 24121, 21946, 24510, 27385, 22957, 23800, 24599, 23900, 25776, 25794, 25236, 24739, 25839, 26934, 25687, 25632, 26783, 24820, 29969, 28471, 27464, 28874, 28746, 27319, 28542, 31257, 30385, 28285, 32904, 30409, 32989, 31428, 31875, 32214, 31146, 34268, 32723, 31025, 31119, 31308, 31970, 36787, 33440, 32478, 34947, 33440, 36960, 38496, 33439, 35809, 35105, 39151, 37314, 39962, 35749, 40146, 35695, 37998, 35857, 40682, 36984, 41802, 39519, 38151, 38673, 41135, 37971, 42396, 43376, 41617, 38901, 42582, 40037, 43189, 39936, 43854, 41388, 42364, 46143, 44206, 43269, 45399, 45399, 44079, 42235, 43361, 47881, 43133, 46946, 47030, 43734, 44329, 48405, 45761, 50185, 45036, 46957, 49901, 47225, 45593, 46851, 51577, 49828, 50366, 46895, 51901, 51871, 48315, 47827, 50550, 49082, 53213, 52337, 53358, 51331, 49379, 53848, 51417, 51273, 53955, 54947, 51849, 51786, 54870, 53802, 52191, 54007, 57262, 52461, 53792, 52652, 58434, 58634, 54145, 56937, 57382, 57153, 59592, 57362, 57229, 54497, 56763, 55213, 57277, 55634, 57252, 55309, 56388, 58054, 56539, 59815, 61634, 59379, 57781, 57989, 58173, 61347, 62115, 59146, 61975, 63354, 59217, 60256, 61843, 63735, 64428, 61070, 60966, 59165, 64582, 61290, 61628, 59054, 62293, 65492, 63727, 63433, 60627, 60663, 60372, 62204, 63599, 64475, 62071, 61351, 64311, 65535, 65535, 65535, 62642, 63318, 62834, 64622, 61009, 64829, 64344, 62886, 62034, 65535, 64367, 63913, 65535, 65535, 62038, 62335, 61945, 63554, 65422, 65535, 65074, 62764, 63040, 62856, 64190, 64286, 65535, 62894, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 64586, 65389, 65535, 64595, 63365, 65535, 65164, 65535, 65535, 62327, 65535, 64990, 64038, 63505, 65298, 65535, 65535, 65535, 63574, 64637, 65535, 64937, 65535, 65535, 64114, 63735, 65535, 64098, 63106, 65535, 65535, 65535, 64680, 65535, 62073, 63519, 65535, 65535, 62028, 65535, 63905, 62515, 64189, 61109, 63212, 64438, 60792, 63475, 62724, 63321, 63078, 60120, 63133, 60609, 60675, 65149, 60878, 61210, 59446, 65115, 60482, 62558, 59055, 62982, 63079, 62580, 60132, 62275, 63132, 61566, 63182, 60481, 61215, 61422, 62596, 59131, 60777, 62737, 58154, 62996, 59639, 61096, 61744, 62391, 62050, 61327, 59769, 60675, 60210, 58141, 56172, 55429, 59149, 58094, 60469, 57856, 54542, 58596, 57666, 54163, 57057, 56385, 55769, 52551, 53320, 57173, 52834, 55351, 51618, 53633, 51769, 57172, 56567, 54821, 56624, 53870, 52206, 55913, 55217, 54993, 50109, 51212, 51903, 50117, 49286, 49735, 48350, 47734, 50471, 49633, 52655, 46820, 46952, 47878, 47423, 51779, 48872, 47472, 47373, 49599, 47877, 50137, 49576, 45609, 47272, 46656, 49340, 45785, 47899, 45806, 47705, 41882, 42949, 46301, 41560, 45958, 43919, 42172, 42976, 44307, 43237, 41901, 40686, 43329, 43125, 43386, 41014, 42205, 41737, 37557, 37704, 36907, 42719, 42007, 41637, 38362, 41570, 38816, 40616, 37715, 34487, 38599, 37388, 33656, 37109, 36619, 36874, 36777, 38185, 34494, 35131, 36978, 36211, 34583, 33634, 36465, 36291, 32241, 34869, 35501, 33420, 33201, 31215, 32517, 32044, 29560, 27539, 29388, 27994, 31408, 30420, 31029, 27553, 28482, 27668, 28143, 25290, 29366, 28908, 29305, 25188, 29308, 24299, 24458, 28483, 22623, 27322, 28542, 24327, 27226, 26286, 27167, 22029, 23798, 20474, 24264, 20343, 23188, 20281, 23491, 24265, 21504, 23131, 20341, 17734, 23210, 18212, 21988, 18485, 18003, 21616, 21646, 21798, 20294, 21663, 17614, 20864, 16205, 17510, 15768, 19737, 18156, 14308, 16641, 17558, 18373, 18313, 17966, 17688, 13087, 16611, 12159, 12621, 14061, 14484, 12746, 12243, 16121, 14231, 14037, 15863, 10847, 14711, 13415, 12069, 14580, 11409, 11166, 10644, 8874, 9642, 8738, 11099, 12615, 9185, 11110, 12000, 7812, 6104, 6290, 7078, 9035, 6570, 5234, 7017, 5165, 6598, 6179, 10532, 8082, 5132, 4859, 7731, 7003, 3460, 7753, 6525, 3895, 3756, 6505, 3034, 7719, 6877, 3338, 2212, 7769, 5513, 2841, 6840, 2981, 7185, 1242, 2840, 3980, 4631, 1223, 4371, 5889, 2730, 795, 1059, 4626, 4804, 328, 1083, 813, 0, 3894, 966, 566, 1193, 0, 2671, 3243, 38, 1716, 2645, 2222, 2573, 2421, 627, 4089, 1746, 0, 1020, 0, 1137, 0, 0, 0, 0, 564, 0, 504, 1600, 3417, 3283, 0, 2819, 0, 1207, 0, 2934, 3168, 0, 0, 963, 0, 714, 0, 0, 0, 702, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1564, 0, 2015, 0, 1413, 589, 3542, 2710, 3489, 0, 0, 1146, 0, 3609, 1930, 0, 0, 0, 0, 1294, 126, 4293, 0, 4211, 0, 3635, 2191, 130, 1864, 3783, 3409, 4207, 5255, 1086, 2351, 4158, 910, 4850, 3988, 3875, 611, 2965, 4778, 3837, 321, 448, 2387, 3146, 6162, 1474, 934, 1521, 2336, 6288, 4767, 1581, 3638, 5033, 5218, 5067, 7229, 5810, 3992, 9177, 7699, 6324, 3211, 9502, 5385, 10118, 4552, 8569, 10010, 4829, 9270, 11144, 5387, 7208, 7413, 7242, 8293, 11119, 6431, 9686, 6758, 10953, 10180, 12822, 9129, 7838, 11019, 9329, 14099, 9809, 11327, 13529, 10142, 10522, 11891, 11827, 14306, 15526, 16273, 15811, 10664, 10817, 16551, 17314, 11390, 14092, 17286, 14580, 16794, 13687, 16495, 14412, 15075, 15826, 17018, 15406, 13970, 18747, 16161, 15479, 19025, 20105, 15823, 17960, 19654, 17506, 16775, 18983, 18044, 21832, 20947, 18712, 18795, 19310, 18216, 24950, 25188, 21959, 19412, 25127, 25835, 20078, 23441, 21635, 25260, 21914, 27497, 23030, 27342, 27942, 27477, 27785, 24715, 25516, 24745, 25225, 25919, 29646, 26573, 25566, 27177, 29270, 26299, 31883, 28882, 31299, 32572, 33231, 28738, 31713, 31927, 28438, 33844, 31360, 31620, 29347, 32175, 34798, 31030, 29935, 34956, 30789, 33247, 37275, 36603, 33507, 37634, 32517, 33667, 33735, 38760, 36544, 38839, 38372, 39661, 37315, 36145, 38456, 35882, 40719, 35858, 40390, 39125, 37156, 42344, 38484, 37817, 43736, 38037, 39246, 40640, 40216, 43404, 44933, 43581, 42622, 39903, 41749, 42652, 46701, 41934, 41116, 41179, 45886, 44309, 46027, 46064, 47623, 44835, 42814, 49447, 44092, 48349, 45170, 44818, 45892, 47957, 45524, 49942, 45807, 46743, 51688, 48790, 49028, 48044, 52642, 48680, 51578, 50756, 48939, 49610, 49602, 50962, 49757, 50127, 55013, 51269, 52872, 55393, 52791, 55905, 53185, 56136, 56907, 55743, 53127, 53371, 52388, 57179, 55278, 55332, 57575, 57982, 57061, 54626, 55653, 55551, 54874, 56762, 59573, 54295, 58991, 54251, 60426, 57282, 58711, 59583, 60743, 55337, 58338, 60964, 57517, 57881, 57434, 57805, 58453, 61421, 58043, 60625, 57594, 60977, 62495, 63232, 60488, 63497, 62366, 61149, 62717, 58039, 60133, 63280, 62855, 63895, 63369, 63394, 62021, 59024, 63686, 61405, 60382, 63941, 65160, 60107, 63564, 63565, 65473, 62848, 60194, 64545, 63798, 65535, 64985, 64690, 62035, 61181, 62873, 65535, 63285, 61969, 65535, 62643, 61910, 64716, 65535, 65535, 65535, 65535, 62269, 65167, 65535, 64564, 64430, 63975, 64463, 65535, 64988, 63996, 63264, 64269, 63725, 65535, 64046, 63525, 65535, 65535, 65535, 64862, 63328, 65535, 65535, 64627, 65535, 65535, 64733, 62556, 65535, 65535, 65535, 65535, 63073, 63343, 64488, 64292, 65535, 65535, 65535, 62888, 65535, 65535, 65535, 65535, 62782, 65535, 61890, 65535, 62003, 65535, 62815, 62620, 62925, 61452, 62239, 64546, 61710, 61137, 61306, 65535, 64291, 65535, 65535, 63007, 62003, 64049, 60720, 65535, 62599, 60630, 65535, 61934, 62204, 65535, 63289, 62967, 60661, 65522, 63536, 60527, 60727, 63924, 62875, 65129, 61711, 60900, 58901, 63777, 58336, 64377, 64014, 59625, 59889, 58489, 62424, 63069, 62602, 61512, 62215, 56610, 62756, 62056, 60184, 59645, 58654, 57032, 58886, 59631, 60635, 59810, 56575, 56994, 57881, 56952, 55528, 55872, 54806, 55042, 55818, 58687, 53305, 58782, 58105, 58324, 57542, 55671, 55095, 52093, 55077, 55762, 54711, 50799, 52428, 56186, 55410, 55117, 52456, 52008, 54923, 53694, 52117, 51431, 52752, 52326, 49322, 53270, 48957, 48084, 52798, 52283, 47146, 52547, 46923, 49031, 49128, 46554, 47878, 48106, 47467, 49969, 45480, 45554, 46344, 46833, 45239, 47330, 46846, 44061, 42526, 46187, 48352, 45320, 43395, 42171, 46474, 45525, 45823, 46583, 42528, 41268, 45517, 41195, 39065, 41961, 43946, 44480, 43071, 43794, 38747, 43401, 42098, 38072, 41157, 39197, 39107, 36776, 41519, 41088, 36464, 40828, 37342, 37050, 38334, 35742, 34671, 34126, 38630, 32770, 32284, 35920, 32995, 35264, 37356, 33203, 30764, 30743, 33834, 35504, 30902, 35828, 34477, 34323, 34279, 33547, 32227, 29549, 27933, 30796, 32609, 28434, 30313, 30156, 26544, 30463, 29414, 26774, 28043, 26515, 24454, 28800, 27682, 24923, 24816, 24131, 27960, 28356, 25761, 26698, 24981, 24598, 26072, 21661, 21816, 22508, 23694, 20206, 22088, 21510, 20097, 22105, 21232, 24320, 21746, 21738, 21885, 21658, 18871, 18501, 20687, 19883, 18954, 22012, 16381, 17022, 16735, 20855, 19086, 19338, 17147, 18921, 16887, 17087, 19030, 15300, 15638, 17445, 18138, 14384, 15069, 16680, 15673, 14030, 16662, 13233, 14115, 15886, 14427, 10793, 15276, 13745, 14366, 11412, 9339, 13417, 13977, 10906, 9419, 13566, 14116, 7690, 12882, 8442, 12909, 11750, 8622, 12376, 8830, 8080, 11702, 10991, 8874, 5762, 9571, 7457, 4920, 11098, 6076, 4428, 10603, 9385, 4960, 7163, 7424, 7962, 5641, 3110, 5123, 4391, 8553, 3127, 3509, 8106, 7980, 4300, 6667, 7680, 4318, 2589, 1824, 1553, 3276, 5986, 2406, 4530, 5023, 4513, 5919, 4390, 558, 5751, 6156, 2681, 5074, 4103, 0, 0, 2186, 826, 3007, 3958, 2586, 1077, 88, 241, 2391, 4728, 0, 2720, 0, 3575, 785, 2848, 1911, 0, 1606, 0, 2962, 3771, 0, 0, 2662, 0, 0, 0, 0, 0, 0, 2023, 0, 2922, 0, 0, 979, 2743, 0, 0, 2304, 1316, 3180, 1574, 667, 1269, 1343, 841, 3114, 0, 2429, 0, 763, 0, 0, 0, 0, 0, 31, 0, 0, 0, 0, 2252, 1012, 0, 2866, 0, 0, 3307, 0, 2169, 0, 795, 2081, 2220, 1151, 0, 2097, 1547, 0, 3381, 0, 3596, 1963, 2862, 3863, 1533, 3989, 2764, 1336, 0, 0, 4458, 1794, 3209, 1050, 0, 5928, 851, 2290, 5074, 2210, 2216, 2537, 1810, 6510, 4181, 3973, 2956, 7152, 3341, 6354, 7921, 5190, 2620, 6387, 2426, 4658, 8192, 8793, 3359, 4977, 5373, 8369, 4645, 3800, 5031, 8063, 9151, 9230, 6888, 5883, 4847, 11020, 8330, 8158, 10520, 6128, 6385, 6311, 6108, 10951, 10014, 12602, 11642, 12759, 10362, 8250, 9421, 7897, 10500, 13047, 13677, 9509, 13298, 13259, 13826, 15582, 11168, 12911, 12584, 11467, 11385, 16101, 15229, 11426, 16174, 16964, 16545, 15083, 14230, 15831, 18717, 18763, 15391, 18759, 18734, 18767, 18299, 14315, 18825, 20220, 18575, 17182, 18720, 15766, 19379, 21896, 20545, 20549, 21419, 19944, 20102, 19614, 19686, 24498, 19847, 22485, 21501, 22854, 19966, 25918, 20862, 23390, 25424, 22415, 23308, 26465, 27124, 26520, 26711, 24560, 25545, 24983, 25203, 26640, 27621, 25874, 28644, 24906, 24510, 28879, 30548, 25623, 31915, 27132, 26831, 31069, 26706, 30831, 31749, 30959, 28259, 28230, 32526, 33987, 31315, 35358, 32501, 34009, 35651, 34619, 35995, 33145, 32421, 31438, 36802, 37737, 32773, 33218, 36474, 36587, 34070, 38737, 34335, 40053, 35268, 38943, 36677, 35896, 38295, 40997, 37329, 40991, 40755, 36835, 41810, 37729, 39592, 38714, 40464, 41103, 39346, 42196, 39339, 42970, 40260, 41595, 41818, 39944, 41101, 41687, 46710, 42771, 45910, 42752, 44586, 47246, 43455, 46482, 43959, 44634, 46627, 47183, 47847, 44105, 44894, 47002, 45070, 48002, 46435, 46960, 49324, 47221, 50307, 51788, 52802, 49803, 49834, 50840, 48409, 49188, 49088, 52513, 53631, 49706, 49924, 52047, 49058, 49430, 54917, 50836, 51974, 52717, 50395, 56063, 52879, 54797, 55394, 55460, 54744, 57088, 55677, 56475, 58488, 55405, 54260, 56479, 57717, 55576, 57304, 53901, 57537, 54615, 57294, 59129, 58116, 55353, 60282, 59528, 59030, 61092, 57236, 59392, 59119, 62317, 61667, 58175, 61245, 58490, 61283, 56880, 62576, 60746, 63528, 57669, 63401, 64129, 62063, 62806, 58478, 64703, 64091, 62488, 63186, 60465, 63397, 64790, 65237, 65258, 60660, 60637, 60884, 65535, 62007, 64184, 63633, 60968, 65535, 64444, 60338, 62945, 62964, 61195, 61959, 65032, 65002, 61648, 62678, 61784, 62684, 65535, 65535, 65535, 65535, 61745, 65420, 65535, 65535, 65535, 65535, 63406, 65535, 65502, 65535, 62690, 64018, 64800, 64878, 65535, 65348, 65535, 65535, 63883, 65535, 65535, 65535, 63620, 65535, 65535, 65535, 64845, 65535, 65535, 62883, 65535, 62551, 63872, 63356, 65535, 65535, 65535, 64042, 64507, 63069, 62567, 64116, 63802, 62667, 62773, 64281, 64646, 62585, 64946, 65535, 63834, 63354, 63383, 62029, 65535, 65135, 62300, 65535, 65535, 64867, 65535, 65535, 62356, 62276, 64146, 65215, 63501, 65535, 63284, 64766, 63994, 64710, 61846, 62420, 64053, 64650, 65074, 60498, 64632, 59684, 61651, 62513, 64059, 60380, 62578, 61341, 64829, 64981, 64182, 60764, 60551, 64456, 60463, 60276, 63305, 60280, 63530, 61318, 59896, 63460, 60905, 57120, 59902, 60408, 58090, 58321, 56810, 57315, 60297, 60590, 58917, 58369, 59713, 57417, 59368, 57169, 57208, 55466, 59837, 54082, 54697, 58048, 54928, 54164, 56627, 55372, 52657, 56482, 52154, 57553, 57445, 56949, 53157, 52639, 55717, 50797, 56127, 53680, 55883, 52689, 53223, 55387, 52203, 50470, 54609, 49322, 54311, 50590, 53501, 50355, 51578, 51815, 49095, 48180, 46779, 52849, 49121, 49155, 50897, 50354, 49245, 45529, 47214, 44711, 49137, 49680, 45433, 49599, 49801, 46362, 44775, 48083, 45357, 47747, 44413, 42962, 46874, 41812, 41413, 47105, 43665, 46289, 43410, 42883, 40841, 44690, 41739, 41412, 43271, 43413, 43253, 39966, 38503, 39394, 40441, 40317, 38130, 37774, 37412, 35849, 40550, 38754, 36498, 40704, 38032, 35373, 36515, 35689, 35733, 39237, 33251, 35229, 33239, 37068, 33183, 32843, 35546, 33834, 36675, 33971, 32859, 30187, 35556, 29440, 33811, 32297, 32630, 28461, 30894, 32854, 30951, 33260, 30810, 29521, 28141, 32252, 29803, 31059, 26591, 28903, 27126, 28127, 28978, 25444, 26418, 26137, 27287, 23996, 23924, 25581, 27287, 25742, 22840, 24991, 26119, 23825, 26505, 22131, 24466, 19886, 21628, 19429, 21515, 19123, 22106, 18663, 22395, 22622, 22964, 23163, 19515, 18199, 20164, 22597, 20287, 20936, 16954, 20563, 16019, 16041, 17804, 16593, 20064, 20333, 14114, 17346, 15200, 13868, 15455, 19047, 17942, 14648, 16602, 18197, 13407, 11894, 12758, 16445, 13818, 16431, 14845, 11397, 13026, 11823, 10673, 12281, 9928, 12587, 14711, 9849, 8781, 9566, 7765, 8689, 12424, 10025, 7739, 8442, 11224, 9834, 6220, 12447, 9731, 8387, 5682, 6378, 5091, 6331, 6440, 6114, 10212, 10181, 10192, 8803, 6843, 7230, 8125, 5024, 9409, 3820, 3445, 5141, 8790, 4166, 4615, 5133, 2844, 2073, 5642, 3253, 1920, 6452, 1802, 3323, 3543, 1906, 1280, 5114, 1192, 4672, 941, 4903, 1936, 5669, 5629, 4636, 1118, 125, 4441, 0, 617, 3914, 3134, 1611, 3946, 3069, 3451, 1437, 1615, 3678, 661, 0, 0, 2212, 1406, 2116, 2544, 0, 0, 16, 929, 1062, 550, 2797, 2969, 2120, 726, 2382, 0, 1133, 3045, 1851, 3478, 1824, 204, 993, 0, 1248, 0, 0, 2581, 0, 1703, 0, 438, 0, 1108, 2410, 2762, 142, 0, 1422, 0, 259, 0, 726, 0, 0, 463, 0, 0, 1273, 1286, 0, 0, 0, 0, 1538, 0, 1467, 0, 3750, 0, 3645, 1850, 110, 3068, 2572, 3126, 3901, 4104, 2717, 0, 2138, 4662, 2887, 4725, 196, 4386, 2032, 4347, 4152, 1464, 272, 3520, 0, 3481, 1622, 5279, 468, 4428, 160, 5677, 6668, 3330, 5753, 6771, 2824, 1412, 1108, 6619, 4527, 2681, 6208, 5804, 3417, 6356, 4455, 8417, 2761, 5503, 6356, 4067, 4864, 7159, 8070, 5991, 6517, 10031, 9591, 4910, 7496, 9069, 7468, 5217, 4935, 10247, 5928, 7623, 6751, 9342, 8483, 9992, 9963, 11503, 9855, 11040, 10355, 9611, 13477, 10786, 11655, 10365, 11701, 11812, 11770, 13703, 10454, 13963, 11627, 13597, 14713, 13862, 16298, 14611, 13431, 12271, 17626, 17041, 14273, 14930, 16912, 12739, 14751, 16267, 17529, 15155, 19525, 13910, 15739, 17195, 15712, 16214, 15079, 15624, 18896, 21502, 17284, 17561, 19993, 21167, 22650, 21291, 19412, 18697, 22409, 23583, 20787, 24712, 23050, 24449, 21834, 19637, 25519, 25509, 22265, 25860, 25806, 27557, 24083, 27033, 27741, 27660, 27270, 25332, 26172, 24917, 25701, 25887, 28562, 28583, 28485, 30465, 26146, 27735, 29796, 29165, 28792, 28054, 28413, 28433, 33045, 32429, 29275, 32885, 31811, 33203, 30399, 29773, 31126, 31784, 35459, 35936, 31074, 31159, 36873, 33967, 31730, 35431, 32669, 32560, 33586, 35850, 35797, 35770, 39661, 35019, 38263, 40461, 34761, 39072, 41126, 36423, 38746, 37780, 38514, 41239, 37703, 39567, 37915, 42498, 39431, 43441, 40078, 44311, 41858, 40321, 42448, 39838, 42302, 46102, 43087, 46726, 45995, 43417, 43576, 44336, 47231, 44075, 47424, 43056, 47812, 43744, 43730, 48546, 45619, 49561, 49682, 49821, 50696, 48255, 47267, 45826, 51967, 46286, 47672, 48177, 50395, 47624, 51504, 47649, 52518, 51198, 48691, 48022, 54198, 51540, 53867, 48828, 54297, 51436, 49463, 54140, 52057, 56098, 52418, 52787, 52466, 55612, 55225, 56309, 56066, 51722, 52373, 52391, 52868, 58532, 53124, 57551, 59049, 53558, 55043, 54108, 58392, 56978, 59439, 54541, 58505, 55600, 59412, 58209, 55681, 60361, 58819, 59251, 58023, 61164, 56364, 61965, 61765, 57260, 57872, 62813, 59326, 57374, 58077, 63742, 63328, 57881, 62579, 60046, 58754, 59429, 60734, 62512, 59776, 64432, 60139, 65295, 64038, 61555, 62083, 63906, 60286, 61064, 65535, 61604, 60925, 61681, 65535, 62116, 62907, 65341, 65535, 64644, 60773, 63643, 65535, 63485, 62040, 61596, 61678, 63266, 62044, 63949, 65535, 64106, 64368, 63338, 65535, 65535, 62213, 65535, 64899, 63005, 65535, 63651, 64206, 65058, 62362, 65535, 64548, 63742, 65535, 63614, 64720, 62466, 64535, 63923, 65535, 64770, 64610, 65535, 64573, 63750, 65535, 63907, 64439, 62433, 62563, 65535, 65535, 63732, 65535, 63711, 65535, 65202, 65535, 65535, 65535, 65156, 62037, 62671, 65535, 64246, 64639, 65535, 65262, 65535, 63148, 65535, 64786, 65515, 65535, 61490, 64578, 65535, 65535, 65271, 62710, 63555, 65535, 62855, 63305, 61860, 65535, 62895, 64684, 62843, 65535, 63550, 62678, 61220, 60380, 61267, 64464, 60372, 60162, 61290, 60247, 60793, 60184, 59267, 64505, 61515, 60900, 60783, 61235, 60740, 58221, 59605, 59659, 58351, 58162, 57531, 60573, 56897, 59716, 60894, 60869, 61576, 62573, 62401, 58088, 62044, 60091, 56182, 60173, 55157, 54928, 55630, 58888, 58072, 60478, 56199, 58317, 58183, 56285, 54386, 57849, 56289, 53889, 59041, 54012, 52903, 55761, 57459, 56691, 52471, 53299, 53826, 56898, 56549, 53604, 52853, 55229, 53742, 49746, 49662, 54168, 55134, 52830, 52603, 53625, 49441, 49243, 53212, 51620, 49209, 52923, 52575, 52226, 49142, 52236, 50723, 50787, 46824, 49086, 47202, 46276, 45827, 46070, 45821, 45574, 48496, 45061, 44750, 45599, 46270, 42894, 48412, 46426, 42666, 45287, 41095
};

int get_feature_data(size_t offset, size_t length, float *out_ptr) {
    memcpy(out_ptr, features + offset, length * sizeof(float));
    return 0;
}
/* USER CODE END Includes */

/* Private typedef -----------------------------------------------------------*/
/* USER CODE BEGIN PTD */

/* USER CODE END PTD */

/* Private define ------------------------------------------------------------*/
/* USER CODE BEGIN PD */

/* USER CODE END PD */

/* Private macro -------------------------------------------------------------*/
/* USER CODE BEGIN PM */

/* USER CODE END PM */

/* Private variables ---------------------------------------------------------*/

UART_HandleTypeDef huart1;

/* USER CODE BEGIN PV */
uint8_t atributos[18] = {0}; //datos recibidos
char *ptr; //puntero para manipular la cadena de caracteres
int cont = 0; //contador para iterar en el array de features

/* USER CODE END PV */

/* Private function prototypes -----------------------------------------------*/
void SystemClock_Config(void);
static void MX_GPIO_Init(void);
static void MX_USART1_UART_Init(void);
/* USER CODE BEGIN PFP */

void func(bool s); //imprime la señal identificada

/* USER CODE END PFP */

/* Private user code ---------------------------------------------------------*/
/* USER CODE BEGIN 0 */
#include <stdarg.h>
#include "edge-impulse-sdk/classifier/ei_run_classifier.h"

void vprint(const char *fmt, va_list argp)
{
    char string[200];
    if(0 < vsprintf(string, fmt, argp)) // build string
    {
        HAL_UART_Transmit(&huart1, (uint8_t*)string, strlen(string), 180); // send message via UART
    }
}

void ei_printf(const char *format, ...) {
    va_list myargs;
    va_start(myargs, format);
    vprint(format, myargs);
    va_end(myargs);
}
/* USER CODE END 0 */

/**
  * @brief  The application entry point.
  * @retval int
  */
int main(void)
{
  /* USER CODE BEGIN 1 */

  /* USER CODE END 1 */

  /* MCU Configuration--------------------------------------------------------*/

  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */
  HAL_Init();

  /* USER CODE BEGIN Init */
  signal_t signal;
  signal.total_length = sizeof(features) / sizeof(features[0]);
  signal.get_data = &get_feature_data;
  /* USER CODE END Init */

  /* Configure the system clock */
  SystemClock_Config();

  /* USER CODE BEGIN SysInit */

  /* USER CODE END SysInit */

  /* Initialize all configured peripherals */
  MX_GPIO_Init();
  MX_USART1_UART_Init();
  /* USER CODE BEGIN 2 */

  /* USER CODE END 2 */

  /* Infinite loop */
  /* USER CODE BEGIN WHILE */
  while (1)
  {
    /* USER CODE END WHILE */

    /* USER CODE BEGIN 3 */
	  ei_impulse_result_t result = { 0 };
	  run_classifier(&signal, &result, false);

	  // print the predictions
	  /*	EI_CLASSIFIER_LABEL_COUNT
	   *  result.classification[ix].value
	   * */
	  if (result.classification[0].value < result.classification[1].value) {
		 //ei_printf("triangulo\r\n");
		 //imprimimos la funcion:
		 func(false);
	  }else{
		//ei_printf("seno\r\n");
		//imprimimos la funcion:
		func(true);
	}

  }
  /* USER CODE END 3 */
}

/**
  * @brief System Clock Configuration
  * @retval None
  */
void SystemClock_Config(void)
{
  RCC_OscInitTypeDef RCC_OscInitStruct = {0};
  RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};

  /** Configure the main internal regulator output voltage
  */
  __HAL_RCC_PWR_CLK_ENABLE();
  __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE2);

  /** Initializes the RCC Oscillators according to the specified parameters
  * in the RCC_OscInitTypeDef structure.
  */
  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSI;
  RCC_OscInitStruct.HSIState = RCC_HSI_ON;
  RCC_OscInitStruct.HSICalibrationValue = RCC_HSICALIBRATION_DEFAULT;
  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSI;
  RCC_OscInitStruct.PLL.PLLM = 10;
  RCC_OscInitStruct.PLL.PLLN = 210;
  RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;
  RCC_OscInitStruct.PLL.PLLQ = 2;
  if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
  {
    Error_Handler();
  }

  /** Initializes the CPU, AHB and APB buses clocks
  */
  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK
                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV4;
  RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV2;

  if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_5) != HAL_OK)
  {
    Error_Handler();
  }
}

/**
  * @brief USART1 Initialization Function
  * @param None
  * @retval None
  */
static void MX_USART1_UART_Init(void)
{

  /* USER CODE BEGIN USART1_Init 0 */

  /* USER CODE END USART1_Init 0 */

  /* USER CODE BEGIN USART1_Init 1 */

  /* USER CODE END USART1_Init 1 */
  huart1.Instance = USART1;
  huart1.Init.BaudRate = 115200;
  huart1.Init.WordLength = UART_WORDLENGTH_8B;
  huart1.Init.StopBits = UART_STOPBITS_1;
  huart1.Init.Parity = UART_PARITY_NONE;
  huart1.Init.Mode = UART_MODE_TX_RX;
  huart1.Init.HwFlowCtl = UART_HWCONTROL_NONE;
  huart1.Init.OverSampling = UART_OVERSAMPLING_16;
  huart1.Init.OneBitSampling = UART_ONE_BIT_SAMPLE_DISABLE;
  huart1.AdvancedInit.AdvFeatureInit = UART_ADVFEATURE_NO_INIT;
  if (HAL_UART_Init(&huart1) != HAL_OK)
  {
    Error_Handler();
  }
  /* USER CODE BEGIN USART1_Init 2 */

  /* USER CODE END USART1_Init 2 */

}

/**
  * @brief GPIO Initialization Function
  * @param None
  * @retval None
  */
static void MX_GPIO_Init(void)
{
  GPIO_InitTypeDef GPIO_InitStruct = {0};
/* USER CODE BEGIN MX_GPIO_Init_1 */
/* USER CODE END MX_GPIO_Init_1 */

  /* GPIO Ports Clock Enable */
  __HAL_RCC_GPIOE_CLK_ENABLE();
  __HAL_RCC_GPIOG_CLK_ENABLE();
  __HAL_RCC_GPIOB_CLK_ENABLE();
  __HAL_RCC_GPIOD_CLK_ENABLE();
  __HAL_RCC_GPIOC_CLK_ENABLE();
  __HAL_RCC_GPIOA_CLK_ENABLE();
  __HAL_RCC_GPIOJ_CLK_ENABLE();
  __HAL_RCC_GPIOI_CLK_ENABLE();
  __HAL_RCC_GPIOK_CLK_ENABLE();
  __HAL_RCC_GPIOF_CLK_ENABLE();
  __HAL_RCC_GPIOH_CLK_ENABLE();

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(OTG_FS_PowerSwitchOn_GPIO_Port, OTG_FS_PowerSwitchOn_Pin, GPIO_PIN_SET);

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(GPIOI, ARDUINO_D7_Pin|ARDUINO_D8_Pin|LCD_DISP_Pin, GPIO_PIN_RESET);

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(LCD_BL_CTRL_GPIO_Port, LCD_BL_CTRL_Pin, GPIO_PIN_RESET);

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(DCMI_PWR_EN_GPIO_Port, DCMI_PWR_EN_Pin, GPIO_PIN_RESET);

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(GPIOG, ARDUINO_D4_Pin|ARDUINO_D2_Pin|EXT_RST_Pin, GPIO_PIN_RESET);

  /*Configure GPIO pin : LCD_B0_Pin */
  GPIO_InitStruct.Pin = LCD_B0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF14_LTDC;
  HAL_GPIO_Init(LCD_B0_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : OTG_HS_OverCurrent_Pin */
  GPIO_InitStruct.Pin = OTG_HS_OverCurrent_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(OTG_HS_OverCurrent_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : QSPI_D2_Pin */
  GPIO_InitStruct.Pin = QSPI_D2_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF9_QUADSPI;
  HAL_GPIO_Init(QSPI_D2_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : RMII_TXD1_Pin RMII_TXD0_Pin RMII_TX_EN_Pin */
  GPIO_InitStruct.Pin = RMII_TXD1_Pin|RMII_TXD0_Pin|RMII_TX_EN_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF11_ETH;
  HAL_GPIO_Init(GPIOG, &GPIO_InitStruct);

  /*Configure GPIO pins : FMC_NBL1_Pin FMC_NBL0_Pin FMC_D5_Pin FMC_D6_Pin
                           FMC_D8_Pin FMC_D11_Pin FMC_D4_Pin FMC_D7_Pin
                           FMC_D9_Pin FMC_D12_Pin FMC_D10_Pin */
  GPIO_InitStruct.Pin = FMC_NBL1_Pin|FMC_NBL0_Pin|FMC_D5_Pin|FMC_D6_Pin
                          |FMC_D8_Pin|FMC_D11_Pin|FMC_D4_Pin|FMC_D7_Pin
                          |FMC_D9_Pin|FMC_D12_Pin|FMC_D10_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_FMC;
  HAL_GPIO_Init(GPIOE, &GPIO_InitStruct);

  /*Configure GPIO pins : ARDUINO_SCL_D15_Pin ARDUINO_SDA_D14_Pin */
  GPIO_InitStruct.Pin = ARDUINO_SCL_D15_Pin|ARDUINO_SDA_D14_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_OD;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF4_I2C1;
  HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);

  /*Configure GPIO pins : ULPI_D7_Pin ULPI_D6_Pin ULPI_D5_Pin ULPI_D3_Pin
                           ULPI_D2_Pin ULPI_D1_Pin ULPI_D4_Pin */
  GPIO_InitStruct.Pin = ULPI_D7_Pin|ULPI_D6_Pin|ULPI_D5_Pin|ULPI_D3_Pin
                          |ULPI_D2_Pin|ULPI_D1_Pin|ULPI_D4_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF10_OTG_HS;
  HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_PWM_D3_Pin */
  GPIO_InitStruct.Pin = ARDUINO_PWM_D3_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF2_TIM3;
  HAL_GPIO_Init(ARDUINO_PWM_D3_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : SPDIF_RX0_Pin */
  GPIO_InitStruct.Pin = SPDIF_RX0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF8_SPDIFRX;
  HAL_GPIO_Init(SPDIF_RX0_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : SDMMC_CK_Pin SDMMC_D3_Pin SDMMC_D2_Pin PC9
                           PC8 */
  GPIO_InitStruct.Pin = SDMMC_CK_Pin|SDMMC_D3_Pin|SDMMC_D2_Pin|GPIO_PIN_9
                          |GPIO_PIN_8;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_SDMMC1;
  HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_PWM_D9_Pin */
  GPIO_InitStruct.Pin = ARDUINO_PWM_D9_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF1_TIM2;
  HAL_GPIO_Init(ARDUINO_PWM_D9_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : DCMI_D6_Pin DCMI_D7_Pin */
  GPIO_InitStruct.Pin = DCMI_D6_Pin|DCMI_D7_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF13_DCMI;
  HAL_GPIO_Init(GPIOE, &GPIO_InitStruct);

  /*Configure GPIO pin : QSPI_NCS_Pin */
  GPIO_InitStruct.Pin = QSPI_NCS_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF10_QUADSPI;
  HAL_GPIO_Init(QSPI_NCS_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : FMC_SDNCAS_Pin FMC_SDCLK_Pin FMC_A11_Pin FMC_A10_Pin
                           FMC_BA1_Pin FMC_BA0_Pin */
  GPIO_InitStruct.Pin = FMC_SDNCAS_Pin|FMC_SDCLK_Pin|FMC_A11_Pin|FMC_A10_Pin
                          |FMC_BA1_Pin|FMC_BA0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_FMC;
  HAL_GPIO_Init(GPIOG, &GPIO_InitStruct);

  /*Configure GPIO pins : LCD_B1_Pin LCD_B2_Pin LCD_B3_Pin LCD_G4_Pin
                           LCD_G1_Pin LCD_G3_Pin LCD_G0_Pin LCD_G2_Pin
                           LCD_R7_Pin LCD_R5_Pin LCD_R6_Pin LCD_R4_Pin
                           LCD_R3_Pin LCD_R1_Pin LCD_R2_Pin */
  GPIO_InitStruct.Pin = LCD_B1_Pin|LCD_B2_Pin|LCD_B3_Pin|LCD_G4_Pin
                          |LCD_G1_Pin|LCD_G3_Pin|LCD_G0_Pin|LCD_G2_Pin
                          |LCD_R7_Pin|LCD_R5_Pin|LCD_R6_Pin|LCD_R4_Pin
                          |LCD_R3_Pin|LCD_R1_Pin|LCD_R2_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF14_LTDC;
  HAL_GPIO_Init(GPIOJ, &GPIO_InitStruct);

  /*Configure GPIO pin : OTG_FS_VBUS_Pin */
  GPIO_InitStruct.Pin = OTG_FS_VBUS_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(OTG_FS_VBUS_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : Audio_INT_Pin */
  GPIO_InitStruct.Pin = Audio_INT_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_EVT_RISING;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(Audio_INT_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : FMC_D2_Pin FMC_D3_Pin FMC_D1_Pin FMC_D15_Pin
                           FMC_D0_Pin FMC_D14_Pin FMC_D13_Pin */
  GPIO_InitStruct.Pin = FMC_D2_Pin|FMC_D3_Pin|FMC_D1_Pin|FMC_D15_Pin
                          |FMC_D0_Pin|FMC_D14_Pin|FMC_D13_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_FMC;
  HAL_GPIO_Init(GPIOD, &GPIO_InitStruct);

  /*Configure GPIO pins : OTG_FS_P_Pin OTG_FS_N_Pin OTG_FS_ID_Pin */
  GPIO_InitStruct.Pin = OTG_FS_P_Pin|OTG_FS_N_Pin|OTG_FS_ID_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF10_OTG_FS;
  HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);

  /*Configure GPIO pins : SAI2_MCLKA_Pin SAI2_SCKA_Pin SAI2_FSA_Pin SAI2_SDA_Pin */
  GPIO_InitStruct.Pin = SAI2_MCLKA_Pin|SAI2_SCKA_Pin|SAI2_FSA_Pin|SAI2_SDA_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF10_SAI2;
  HAL_GPIO_Init(GPIOI, &GPIO_InitStruct);

  /*Configure GPIO pins : LCD_DE_Pin LCD_B7_Pin LCD_B6_Pin LCD_B5_Pin
                           LCD_G6_Pin LCD_G7_Pin LCD_G5_Pin */
  GPIO_InitStruct.Pin = LCD_DE_Pin|LCD_B7_Pin|LCD_B6_Pin|LCD_B5_Pin
                          |LCD_G6_Pin|LCD_G7_Pin|LCD_G5_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF14_LTDC;
  HAL_GPIO_Init(GPIOK, &GPIO_InitStruct);

  /*Configure GPIO pin : LCD_B4_Pin */
  GPIO_InitStruct.Pin = LCD_B4_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF9_LTDC;
  HAL_GPIO_Init(LCD_B4_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : SAI2_SDB_Pin */
  GPIO_InitStruct.Pin = SAI2_SDB_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF10_SAI2;
  HAL_GPIO_Init(SAI2_SDB_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : OTG_FS_PowerSwitchOn_Pin */
  GPIO_InitStruct.Pin = OTG_FS_PowerSwitchOn_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(OTG_FS_PowerSwitchOn_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : DCMI_D5_Pin */
  GPIO_InitStruct.Pin = DCMI_D5_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF13_DCMI;
  HAL_GPIO_Init(DCMI_D5_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : ARDUINO_D7_Pin ARDUINO_D8_Pin LCD_DISP_Pin */
  GPIO_InitStruct.Pin = ARDUINO_D7_Pin|ARDUINO_D8_Pin|LCD_DISP_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(GPIOI, &GPIO_InitStruct);

  /*Configure GPIO pin : uSD_Detect_Pin */
  GPIO_InitStruct.Pin = uSD_Detect_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(uSD_Detect_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : FMC_A0_Pin FMC_A1_Pin FMC_A2_Pin FMC_A3_Pin
                           FMC_A4_Pin FMC_A5_Pin FMC_A6_Pin FMC_A9_Pin
                           FMC_A7_Pin FMC_A8_Pin FMC_SDNRAS_Pin */
  GPIO_InitStruct.Pin = FMC_A0_Pin|FMC_A1_Pin|FMC_A2_Pin|FMC_A3_Pin
                          |FMC_A4_Pin|FMC_A5_Pin|FMC_A6_Pin|FMC_A9_Pin
                          |FMC_A7_Pin|FMC_A8_Pin|FMC_SDNRAS_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_FMC;
  HAL_GPIO_Init(GPIOF, &GPIO_InitStruct);

  /*Configure GPIO pins : LCD_HSYNC_Pin LCD_VSYNC_Pin LCD_R0_Pin LCD_CLK_Pin */
  GPIO_InitStruct.Pin = LCD_HSYNC_Pin|LCD_VSYNC_Pin|LCD_R0_Pin|LCD_CLK_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF14_LTDC;
  HAL_GPIO_Init(GPIOI, &GPIO_InitStruct);

  /*Configure GPIO pin : LCD_BL_CTRL_Pin */
  GPIO_InitStruct.Pin = LCD_BL_CTRL_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(LCD_BL_CTRL_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : DCMI_VSYNC_Pin */
  GPIO_InitStruct.Pin = DCMI_VSYNC_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF13_DCMI;
  HAL_GPIO_Init(DCMI_VSYNC_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : OTG_FS_OverCurrent_Pin */
  GPIO_InitStruct.Pin = OTG_FS_OverCurrent_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(OTG_FS_OverCurrent_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : SDMMC_D0_Pin */
  GPIO_InitStruct.Pin = SDMMC_D0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_SDMMC1;
  HAL_GPIO_Init(SDMMC_D0_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : TP3_Pin NC2_Pin */
  GPIO_InitStruct.Pin = TP3_Pin|NC2_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(GPIOH, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_SCK_D13_Pin */
  GPIO_InitStruct.Pin = ARDUINO_SCK_D13_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF5_SPI2;
  HAL_GPIO_Init(ARDUINO_SCK_D13_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : DCMI_PWR_EN_Pin */
  GPIO_InitStruct.Pin = DCMI_PWR_EN_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(DCMI_PWR_EN_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : DCMI_D4_Pin DCMI_D3_Pin DCMI_D0_Pin DCMI_D2_Pin
                           DCMI_D1_Pin */
  GPIO_InitStruct.Pin = DCMI_D4_Pin|DCMI_D3_Pin|DCMI_D0_Pin|DCMI_D2_Pin
                          |DCMI_D1_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF13_DCMI;
  HAL_GPIO_Init(GPIOH, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_PWM_CS_D5_Pin */
  GPIO_InitStruct.Pin = ARDUINO_PWM_CS_D5_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF2_TIM5;
  HAL_GPIO_Init(ARDUINO_PWM_CS_D5_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_PWM_D10_Pin */
  GPIO_InitStruct.Pin = ARDUINO_PWM_D10_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF1_TIM1;
  HAL_GPIO_Init(ARDUINO_PWM_D10_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : LCD_INT_Pin */
  GPIO_InitStruct.Pin = LCD_INT_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_EVT_RISING;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(LCD_INT_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : ARDUINO_RX_D0_Pin ARDUINO_TX_D1_Pin */
  GPIO_InitStruct.Pin = ARDUINO_RX_D0_Pin|ARDUINO_TX_D1_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF8_USART6;
  HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);

  /*Configure GPIO pin : ULPI_NXT_Pin */
  GPIO_InitStruct.Pin = ULPI_NXT_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF10_OTG_HS;
  HAL_GPIO_Init(ULPI_NXT_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : FMC_SDNME_Pin FMC_SDNE0_Pin */
  GPIO_InitStruct.Pin = FMC_SDNME_Pin|FMC_SDNE0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_FMC;
  HAL_GPIO_Init(GPIOH, &GPIO_InitStruct);

  /*Configure GPIO pins : ARDUINO_D4_Pin ARDUINO_D2_Pin EXT_RST_Pin */
  GPIO_InitStruct.Pin = ARDUINO_D4_Pin|ARDUINO_D2_Pin|EXT_RST_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(GPIOG, &GPIO_InitStruct);

  /*Configure GPIO pins : ARDUINO_A4_Pin ARDUINO_A5_Pin ARDUINO_A1_Pin ARDUINO_A2_Pin
                           ARDUINO_A3_Pin */
  GPIO_InitStruct.Pin = ARDUINO_A4_Pin|ARDUINO_A5_Pin|ARDUINO_A1_Pin|ARDUINO_A2_Pin
                          |ARDUINO_A3_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_ANALOG;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(GPIOF, &GPIO_InitStruct);

  /*Configure GPIO pin : FMC_SDCKE0_Pin */
  GPIO_InitStruct.Pin = FMC_SDCKE0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF12_FMC;
  HAL_GPIO_Init(FMC_SDCKE0_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : ULPI_STP_Pin ULPI_DIR_Pin */
  GPIO_InitStruct.Pin = ULPI_STP_Pin|ULPI_DIR_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF10_OTG_HS;
  HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);

  /*Configure GPIO pins : RMII_MDC_Pin RMII_RXD0_Pin RMII_RXD1_Pin */
  GPIO_InitStruct.Pin = RMII_MDC_Pin|RMII_RXD0_Pin|RMII_RXD1_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF11_ETH;
  HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);

  /*Configure GPIO pin : PB2 */
  GPIO_InitStruct.Pin = GPIO_PIN_2;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF9_QUADSPI;
  HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);

  /*Configure GPIO pins : QSPI_D1_Pin QSPI_D3_Pin QSPI_D0_Pin */
  GPIO_InitStruct.Pin = QSPI_D1_Pin|QSPI_D3_Pin|QSPI_D0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF9_QUADSPI;
  HAL_GPIO_Init(GPIOD, &GPIO_InitStruct);

  /*Configure GPIO pin : RMII_RXER_Pin */
  GPIO_InitStruct.Pin = RMII_RXER_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(RMII_RXER_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : RMII_REF_CLK_Pin RMII_MDIO_Pin RMII_CRS_DV_Pin */
  GPIO_InitStruct.Pin = RMII_REF_CLK_Pin|RMII_MDIO_Pin|RMII_CRS_DV_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF11_ETH;
  HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_A0_Pin */
  GPIO_InitStruct.Pin = ARDUINO_A0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_ANALOG;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(ARDUINO_A0_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : DCMI_HSYNC_Pin PA6 */
  GPIO_InitStruct.Pin = DCMI_HSYNC_Pin|GPIO_PIN_6;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF13_DCMI;
  HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);

  /*Configure GPIO pins : LCD_SCL_Pin LCD_SDA_Pin */
  GPIO_InitStruct.Pin = LCD_SCL_Pin|LCD_SDA_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_OD;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF4_I2C3;
  HAL_GPIO_Init(GPIOH, &GPIO_InitStruct);

  /*Configure GPIO pins : ULPI_CLK_Pin ULPI_D0_Pin */
  GPIO_InitStruct.Pin = ULPI_CLK_Pin|ULPI_D0_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
  GPIO_InitStruct.Alternate = GPIO_AF10_OTG_HS;
  HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);

  /*Configure GPIO pin : ARDUINO_PWM_D6_Pin */
  GPIO_InitStruct.Pin = ARDUINO_PWM_D6_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF9_TIM12;
  HAL_GPIO_Init(ARDUINO_PWM_D6_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : ARDUINO_MISO_D12_Pin ARDUINO_MOSI_PWM_D11_Pin */
  GPIO_InitStruct.Pin = ARDUINO_MISO_D12_Pin|ARDUINO_MOSI_PWM_D11_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF5_SPI2;
  HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);

/* USER CODE BEGIN MX_GPIO_Init_2 */
/* USER CODE END MX_GPIO_Init_2 */
}

/* USER CODE BEGIN 4 */
void func(bool s){

	char msg[5];//buffer de salida

	//Señal triangular
	if (s == false) {

		int sample;
		float t = 0;
		float y; // resultado

		for (sample = 0; sample < 1000; ++sample){ //1000 muestras

			y = 255.0*t;

			sprintf(msg,"%d\n\r",(uint16_t)y);
			HAL_UART_Transmit(&huart1,(uint8_t *)msg,strlen(msg),100);
			HAL_Delay(5);

			t += 0.001;//avanzamos en el tiempo
		}

		for (sample = 0; sample < 126; ++sample){ //1000 muestras
			y = 255.0*t;

			sprintf(msg,"%d\n\r",(uint16_t)y);
			HAL_UART_Transmit(&huart1,(uint8_t *)msg,strlen(msg),100);
			HAL_Delay(5);

			t -= 0.001;//avanzamos en el tiempo
		}

	}

	if (s == true){
		//senoidal
		float w = 2*3.1416; //velocidad angular
		float f = 10; //fecuecnia hz
		float y; // resultado
		float a = 127.5; //amplitud

		int sample;
		float t = 0;
		for (sample = 0; sample < 1000; ++sample){ //1000 muestras

			y = a*sin(w*t*f) + 127.5;

			sprintf(msg,"%d\n\r",(uint16_t)y);
			HAL_UART_Transmit(&huart1,(uint8_t *)msg,strlen(msg),100);
			HAL_Delay(5);

			t += 0.001;//avanzamos en el tiempo
		}
	}

}

/* USER CODE END 4 */

/**
  * @brief  This function is executed in case of error occurrence.
  * @retval None
  */
void Error_Handler(void)
{
  /* USER CODE BEGIN Error_Handler_Debug */
  /* User can add his own implementation to report the HAL error return state */
  __disable_irq();
  while (1)
  {
  }
  /* USER CODE END Error_Handler_Debug */
}

#ifdef  USE_FULL_ASSERT
/**
  * @brief  Reports the name of the source file and the source line number
  *         where the assert_param error has occurred.
  * @param  file: pointer to the source file name
  * @param  line: assert_param error line source number
  * @retval None
  */
void assert_failed(uint8_t *file, uint32_t line)
{
  /* USER CODE BEGIN 6 */
  /* User can add his own implementation to report the file name and line number,
     ex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */
  /* USER CODE END 6 */
}
#endif /* USE_FULL_ASSERT */
